!function(t){var e=!1;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof exports&&(module.exports=t(),e=!0),!e){var i=window.Cookies,a=window.Cookies=t();a.noConflict=function(){return window.Cookies=i,a}}}(function(){function g(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var a in i)e[a]=i[a]}return e}return function t(p){function f(t,e,i){var a;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(i=g({path:"/"},f.defaults,i)).expires){var n=new Date;n.setMilliseconds(n.getMilliseconds()+864e5*i.expires),i.expires=n}i.expires=i.expires?i.expires.toUTCString():"";try{a=JSON.stringify(e),/^[\{\[]/.test(a)&&(e=a)}catch(t){}e=p.write?p.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s]));return document.cookie=t+"="+e+o}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var c=l[d].split("="),u=c.slice(1).join("=");this.json||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var h=c[0].replace(r,decodeURIComponent);if(u=p.read?p.read(u,h):p(u,h)||u.replace(r,decodeURIComponent),this.json)try{u=JSON.parse(u)}catch(t){}if(t===h){a=u;break}t||(a[h]=u)}catch(t){}}return a}}return(f.set=f).get=function(t){return f.call(f,t)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(t,e){f(t,"",g(e,{expires:-1}))},f.withConverter=t,f}(function(){})}),jQuery.cookie=function(t,e,i){return void 0!==e?(i=i||{},null===e?Cookies.remove(t,i):Cookies.set(t,e,i)):Cookies.get(t)},function(b){"use strict";var v={JSPATH:"BJUI/",PLUGINPATH:"BJUI/plugins/",IS_DEBUG:!1,date:!0,KeyPressed:{ctrl:!1,shift:!1},theme:"blue",dialog:{mask:!1,width:500,height:300},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{initUI:"bjui.initUI",beforeInitUI:"bjui.beforeInitUI",afterInitUI:"bjui.afterInitUI",ajaxStatus:"bjui.ajaxStatus",resizeGrid:"bjui.resizeGrid",beforeAjaxLoad:"bjui.beforeAjaxLoad",beforeLoadNavtab:"bjui.beforeLoadNavtab",beforeLoadDialog:"bjui.beforeLoadDialog",afterLoadNavtab:"bjui.afterLoadNavtab",afterLoadDialog:"bjui.afterLoadDialog",beforeCloseNavtab:"bjui.beforeCloseNavtab",beforeCloseDialog:"bjui.beforeCloseDialog",afterCloseNavtab:"bjui.afterCloseNavtab",afterCloseDialog:"bjui.afterCloseDialog"},pageInfo:{total:"total",pageCurrent:"pageCurrent",pageSize:"pageSize",orderField:"orderField",orderDirection:"orderDirection"},alertMsg:{displayPosition:"topcenter",displayMode:"slide",alertTimeout:3e3},ajaxTimeout:5e4,statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},ui:{windowWidth:0,showSlidebar:!0,clientPaging:!0,overwriteHomeTab:!1},debug:function(t){this.IS_DEBUG&&("undefined"!=typeof console?console.log(t):alert(t))},loginInfo:{url:"login.html",title:"Login",width:420,height:260,mask:!0},loadLogin:function(){var t=this.loginInfo;b("body").dialog({id:"bjui-login",url:t.url,title:t.title,width:t.width,height:t.height,mask:t.mask})},init:function(t){var e=b.extend({},t);b.extend(v.statusCode,e.statusCode),b.extend(v.pageInfo,e.pageInfo),b.extend(v.alertMsg,e.alertMsg),b.extend(v.loginInfo,e.loginInfo),b.extend(v.ui,e.ui),b.extend(v.dialog,e.dialog),e.JSPATH&&(this.JSPATH=e.JSPATH),e.PLUGINPATH&&(this.PLUGINPATH=e.PLUGINPATH),e.ajaxTimeout&&(this.ajaxTimeout=e.ajaxTimeout),this.date=void 0===e.date?this.date:e.date,this.IS_DEBUG=e.debug||!1,this.theme=b.cookie("bjui_theme")||e.theme,this.initEnv(),this.date&&this.initDate(),b(this).theme("setTheme",this.theme)},initEnv:function(){b(window).resize(function(){var t=b(this).width();v.ui.windowWidth&&600<v.ui.windowWidth&&v.ui.windowWidth<t&&(t=v.ui.windowWidth),v.initLayout(t),setTimeout(function(){b(this).trigger(v.eventType.resizeGrid)},30)}),setTimeout(function(){var t=b(window).width();v.ui.windowWidth&&600<v.ui.windowWidth&&v.ui.windowWidth<t&&(t=v.ui.windowWidth),v.initLayout(t),b(document).initui()},10)},initLayout:function(t){var e=b("#bjui-header"),i=b("#bjui-navtab"),a=t-(v.ui.showSlidebar?b("#bjui-sidebar").width()+6:6),n=b(window).height()-e.height()-b("#bjui-footer").outerHeight(),o=i.find(".tabsPageHeader").height();v.ui.windowWidth&&b("#bjui-window").width(t),v.windowWidth=t,b("#bjui-container").height(n),i.width(a),b("#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy").css({height:"100%"}),b("#bjui-navtab .tabsPageContent").height(n-o),setTimeout(function(){b("#bjui-navtab > .tabsPageContent > .navtabPage").resizePageH().find(".bjui-layout").resizePageH()},10);var s=b("body").data("bjui.navbar.width"),l=e.find(".bjui-navbar-toggle"),r=e.find(".bjui-navbar-logo"),d=b("#bjui-navbar-collapse"),c=d.find(".bjui-navbar-right");s||(s={logoW:r.outerWidth(),navW:c.outerWidth()},b("body").data("bjui.navbar.width",s)),s&&(t-s.logoW<s.navW?(l.show(),d.addClass("collapse menu")):(l.hide(),d.removeClass("collapse menu in")));var u=b("#bjui-hnav-navbar-box"),h=u.find("> #bjui-hnav-navbar"),p=u.prev(),f=u.next(),g=u.width(),m=0;h.find("> li").each(function(t){var e=b(this);m+=e.outerWidth(),g<m?(f.show(),u.data("hnav.move",!0).data("hnav.liw",m)):(p.hide(),f.hide(),u.removeData("hnav.move"))})},regional:{},setRegional:function(t,e){v.regional[t]=e},getRegional:function(t){if(0<=String(t).indexOf(".")){for(var e,i=String(t).split("."),a=0;a<i.length;a++)e=e?e[i[a]]:v.regional[i[a]];return e}return v.regional[t]},doRegional:function(i,t){return b.each(t,function(t,e){i=i.replaceAll("#"+t+"#",e)}),i},initDate:function(){var t=new Date;b("#bjui-date").html(t.formatDate("yyyy/MM/dd")),setInterval(function(){t=new Date(t.setSeconds(t.getSeconds()+1)),b("#bjui-clock").html(t.formatDate("HH:mm:ss"))},1e3)},removeProgress:function(){var t=b(document);t.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){t.find(".bjui-ajax-mask").fadeOut("normal",function(){b(this).remove()})}),console.log("progress has been removed !")}};window.BJUI=v}(jQuery),function(t){"use strict";t(function(){BJUI.setRegional("alertmsg",{title:{error:"错误提示",info:"信息提示",warn:"警告信息",correct:"成功信息",confirm:"确认信息"},btnMsg:{ok:"确定",yes:"是",no:"否",cancel:"取消"}}),BJUI.setRegional("dialog",{close:"关闭",maximize:"最大化",restore:"还原",minimize:"最小化",title:"弹出窗口"}),BJUI.setRegional("orderby",{asc:"升序",desc:"降序"}),BJUI.setRegional("pagination",{total:"总记录数/总页数",first:"首页",last:"末页",prev:"上一页",next:"下一页",jumpto:"输入跳转页码，回车确认",jump:"跳转",page:"页",refresh:"刷新"}),BJUI.setRegional("datagrid",{asc:"升序",desc:"降序",showhide:"显示/隐藏 列",filter:"过滤",clear:"清除",lock:"锁定列",unlock:"解除锁定",add:"添加",edit:"编辑",save:"保存",update:"更新",cancel:"取消",del:"删除",prev:"上一条",next:"下一条",refresh:"刷新",query:"查询",import:"导入",export:"导出",all:"全部",true:"是",false:"否",selectMsg:"未选中任何行！",editMsg:"请先保存编辑行！",saveMsg:"没有需要保存的行！",delMsg:"确定要删除该行吗？",delMsgM:"确定要删除选中行？"}),BJUI.setRegional("progressmsg","正在努力加载数据，请稍等..."),BJUI.setRegional("datepicker",{close:"关闭",prev:"上月",next:"下月",clear:"清空",ok:"确定",dayNames:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]}),BJUI.setRegional("navtabCM",{refresh:"刷新本标签",close:"关闭本标签",closeother:"关闭其他标签",closeall:"关闭所有标签"}),BJUI.setRegional("dialogCM",{refresh:"刷新本窗口",close:"关闭本窗口",closeother:"关闭其他窗口",closeall:"关闭所有窗口"}),BJUI.setRegional("upload",{upConfirm:"开始上传",upPause:"暂停上传",upCancel:"取消上传"}),BJUI.setRegional("statusCode_503","服务器当前负载过大或者正在维护！"),BJUI.setRegional("sessiontimeout","会话超时，请重新登陆！"),BJUI.setRegional("plhmsg","占位符对应的选择器无有效值！"),BJUI.setRegional("nocheckgroup",'未定义选中项的组名[复选框的"data-group"]！'),BJUI.setRegional("notchecked","未选中任何一项！"),BJUI.setRegional("selectmsg","请选择一个选项！"),BJUI.setRegional("validatemsg","提交的表单中 [{0}] 个字段有错误，请更正后再提交！"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","我的主页"),t.validator&&t.validator.config({defaultMsg:"{0}格式不正确",loadingMsg:"正在验证...",rules:{digits:[/^\d+$/,"请输入整数"],number:[/^[\-\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\.]([0-9]+))?$/,"请输入有效的数字"],letters:[/^[a-z]+$/i,"{0}只能输入字母"],datetime:[/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,"请输入正确的日期时间，例：yyyy-MM-dd HH:mm:ss"],pattern:function(t,e){return!e||(!!t.value.parseDate(e)||this.renderMsg("错误的日期时间格式！",e))},accept:function(t,e){if(!e)return!0;var i=e[0];return"*"===i||new RegExp(".(?:"+(i||"png|jpg|jpeg|gif")+")$","i").test(t.value)||this.renderMsg("只接受{1}后缀",i.replace("|",","))}}})})}(jQuery),function(t){"use strict";BJUI.setRegional("alertmsg",{title:{error:"Error",info:"Info",warn:"Warning",correct:"Correct",confirm:"Confirm"},btnMsg:{ok:"OK",yes:"YES",no:"NO",cancel:"Cancel"}}),BJUI.setRegional("dialog",{close:"Close",maximize:"Maximize",restore:"Restore",minimize:"Minimize",title:"Popup window"}),BJUI.setRegional("orderby",{asc:"Asc",desc:"Desc"}),BJUI.setRegional("pagination",{first:"First page",last:"Last page",prev:"Prev page",next:"Next page",jumpto:"Jump page number",jump:"Jump"}),BJUI.setRegional("datagrid",{asc:"ASC",desc:"DESC",showhide:"Show/Hide columns",filter:"Filter",clear:"Clear",lock:"Lock",unlock:"Unlock",add:"Add",edit:"Edit",save:"Save",update:"Update",cancel:"Cancel",del:"Delete",prev:"Prev",next:"Next",refresh:"Refresh",query:"Query",import:"Import",export:"Export",all:"All",true:"True",false:"False",selectMsg:"Not selected any rows!",saveMsg:"No rows need to save!",editMsg:"Please save the edited row!",delMsg:"Sure you want to delete this row?",delMsgM:"Sure you want to delete selected rows?"}),BJUI.setRegional("progressmsg","Data loading, please waiting..."),BJUI.setRegional("datepicker",{close:"Close",prev:"Prev month",next:"Next month",clear:"Clear",ok:"OK",dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),BJUI.setRegional("navtabCM",{refresh:"Refresh navtab",close:"Close navtab",closeother:"Close other navtab",closeall:"Close all navtab"}),BJUI.setRegional("dialogCM",{refresh:"Refresh dialog",close:"Close dialog",closeother:"Close other dialog",closeall:"Close all dialog"}),BJUI.setRegional("upload",{upConfirm:"Start upload",upPause:"Pause upload",upCancel:"Cancel upload"}),BJUI.setRegional("statusCode_503","The current server load is too large or is down for maintenance!"),BJUI.setRegional("sessiontimeout","Session timeout, please login!"),BJUI.setRegional("plhmsg","Placeholder corresponding selector None Valid!"),BJUI.setRegional("nocheckgroup",'Undefined group name selected item [check box "data-group"]!'),BJUI.setRegional("notchecked","Unchecked any one!"),BJUI.setRegional("selectmsg","Please select one option!"),BJUI.setRegional("validatemsg","Submitted form data has [{0}] field an error, please after modified submitting!"),BJUI.setRegional("uititle","B-JUI"),BJUI.setRegional("maintab","My home"),window.FRAG={dialog:'<div class="bjui-dialog bjui-dialog-container" style="top:150px; left:300px;">    <div class="dialogHeader" onselectstart="return false;" oncopy="return false;" onpaste="return false;" oncut="return false;">        <a class="close" href="#close" title="#close#"><i class="fa fa-times-circle"></i></a>        <a class="maximize" href="#maximize" title="#maximize#"><i class="fa fa-plus-circle"></i></a>        <a class="restore" href="#restore" title="#restore#"><i class="fa fa-history"></i></a>        <a class="minimize" href="#minimize" title="#minimize#"><i class="fa fa-minus-circle"></i></a>        <h1><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></h1>    </div>    <div class="dialogContent unitBox"></div>    <div class="resizable_h_l" tar="nw"></div>    <div class="resizable_h_r" tar="ne"></div>    <div class="resizable_h_c" tar="n"></div>    <div class="resizable_c_l" tar="w" style="height:100%;"></div>    <div class="resizable_c_r" tar="e" style="height:100%;"></div>    <div class="resizable_f_l" tar="sw"></div>    <div class="resizable_f_r" tar="se"></div>    <div class="resizable_f_c" tar="s"></div></div>',taskbar:'<div id="bjui-taskbar" style="left:0px; display:none;">    <div class="taskbarContent">        <ul></ul>    </div>    <div class="taskbarLeft taskbarLeftDisabled"><i class="fa fa-angle-double-left"></i></div>    <div class="taskbarRight"><i class="fa fa-angle-double-right"></i></div></div>',splitBar:'<div id="bjui-splitBar"></div>',splitBarProxy:'<div id="bjui-splitBarProxy"></div>',resizable:'<div id="bjui-resizable" class="bjui-resizable"></div>',alertBackground:'<div class="bjui-alertBackground"></div>',maskBackground:'<div class="bjui-maskBackground bjui-ajax-mask"></div>',maskProgress:'<div class="bjui-maskProgress bjui-ajax-mask"><i class="fa fa-cog fa-spin"></i>&nbsp;&nbsp;#msg#<div class="progressBg"><div class="progress"></div></div></div>',progressBar_custom:'<div id="bjui-progressBar-custom" class="progressBar"><i class="fa fa-cog fa-spin"></i> <span></span></div>',dialogMask:'<div class="bjui-dialogBackground"></div>',orderby:'<a href="javascript:;" class="order asc" data-order-direction="asc" title="#asc#"><i class="fa fa-angle-up"></i></a><a href="javascript:;" class="order desc" data-order-direction="desc" title="#desc#"><i class="fa fa-angle-down"></i></a>',slidePanel:'<div class="panel panel-default">    <div class="panel-heading">        <h4 class="panel-title"><a data-toggle="collapse" data-parent="#bjui-accordionmenu" href="##id#" class="#class#">#icon#&nbsp;#title#<b>#righticon#</b></a></h4>    </div>    <div id="#id#" class="panel-collapse collapse#bodyclass#">        <div class="panel-body">        </div>    </div></div>',pagination:'<ul class="pagination">    <li class="j-first">        <a class="first" href="javascript:;"><i class="fa fa-step-backward"></i> #first#</a>        <span class="first"><i class="fa fa-step-backward"></i> #first#</span>    </li>    <li class="j-prev">        <a class="previous" href="javascript:;"><i class="fa fa-backward"></i> #prev#</a>        <span class="previous"><i class="fa fa-backward"></i> #prev#</span>    </li>    #pageNumFrag#    <li class="j-next">        <a class="next" href="javascript:;">#next# <i class="fa fa-forward"></i></a>        <span class="next">#next# <i class="fa fa-forward"></i></span>    </li>    <li class="j-last">        <a class="last" href="javascript:;">#last# <i class="fa fa-step-forward"></i></a>        <span class="last">#last# <i class="fa fa-step-forward"></i></span>    </li>    <li class="jumpto"><span class="p-input"><input class="form-control input-sm-pages" type="text" size="2.6" value="#pageCurrent#" title="#jumpto#"></span><a class="goto" href="javascript:;" title="#jump#"><i class="fa fa-chevron-right"></i></a></li></ul>',gridPaging:'<ul class="pagination">    <li class="page-total">        <span title="#total#">#count#</span>    </li>    <li class="page-jumpto"><span class="page-input"><input class="form-control input-sm-pages" type="text" size="3.2" value="#pageCurrent#" title="#jumpto#"></span></li>    <li class="page-first btn-nav">        <a href="javascript:;" title="#first#"><i class="fa fa-step-backward"></i></a>    </li>    <li class="page-prev btn-nav">        <a href="javascript:;" title="#prev#"><i class="fa fa-backward"></i></a>    </li>    <li class="page-next btn-nav">        <a href="javascript:;" title="#next#"><i class="fa fa-forward"></i></a>    </li>    <li class="page-last btn-nav">        <a href="javascript:;" title="#last#"><i class="fa fa-step-forward"></i></a>    </li></ul>',gridPageNum:'<li class="page-num#active#"><a href="javascript:;">#num#</a></li>',gridMenu:'<div class="datagrid-menu-box">    <ul>        <li class="datagrid-li-asc"><a href="javascript:;"><span class="icon"><i class="fa fa-sort-amount-asc"></i></span><span class="title">#asc#</span></a></li>        <li class="datagrid-li-desc"><a href="javascript:;"><span class="icon"><i class="fa fa-sort-amount-desc"></i></span><span class="title">#desc#</span></a></li>        <li class="datagrid-li-filter"><a href="javascript:;"><span class="icon"><i class="fa fa-filter"></i></span><span class="title">#filter#</span><span class="arrow"></span></a></li>        <li class="datagrid-li-showhide"><a href="javascript:;"><span class="icon"><i class="fa fa-check-square-o"></i></span><span class="title">#showhide#</span><span class="arrow"></span></a></li>        <li class="datagrid-li-lock"><a href="javascript:;"><span class="icon"><i class="fa fa-lock"></i></span><span class="title">#lock#</span></a></li>        <li class="datagrid-li-unlock disable"><a href="javascript:;"><span class="icon"><i class="fa fa-unlock"></i></span><span class="title">#unlock#</span></a></li>    </ul></div>',gridFilter:'<div class="datagrid-filter-box"><fieldset><legend>#label#</legend><span class="filter-a"></span><span class="filter-and"><select data-toggle="selectpicker" data-container="true" data-width="100%"><option value="and">AND</option><option value="or">OR</option></select></span><span class="filter-b"></span><span class="filter-ok"><button type="button" class="btn-green ok" data-icon="check">#filter#</button><button type="button" class="btn-orange clear" data-icon="remove">#clear#</button></span></fieldset></div>',gridShowhide:'<li data-index="#index#" class="datagrid-col-check"><a href="javascript:;"><i class="fa fa-check-square-o"></i>#label#</a></li>',gridEditBtn:'<button type="button" class="btn-green edit" data-icon="edit">#edit#</button><button type="button" class="btn-green update" data-icon="edit">#update#</button><button type="button" class="btn-green save" data-icon="check">#save#</button><button type="button" class="btn-orange cancel" data-icon="undo">#cancel#</button><button type="button" class="btn-orange delete" data-icon="remove">#del#</button>',gridDialogEditBtns:'<ul>    <li class="pull-left"><button type="button" class="btn btn-orange prev" data-icon="arrow-up">#prev#</button></li>    <li class="pull-left"><button type="button" class="btn btn-orange next" data-icon="arrow-down">#next#</button></li>    <li><button type="button" class="btn btn-red cancel" data-icon="remove">#cancel#</button></li>    <li><button type="button" class="btn btn-default save" data-icon="save">#save#</button></li></ul>',alertBoxFrag:'<div id="bjui-alertMsgBox" class="bjui-alert"><div class="alertContent"><div class="#type#"><div class="alertInner"><h1><i class="fa #fa#"></i>#title#</h1><div class="msg">#message#</div></div><div class="toolBar"><ul>#btnFragment#</ul></div></div></div></div>',alertBtnFrag:'<li><button class="btn btn-#class#" rel="#callback#" type="button">#btnMsg#</button></li>',calendarFrag:'<div id="bjui-calendar">    <div class="main">        <a class="close" href="javascript:;" title="#close#"><i class="fa fa-times-circle"></i></a>        <div class="head">            <table width="100%" border="0" cellpadding="0" cellspacing="2">                <tr>                    <td width="20"><a class="prev" href="javascript:;" title="#prev#"><i class="fa fa-arrow-left"></i></a></td>                    <td><select name="year"></select></td>                    <td><select name="month"></select></td>                    <td width="20"><a class="next" href="javascript:;" title="#next#"><i class="fa fa-arrow-right"></i></a></td>                </tr>            </table>        </div>        <div class="body">            <dl class="dayNames"><dt>7</dt><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>            <dl class="days">\x3c!-- date list --\x3e</dl>            <div style="clear:both;height:0;line-height:0"></div>        </div>        <div class="foot">            <table class="time">                <tr>                    <td>                        <input type="text" class="hh" maxlength="2" data-type="hh" data-start="0" data-end="23">:<input                         type="text" class="mm" maxlength="2" data-type="mm" data-start="0" data-end="59">:<input                         type="text" class="ss" maxlength="2" data-type="ss" data-start="0" data-end="59">                    </td>                    <td><ul><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul></td>                </tr>            </table>            <button type="button" class="clearBtn btn btn-orange">#clear#</button>            <button type="button" class="okBtn btn btn-default">#ok#</button>        </div>        <div class="tm">            <ul class="hh">                <li>0</li>                <li>1</li>                <li>2</li>                <li>3</li>                <li>4</li>                <li>5</li>                <li>6</li>                <li>7</li>                <li>8</li>                <li>9</li>                <li>10</li>                <li>11</li>                <li>12</li>                <li>13</li>                <li>14</li>                <li>15</li>                <li>16</li>                <li>17</li>                <li>18</li>                <li>19</li>                <li>20</li>                <li>21</li>                <li>22</li>                <li>23</li>            </ul>            <ul class="mm">                <li>0</li>                <li>5</li>                <li>10</li>                <li>15</li>                <li>20</li>                <li>25</li>                <li>30</li>                <li>35</li>                <li>40</li>                <li>45</li>                <li>50</li>                <li>55</li>            </ul>            <ul class="ss">                <li>0</li>                <li>10</li>                <li>20</li>                <li>30</li>                <li>40</li>                <li>50</li>            </ul>        </div>    </div></div>',spinnerBtn:'<ul class="bjui-spinner"><li class="up" data-add="1">&and;</li><li class="down">&or;</li></ul>',lookupBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="lookupbtn"><i class="fa fa-search"></i></a>',dateBtn:'<a class="bjui-lookup" href="javascript:;" data-toggle="datepickerbtn"><i class="fa fa-calendar"></i></a>',navtabCM:'<ul id="bjui-navtabCM">    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</li>    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</li>    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</li></ul>',dialogCM:'<ul id="bjui-dialogCM">    <li rel="reload"><span class="icon"><i class="fa fa-refresh"></i></span><span class="title">#refresh#</span></li>    <li rel="closeCurrent"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#close#</span></li>    <li rel="closeOther"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeother#</span></li>    <li rel="closeAll"><span class="icon"><i class="fa fa-remove"></i></span><span class="title">#closeall#</span></li></ul>',externalFrag:'<iframe src="{url}" style="width:100%;height:{height};" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>',uploadTemp:'<div id="{fileId}" class="item">    <div class="info">        <span class="up_filename">{fileName}</span><span class="up_confirm" title="#upConfirm#"><i class="fa fa-play-circle-o"></i></span><span class="up_pause" title="#upPause#"><span class="glyphicon glyphicon-pause"></span></span><span class="up_cancel" title="#upCancel#"><i class="fa fa-times-circle-o"></i></span>    </div>    <div class="preview"><span class="img"></span></div>    <div class="progress"><div class="bar"></div></div>    <span class="percent">{percent}</span>    <span class="filesize"><span class="uploadedsize">{uploadedSize}</span>/<span class="totalsize">{fileSize}</span></span></div>',uploadFrag:'<input class="bjui-upload-select-file" style="display:none;" type="file" name="fileselect[]" #multi# accept="#accept#"><a href="javascript:void(0)" class="btn btn-default bjui-upload-select">#btnTxt#</a><div class="queue"></div>',statusCode_503:"HTTP status 503, #statusCode_503#",sessionTimout:"#sessiontimeout#",alertPlhMsg:"#plhmsg#",alertNoCheckGroup:"#nocheckgroup#",alertNotChecked:"#notchecked#",alertSelectMsg:"#selectmsg#",validateErrorMsg:"#validatemsg#",uiTitle:"#uititle#",mainTabTitle:"#mynavtab#"}}(jQuery),function(s){"use strict";s.fn.extend({ajaxUrl:function(a){var n=s(this);n.trigger(BJUI.eventType.beforeAjaxLoad),a.loadingmask&&n.trigger(BJUI.eventType.ajaxStatus),s.ajax({type:a.type||"GET",url:a.url,data:a.data||{},cache:!1,dataType:"html",timeout:BJUI.ajaxTimeout,success:function(t){var e=t.toJson(),i=n.find("> .bjui-ajax-mask");e[BJUI.keys.statusCode]?(e[BJUI.keys.statusCode]===BJUI.statusCode.error?(e[BJUI.keys.message]&&n.alertmsg("error",e[BJUI.keys.message]),n.closest(".bjui-layout").length||(n.closest(".navtab-panel").length?n.navtab("closeCurrentTab"):n.dialog("closeCurrent"))):e[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&(n.closest(".bjui-dialog").length&&n.dialog("closeCurrent"),n.closest(".navtab-panel").length&&n.navtab("closeCurrentTab"),s("body").alertmsg("info",e[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()),i.fadeOut("normal",function(){s(this).remove()})):(n.empty().html(t).append(i).initui(),s.isFunction(a.callback)&&a.callback(t))},error:function(t,e,i){n.bjuiajax("ajaxError",t,e,i),n.closest(".bjui-layout").length||(n.closest(".navtab-panel").length?n.navtab("closeCurrentTab"):n.dialog("closeCurrent")),n.trigger("bjui.ajaxError")},statusCode:{503:function(t,e,i){n.alertmsg("error",FRAG.statusCode_503.replace("#statusCode_503#",BJUI.regional.statusCode_503)||i)},403:function(t,e,i){n.alertmsg("error","登录超时"),BJUI.loadLogin()}}})},loadUrl:function(t,e,i){s(this).ajaxUrl({url:t,data:e,callback:i})},doAjax:function(e){var a,n,o=s(this);e.url?e.callback?(e.callback=e.callback.toFunc(),e.loadingmask&&((a=o.getPageTarget()).trigger(BJUI.eventType.ajaxStatus),n=a.find("> .bjui-ajax-mask")),e.type||(e.type="POST"),e.dataType||(e.dataType="json"),e.cache||(e.cache=!1),e.timeout=BJUI.ajaxTimeout,e.success=function(t){n?e.callback?s.when(e.callback(t)).done(function(){a.trigger("bjui.ajaxStop")}):a.trigger("bjui.ajaxStop"):e.callback(t)},e.error=e.error||function(t,e,i){o.bjuiajax("ajaxError",t,e,i),n&&a.trigger("bjui.ajaxError")},s.ajax(e)):BJUI.debug("The ajax callback is undefined!"):BJUI.debug("The ajax url is undefined!")},getPageTarget:function(){return this.closest(".bjui-layout").length?this.closest(".bjui-layout"):this.closest(".navtab-panel").length?s.CurrentNavtab:s.CurrentDialog},resizePageH:function(){return this.each(function(){if(!s(this).closest(".tab-content").length){var t=s(this),e=t.find("> .bjui-pageHeader"),i=t.find("> .bjui-pageContent"),a=t.find("> .bjui-pageFooter"),n=e.outerHeight()||0,o=a.outerHeight()||0;t.hasClass("navtabPage")&&t.is(":hidden")&&(t.show(),n=e.outerHeight()||0,o=a.outerHeight()||0,t.hide()),a.css("bottom")&&(o+=parseInt(a.css("bottom"))||0),0===o&&t.hasClass("dialogContent")&&(o=5),i.css({top:n,bottom:o})}})},getMaxIndexObj:function(t){var i=0,a=0;return t.each(function(t){var e=parseInt(s(this).css("zIndex"))||1;i<e&&(i=e,a=t)}),t.eq(a)},serializeJson:function(){var t={},e=this.serializeArray();return s.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},isTag:function(t){return!!t&&(!!s(this).prop("tagName")&&s(this)[0].tagName.toLowerCase()===t)},isBind:function(t){var e=s(this).data("events");return e&&t&&e[t]},log:function(t){return this.each(function(){console&&console.log("%s: %o",t,this)})}}),s.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\d*$/).test(this)},isInteger:function(){return new RegExp(/^\d+$/).test(this)},isNumber:function(){return new RegExp(/^([-]{0,1}(\d+)[\.]+(\d+))|([-]{0,1}(\d+))$/).test(this)},includeChinese:function(){return new RegExp(/[\u4E00-\u9FA5]/).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return 0<=e&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\[[0-9]+\]/,"["+t+"]").replace("#index#",t)},replaceSuffix2:function(t){return this.replace(/\-(i)([0-9]+)$/,"-i"+t).replace("#index#",t)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(t,e){return this.replace(new RegExp(t,"gm"),e)},replacePlh:function(i){return i=i||s(document),this.replace(/{\/?[^}]*}/g,function(t){var e=i.find(t.replace(/[{}]+/g,""));return e&&e.val()?e.val():t})},replaceMsg:function(t){return this.replace(new RegExp("({.*})","g"),t)},replaceTm:function(e){return e?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){return e[t.replace(/[{}]+/g,"")]}):this},replaceTmById:function(t){var i=t||s(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_-]*})","g"),function(t){var e=i.find("#"+t.replace(/[{}]+/g,""));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp("{/?[^}]*}").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:""},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(" "!==e&&"\n"!==e&&"\t"!==e&&"\r"!==e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1===this.indexOf("://"+document.domain)},toBool:function(){return"true"===this.toLowerCase()},toJson:function(){var t=this;try{return"object"==typeof t&&(t=t.toString()),t.trim().match("^{(.+:.+,*){1,}}$")?JSON.parse(this):this}catch(t){return this}},toObj:function(){var e=null;try{e=new Function("return "+this)()}catch(t){e=this,BJUI.debug('String toObj：Parse "String" to "Object" error! Your str is: '+this)}return e},toFunc:function(){if(this&&0!==this.length){if(this.startsWith("function"))return new Function("return "+this)();for(var t=this.split("."),e=window,i=0;i<t.length;i++)e=e[t[i]];return"function"==typeof e?e:void 0}},setUrlParam:function(t,e){var i=this,a=i;if(null!=a&&"undefined"!==a&&""!==a){e=encodeURIComponent(e);var n=new RegExp("(^|)"+name+"=([^&]*)(|$)"),o=name+"="+e;a=null!=i.match(n)?i.replace(n,o):i.match("[?]")?i+"&"+o:i+"?"+o}return a}}),s.extend(Function.prototype,{toFunc:function(){return this}}),s.extend(Array.prototype,{remove:function(t){return t<0?this:this.slice(0,t).concat(this.slice(t+1,this.length))},unique:function(){var t=[];this.sort();for(var e=0;e<this.length;e++)this[e]!==this[e+1]&&(t[t.length]=this[e]);return t},myIndexOf:function(t){return this.indexOf(t)},toJson:function(){var t={};return s.each(this,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}}),s.isJson=function(t){var e=!0;try{e=s.parseJSON(t)}catch(t){return!1}return!!e}}(jQuery),function(t){"use strict";function e(){}e.prototype.destroyModules=function(t){try{var e=t.find(".bjui-upload > .uploadify");e.length&&e.uploadify("destroy");var i=t.find('[data-toggle="colorpicker"]');i.length&&i.colorpicker("destroy")}catch(t){BJUI.debug(t)}},BJUI.ModuleFixed=new e}(jQuery),function(s){"use strict";var l=function(t,e){this.$element=s(t),this.options=e};l.prototype.init=function(){var e=this;this.options.$obj=this.$element,this.options.obj&&(this.options.$obj=this.options.obj),this.options.event?this.start(this.options.event):this.$element.find(this.options.selector).bind("mousedown",function(t){e.start.apply(e,[t])})},l.prototype.start=function(t){document.onselectstart=function(t){return!1};var e=this;this.options.oleft=parseInt(this.$element.css("left"))||0,this.options.otop=parseInt(this.$element.css("top"))||0,s(document).bind("mouseup.bjui.basedrag",function(t){e.stop.apply(e,[t])}).bind("mousemove.bjui.basedrag",function(t){e.drag.apply(e,[t])})},l.prototype.drag=function(t){t||(t=window.event);var e=this.options,i=e.oleft+(t.pageX||t.clientX)-e.event.pageX,a=e.otop+(t.pageY||t.clientY)-e.event.pageY;if(a<1&&(a=0),"horizontal"===e.move)e.minW&&i>=parseInt(this.options.$obj.css("left"))+e.minW&&e.maxW&&i<=parseInt(this.options.$obj.css("left"))+e.maxW?this.$element.css("left",i):e.scop&&e.relObj&&(parseInt(e.relObj.css("left")),e.cellMinW,this.$element.css("left",i));else if("vertical"===e.move)this.$element.css("top",a);else{var n=e.selector?this.options.$obj.find(e.selector):this.options.$obj;i>=2*-n.outerWidth()/3&&0<=a&&i+n.outerWidth()/3<s(window).width()&&a+n.outerHeight()<s(window).height()&&this.$element.css({left:i,top:a})}return e.drag&&e.drag.apply(this.$element,[this.$element,t]),this.preventEvent(t)},l.prototype.stop=function(t){return s(document).unbind("mousemove.bjui.basedrag").unbind("mouseup.bjui.basedrag"),this.options.stop&&this.options.stop.apply(this.$element,[this.$element,t]),this.options.event&&this.destroy(),document.onselectstart=function(t){return!0},this.preventEvent(t)},l.prototype.preventEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},l.prototype.destroy=function(){this.$element.removeData("bjui.basedrag"),this.options.nounbind||this.$element.unbind("mousedown")};var t=s.fn.basedrag;s.fn.basedrag=function(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},t.data(),"object"==typeof a&&a),i=t.data("bjui.basedrag");i||t.data("bjui.basedrag",i=new l(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})},s.fn.basedrag.Constructor=l,s.fn.basedrag.noConflict=function(){return s.fn.basedrag=t,this}}(jQuery),function(d){"use strict";d(function(){d("#bjui-leftside").after("\x3c!-- Adjust the width of Left slide --\x3e").after(FRAG.splitBar).after(FRAG.splitBarProxy)});var s=function(t,e){this.$element=d(t),this.$bar=this.$element.find("#bjui-sidebar"),this.$sbar=this.$element.find("#bjui-sidebar-s"),this.$accordionmenu=this.$bar.find("#bjui-accordionmenu"),this.$lock=this.$bar.find("> .toggleCollapse > .lock"),this.$navtab=d("#bjui-navtab"),this.$collapse=this.$sbar.find(".collapse"),this.$split=d("#bjui-splitBar"),this.$split2=d("#bjui-splitBarProxy"),this.isfloat=!1,this.options=e};function n(a){var n=arguments,o=a;return this.each(function(){var t=d(this),e=d.extend({},t.data(),"object"==typeof a&&a),i=t.data("bjui.slidebar");i||t.data("bjui.slidebar",i=new s(this,e)),"string"==typeof o&&d.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.prototype.lock=function(){var t=this,e=t.$bar.outerWidth()+4,i=BJUI.windowWidth-d("#bjui-sidebar").width()-6;t.faLock(),t.hoverLock(),t.$sbar.animate({left:-10},20),t.$bar.removeClass("shadown"),t.isfloat=!1,t.$navtab.animate({left:e,width:i},500,function(){d(window).trigger(BJUI.eventType.resizeGrid)}),t.$split.show()},s.prototype.unlock=function(){var t=this,e=0-t.$bar.outerWidth(),i=BJUI.windowWidth-6;t.faUnLock(),t.hoverUnLock(),t.$navtab.animate({left:6,width:i},400),t.$bar.animate({left:e},500,function(){t.$sbar.animate({left:0},200),t.$split.hide(),d(window).trigger(BJUI.eventType.resizeGrid)}),t.isfloat=!1},s.prototype.float=function(){this.$sbar.animate({left:-10},200),this.$bar.addClass("shadown").animate({left:0},500),this.isfloat=!0},s.prototype.hideFloat=function(){var t=this,e=0-t.$bar.outerWidth();t.$bar.animate({left:e-10},500,function(){t.$sbar.animate({left:0},100)}),t.isfloat=!1},s.prototype.hoverLock=function(){var t=this;t.$lock.hover(function(){t.tipUnLock(),t.faUnLock()},function(){t.tipLock(),t.faLock()})},s.prototype.hoverUnLock=function(){var t=this;t.$lock.hover(function(){t.tipLock(),t.faLock()},function(){t.tipUnLock(),t.faUnLock()})},s.prototype.tipLock=function(){this.$lock.tooltip("destroy").tooltip({title:"保持锁定，始终显示导航栏",container:"body"})},s.prototype.tipUnLock=function(){this.$lock.tooltip("destroy").tooltip({title:"解除锁定，自动隐藏导航栏",container:"body"})},s.prototype.faLock=function(){this.$lock.find("> i").attr("class","fa fa-lock")},s.prototype.faUnLock=function(){this.$lock.find("> i").attr("class","fa fa-unlock-alt")},s.prototype.init=function(){var n=this;BJUI.ui.showSlidebar?n.hoverLock():n.unlock(),this.$lock.off("click.bjui.slidebar").on("click.bjui.slidebar",function(){n.isfloat?n.lock():n.unlock(),BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar}),this.$collapse.hover(function(){n.float(),n.$navtab.click(function(){n.isfloat&&n.hideFloat()})}),this.$split.mousedown(function(e){n.$split2.each(function(){var t=d(this);return setTimeout(function(){t.show()},100),t.css({visibility:"visible",left:n.$split.css("left")}).basedrag(d.extend(n.options,{obj:n.$bar,move:"horizontal",event:e,stop:function(){d(this).css("visibility","hidden");var t=parseInt(d(this).css("left"))-parseInt(n.$split.css("left")),e=n.$bar.outerWidth()+t,i=parseInt(n.$navtab.css("left"))+t,a=n.$navtab.outerWidth()-t;n.$bar.css("width",e),n.$split.css("left",d(this).css("left")),n.$navtab.css({left:i,width:a})}})),!1})}),d("#bjui-hnav-navbar-box").length&&n.moveHnav(),n.$accordionmenu.collapse().on("hidden.bs.collapse",function(t){d(this).find("> .panel > .panel-heading").each(function(){var t=d(this);t.find("> h4 > a").hasClass("collapsed")&&t.removeClass("active")})}).on("shown.bs.collapse",function(t){d(this).find("> .panel > .panel-heading").each(function(){var t=d(this);t.find("> h4 > a").hasClass("collapsed")||t.addClass("active")})}),n.clickMenu()},s.prototype.clickMenu=function(){var o=this;o.$bar.on("click","ul.menu-items li > a",function(t){t.preventDefault();var e=d(this),i=e.parent(),a=e.data("options").toObj(),n=i.find("> .menu-items-children");i.addClass("active"),a&&(a.url=e.attr("href"),a.url&&"javascript:;"!==a.url&&(a.onClose=function(){i.removeClass("active")},a.onSwitch=function(){o.$accordionmenu.find("ul.menu-items li").removeClass("switch"),i.addClass("switch")},a.title||(a.title=e.text()),a.target?e.dialog(a):e.navtab(a))),n.length&&i.toggleClass("open")})},s.prototype.moveHnav=function(){var t=d("#bjui-hnav-navbar-box"),e=t.find("> #bjui-hnav-navbar"),i=t.prev(),a=t.next();i.hover(function(){e.stop().animate({left:0},2e3,function(){i.hide()})},function(){e.stop(),t.data("hnav.move")&&a.show()}).on("click",function(){return e.stop().animate({left:0},"fast",function(){i.hide()}),!1}),a.hover(function(){e.stop().animate({left:t.width()-t.data("hnav.liw")-10},2e3,function(){a.hide()})},function(){e.stop(),"0px"!==e.css("left")&&i.show()}).on("click",function(){return e.stop().animate({left:t.width()-t.data("hnav.liw")-10},"fast",function(){a.hide()}),!1})},s.prototype.initHnav=function(){var t,e,s,i,l=this.$element.text().trim(),a=this.$element.parent(),r=d("#bjui-accordionmenu");t=a.find("> .items > ul.ztree"),e=a.find("> .items > ul.menu-items"),(t.length||e.length)&&(t.length&&(i=t),e.length&&(i=i?i.add(e):e,e.find("a").each(function(){var t=d(this),e=t.data("options");!t.data("icon.init")&&e&&"string"==typeof e&&(e=e.toObj())&&e.faicon&&(e.faicon=e.faicon.trim(),e.faicon.startsWith("fa-")&&(e.faicon=e.faicon.substr(3)),t.prepend('<i class="fa fa-'+e.faicon+'"></i>').data("icon.init",!0).attr("title",t.text()))})),r.empty(),i.each(function(t){var e,i,a,n=d(this),o=n.data("faicon")||"dot-circle-o";n.data("tit")&&(l=n.data("tit")),i=t?"collapsed":"",a=t?"":" in",e=FRAG.slidePanel.replaceAll("#id#","bjui-collapse"+t).replaceAll("#title#",l).replaceAll("#righticon#",'<i class="fa fa-angle-down"></i>').replaceAll("#class#",i).replaceAll("#bodyclass#",a),e=o?e.replaceAll("#icon#",'<i class="fa fa-'+o+'"></i>'):e.replaceAll("#icon#",""),(s=d(e)).find("> .panel-collapse > .panel-body").append(n.removeAttr("data-noinit")),r.append(s),t||s.collapse("show")}),d("#bjui-sidebar").initui(),a.addClass("active").data("bjui.slidebar.hnav.panels",r.find("> .panel")).siblings().removeClass("active"))};var t=d.fn.slidebar;d.fn.slidebar=n,d.fn.slidebar.Constructor=s,d.fn.basedrag.noConflict=function(){return d.fn.slidebar=t,this},d(document).one(BJUI.eventType.afterInitUI,function(t){d("#bjui-leftside").slidebar({minW:150,maxW:700})}),d(document).on("click.bjui.slidebar.data-api",'[data-toggle="slidebar"]',function(t){var e=d(this).parent(),i=d("#bjui-accordionmenu"),a=e.data("bjui.slidebar.hnav.panels");i.find("> .panel").detach(),a&&a.length?(i.append(a),e.addClass("active").siblings().removeClass("active")):n.call(d(this),"initHnav"),t.preventDefault()})}(jQuery),function(c){"use strict";var u,h,p;c(function(){u=c('<div id="bjui-contextmenu"></div>').hide(),h=c('<div id="bjui-contextmenuShadow"></div>').hide(),p=[],c("body").append("\x3c!-- contextmenu --\x3e").append(u).append(h)});var s=function(t,e){this.$element=c(t),this.options=e};s.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null},s.prototype.init=function(){var e=this,i=this.options;if(i.id){p.push({id:i.id,shadow:i.shadow,bindings:i.bindings||{},ctrSub:i.ctrSub});var a=p.length-1;this.$element.on("contextmenu",function(t){return e.display(a,this,t,i),!1})}},s.prototype.display=function(t,i,e,a){var n=this,o=p[t],s=BJUI.regional[o.id],l=FRAG[o.id];c.each(s,function(t,e){l=l.replace("#"+t+"#",s[t])}),u.html(l),c.each(o.bindings,function(t,e){c('[rel="'+t+'"]',u).on("click",function(t){n.hide(),e(c(i),c("#bjui-"+o.id))})});var r=e.pageX,d=e.pageY;c(window).width()<r+u.width()&&(r-=u.width()),c(window).height()<d+u.height()&&(d-=u.height()),u.css({left:r,top:d}).show(),o.shadow&&h.css({width:u.width(),height:u.height(),left:r+3,top:d+3}).show(),c(document).one("click",n.hide),c.isFunction(o.ctrSub)&&o.ctrSub(c(i),c("#bjui-"+o.id))},s.prototype.hide=function(){u.hide(),h.hide()},s.prototype.show=function(i){var a=this;i.items&&i.items.length&&a.$element.on("contextmenu",function(t){var e=!0;return i.exclude&&a.$element.find(i.exclude).each(function(){if(this===t.target||c(this).find(t.target).length)return e=!1,null}),e?(a.custom(i.items,t),!1):(t.stopPropagation(),!e)})},s.prototype.custom=function(t,e){u.empty().html("<ul></ul>");var a,n=this,i=n.options,o=u.find("> ul");c.each(t,function(t,e){var i="";e.icon&&(i='<i class="fa fa-'+e.icon+'"></i>'),"diver"===e.title?a=c('<li class="diver"></li>'):(a=c('<li><span class="icon">'+i+'</span><span class="title">'+e.title+"</span></li>"),e.func&&"string"==typeof e.func&&(e.func=e.func.toFunc()),e.func&&a.on("click",function(t){n.hide(),e.func(n.$element,a)})),a.appendTo(o)});var s=e.pageX,l=e.pageY;c(window).width()<s+u.width()&&(s-=u.width()),c(window).height()<l+u.height()&&(l-=u.height()),u.css({left:s,top:l}).show(),i.shadow&&h.css({width:u.width(),height:u.height(),left:s+3,top:l+3}).show(),c(document).one("click",n.hide)};var t=c.fn.contextmenu;c.fn.contextmenu=function(a){var n=arguments,o=a;return this.each(function(){var t=c(this),e=c.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.contextmenu");i||t.data("bjui.contextmenu",i=new s(this,e)),"string"==typeof o&&c.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})},c.fn.contextmenu.Constructor=s,c.fn.contextmenu.noConflict=function(){return c.fn.contextmenu=t,this}}(jQuery),function(u){"use strict";var h,o,s,t,p,f,a,n,l,g,r,d,m;u(function(){var i,e;h=0,t=u("#bjui-navtab"),p=t.find(".navtab-tab"),f=t.find(".navtab-panel"),a=t.find(".tabsLeft"),n=t.find(".tabsRight"),l=t.find(".tabsMore"),g=t.find(".tabsMoreList"),r=p.find("li:first"),d=g.find("li:first"),a.click(function(){u(this).navtab("scrollPrev")}),n.click(function(){u(this).navtab("scrollNext")}),l.click(function(){g.show()}),u(document).on("click.bjui.navtab.switchtab",function(t){var e="I"===t.target.tagName?u(t.target).parent():u(t.target);l[0]!==e[0]&&g.hide()}),r.navtab("contextmenu",r).click(function(){u(this).navtab("switchTab","main")}).find("> a > span").html(function(t,e){return i=e.replace("#maintab#",BJUI.regional.maintab)}),e=u.extend({},b.DEFAULTS,r.data(),{id:"main",title:i}),r.data("initOptions",e).data("options",e),r.attr("data-url")&&u(document).one(BJUI.eventType.initUI,function(t){r.removeAttr("data-url").navtab("reload",e)}),setTimeout(function(){r.navtab("switchTab","main")},50),d.click(function(){u(this).hasClass("active")?g.hide():u(this).navtab("switchTab","main")}).find("> a").html(function(t,e){return e.replace("#maintab#",BJUI.regional.maintab)})});var b=function(t,e){this.$element=u(t),this.options=e,this.tools=this.TOOLS()};function c(a){var n=arguments,o=a;return this.each(function(){var t=u(this),e=u.extend({},b.DEFAULTS,"object"==typeof a&&a),i=t.data("bjui.navtab");i||t.data("bjui.navtab",i=new b(this,e)),"string"==typeof o&&u.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):(i=new b(this,e)).openTab()})}b.DEFAULTS={id:void 0,title:"New tab",url:void 0,type:"GET",data:{},loadingmask:!0,fresh:!1,autorefresh:!1,onLoad:null,beforeClose:null,onClose:null},b.prototype.TOOLS=function(){var c=this;return{getDefaults:function(){return b.DEFAULTS},getTabs:function(){return p.find("> li")},getPanels:function(){return f.find("> div")},getMoreLi:function(){return g.find("> li")},getTab:function(t){var e=this.indexTabId(t);if(0<=e)return this.getTabs().eq(e)},getPanel:function(t){var e=this.indexTabId(t);if(0<=e)return this.getPanels().eq(e)},getTabsW:function(t,e){return this.tabsW(this.getTabs().slice(t,e))},tabsW:function(t){var e=0;return t.each(function(){e+=u(this).outerWidth(!0)}),e},indexTabId:function(e){if(!e)return-1;var i=-1;return this.getTabs().each(function(t){u(this).data("initOptions").id===e&&(i=t)}),i},getLeft:function(){return p.position().left},getScrollBarW:function(){return t.width()-55},visibleStart:function(){for(var t=this.getLeft(),e=0,i=this.getTabs(),a=0;a<i.size();a++){if(0<=e+t)return a;e+=i.eq(a).outerWidth(!0)}return 0},visibleEnd:function(){for(var t=this.getLeft(),e=0,i=this.getTabs(),a=0;a<i.size();a++)if((e+=i.eq(a).outerWidth(!0))+t>this.getScrollBarW())return a;return i.size()},scrollPrev:function(){var t=this.visibleStart();0<t&&this.scrollTab(-this.getTabsW(0,t-1))},scrollNext:function(){var t=this.visibleEnd();t<this.getTabs().size()&&this.scrollTab(-this.getTabsW(0,t+1)+this.getScrollBarW())},scrollTab:function(t,e){p.animate({left:t},200,function(){c.tools.ctrlScrollBtn()})},scrollCurrent:function(){var t=this.tabsW(this.getTabs()),e=this.getScrollBarW();t<=e?this.scrollTab(0):this.getLeft()<e-t?this.scrollTab(e-t):h<this.visibleStart()?this.scrollTab(-this.getTabsW(0,h)):h>=this.visibleEnd()&&this.scrollTab(e-this.getTabs().eq(h).outerWidth(!0)-this.getTabsW(0,h))},ctrlScrollBtn:function(){var t=this.tabsW(this.getTabs());this.getScrollBarW()>t?(a.hide(),n.hide(),p.parent().removeClass("tabsPageHeaderMargin")):(a.show().removeClass("tabsLeftDisabled"),n.show().removeClass("tabsRightDisabled"),p.parent().addClass("tabsPageHeaderMargin"),0<=this.getLeft()?a.addClass("tabsLeftDisabled"):this.getLeft()<=this.getScrollBarW()-t&&n.addClass("tabsRightDisabled"))},switchTab:function(t){var e=this.getTabs().removeClass("active").eq(t).addClass("active"),i=this.getPanels(),a=i.eq(t),n=c.options.onSwitch?c.options.onSwitch.toFunc():null;e.data("reloadFlag")?(i.hide(),a.show(),c.refresh(e.data("initOptions").id)):(i.hide(),a.find(".bjui-ajax-mask").length?a.show():(a.addClass("fade").removeClass("in").show(),u.support.transition?a.one("bsTransitionEnd",function(){a.addClass("in")}).emulateTransitionEnd(10):a.removeClass("fade"))),this.getMoreLi().removeClass("active").eq(t).addClass("active"),h=t,this.scrollCurrent(),o=e,u.CurrentNavtab=s=a,n&&n.apply(c),a.trigger("bjui.navtab.switch")},closeTab:function(t,e){var i=this.getTabs().eq(t),a=this.getMoreLi().eq(t),n=this.getPanels().eq(t),o=i.data("options"),s=o.beforeClose?o.beforeClose.toFunc():null,l=o.onClose?o.onClose.toFunc():null,r=!0;if(s&&(r=s.apply(c,[n])),r){if(BJUI.ModuleFixed.destroyModules(n),i.remove(),a.remove(),n.trigger(BJUI.eventType.beforeCloseNavtab).remove(),m&&clearInterval(m),l&&l.apply(c),t<=h&&h--,e){var d=this.indexTabId(e);0<d&&(h=d)}this.scrollCurrent(),this.switchTab(h)}else c.tools.switchTab(t)},closeOtherTab:function(e){e=e||h,this.getTabs().each(function(t){0<t&&e!==t&&u(this).find("> .close").trigger("click")})},loadUrlCallback:function(t){t.find(":button.btn-close").click(function(){c.closeCurrentTab()})},reload:function(t,e){e=e||t.data("reloadFlag");var i=t.data("options");if(e){t.data("reloadFlag",!1);var a=c.tools.getPanel(i.id);t.hasClass("external")?c.openExternal(i.url,a):c.tools.reloadTab(a,i)}},reloadTab:function(e,t){var i=t.onLoad?t.onLoad.toFunc():null,a=t.autorefresh&&(isNaN(String(t.autorefresh))?15:t.autorefresh);BJUI.ModuleFixed.destroyModules(e),e.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:t.type||"GET",url:t.url,data:t.data||{},loadingmask:t.loadingmask,callback:function(t){c.tools.loadUrlCallback(e),i&&i.apply(c,[e]),m&&clearInterval(m),a&&(m=setInterval(function(){e.navtab("refresh")},1e3*a)),BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e)}})}}},b.prototype.contextmenu=function(t){var a=this;t.contextmenu({id:"navtabCM",bindings:{reload:function(t,e){a.refresh(t.data("initOptions").id)},closeCurrent:function(t,e){var i=t.data("initOptions").id;i?a.closeTab(i):a.closeCurrentTab()},closeOther:function(t,e){if(0===t.index())a.closeAllTab();else{var i=a.tools.indexTabId(t.data("initOptions").id);a.tools.closeOtherTab(0<i?i:h)}},closeAll:function(t,e){a.closeAllTab()}},ctrSub:function(t,e){var i=e.find('[rel="reload"]'),a=e.find('[rel="closeCurrent"]');0===t.index()&&(a.addClass("disabled"),t.data("url")||i.addClass("disabled"))}})},b.prototype.openTab=function(){var i=this,t=this.$element,a=this.options,e=this.tools;if(!a.url&&a.href&&(a.url=a.href),a.url){if(a.url=decodeURI(a.url).replacePlh(t.closest(".unitBox")),!a.url.isFinishedTm())return t.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Navtab Plugin: The new navtab's url is incorrect, url: "+a.url);a.url=encodeURI(a.url);var n,o,s=a.id?e.indexTabId(a.id):h;if(a.id||BJUI.ui.overwriteHomeTab||0!==s||(a.id="navtab",s=-1),0<=s){a.id||delete a.id,n=e.getTabs().eq(s),o=e.getPanels().eq(s);var l=n.data("initOptions"),r=u.extend({},l,a);(l.fresh||a.fresh||l.url!==a.url)&&i.reload(r),h=s}else{n=u('<li><a href="javascript:" title="#title#"><span>#title#</span></a><span class="close">&times;</span></li>'.replaceAll("#title#",a.title)),o=u('<div class="navtabPage unitBox"></div>');var d=u('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",a.title));n.appendTo(p),o.appendTo(f),d.appendTo(g),n.data("options",a).data("initOptions",a),a.external||a.url&&a.url.isExternalUrl()?(n.addClass("external"),this.openExternal(a.url,o)):(n.removeClass("external"),e.reloadTab(o,a)),h=e.getTabs().length-1,this.contextmenu(n),n.on("click",function(t){var e=u(t.target);if(e.hasClass("close"))i.closeTab(a.id);else{if(e.closest("li").hasClass("active"))return!1;i.switchTab(a.id)}}),d.on("click",function(){i.switchTab(a.id)})}e.switchTab(h),e.scrollCurrent()}else BJUI.debug("Navtab Plugin: Error trying to open a navtab, url is undefined!")},b.prototype.closeTab=function(t){var e=this.tools.indexTabId(t);0<e&&this.tools.closeTab(e)},b.prototype.closeCurrentTab=function(t){0<h&&this.tools.closeTab(h,t)},b.prototype.closeAllTab=function(){this.tools.getTabs().find("> .close").each(function(){u(this).trigger("click")})},b.prototype.reloadFlag=function(t){for(var e=t.split(","),i=0;i<e.length;i++){var a=this.tools.getTab(e[i].trim());a&&(this.tools.indexTabId(e[i])===h?this.tools.reload(a,!0):a.data("reloadFlag",!0))}},b.prototype.switchTab=function(t){var e=this.tools.indexTabId(t);this.tools.switchTab(e)},b.prototype.scrollPrev=function(){this.tools.scrollPrev()},b.prototype.scrollNext=function(){this.tools.scrollNext()},b.prototype.refresh=function(t){var e;(e=t?"string"==typeof t?this.tools.getTab(t):t:o)&&e.length&&(this.tools.getPanel(e.data("initOptions").id).removeData("bjui.clientPaging"),this.reload(e.data("initOptions")))},b.prototype.reload=function(t,e){var i=this,a=u.extend({},"object"==typeof t&&t),n=a.id?this.tools.getTab(a.id):this.tools.getTabs().eq(h);if(n){var o=n.data("initOptions")||{},s=u.extend({},o,a),l=function(){o.title!==s.title&&n.find("> a").attr("title",s.title).find("> span").html(s.title),e||n.data("initOptions",s),n.data("options",s),i.tools.reload(n,!0)};a.reloadWarn?this.$element.alertmsg("confirm",a.reloadWarn,{okCall:function(){l()}}):l()}},b.prototype.reloadForm=function(t,e){var i,a,n=u.extend({},"object"==typeof e&&e);if(a="string"==typeof e?(i=this.tools.getTab(e),this.tools.getPanel(e)):(i=n.id?this.tools.getTab(n.id):this.tools.getTabs().eq(h),n.id?this.tools.getPanel(n.id):this.tools.getPanels().eq(h)),i&&a){if(!i.hasClass("external")){var o=a.find("#pagerForm"),s={},l={};if(o.attr("action")&&(n.url=o.attr("action")),o&&o.length){if(l=o.serializeJson(),e&&e.type||(n.type=o.attr("method")||"POST"),t){var r=BJUI.pageInfo;for(var d in l[r.orderDirection]=l[r.orderField]="",a.data("bjui.clientPaging")&&(a.data("bjui.clientPaging").orderDirection=a.data("bjui.clientPaging").orderField=""),r)r.hasOwnProperty(d)&&(s[r[d]]=l[r[d]])}else s=l;n.data=u.extend({},n.data||{},s)}}this.reload(n,!0)}},b.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(h)},b.prototype.checkTimeout=function(){var t=JSON.parse(s.html());t&&t[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&this.closeCurrentTab()},b.prototype.openExternal=function(t,e){var i=e.closest(".navtab-panel").height();e.html(FRAG.externalFrag.replaceAll("{url}",t).replaceAll("{height}",i+"px"))};var e=u.fn.navtab;u.fn.navtab=c,u.fn.navtab.Constructor=b,u.fn.navtab.noConflict=function(){return u.fn.navtab=e,this},u(document).on("click.bjui.navtab.data-api",'[data-toggle="navtab"]',function(t){var e=u(this),i=e.attr("href"),a=e.data(),n=a.options;n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&u.extend(a,n)),a.title||(a.title=e.text()),i&&!a.url&&(a.url=i),c.call(e,a),t.preventDefault()})}(jQuery),function(d){"use strict";var l,r,c;d(function(){r="dialogShadow",c=u.ZINDEX,d("body").append("\x3c!-- dialog resizable --\x3e").append(FRAG.resizable)});var u=function(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()};function o(a){var n=arguments,o=a;return this.each(function(){var t=d(this),e=d.extend({},u.DEFAULTS,BJUI.dialog,"object"==typeof a&&a),i=t.data("bjui.dialog");i||t.data("bjui.dialog",i=new u(this,e)),"string"==typeof o&&d.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):(i=new u(this,e)).open()})}u.DEFAULTS={id:"dialog",title:"New Dialog",url:void 0,type:"GET",data:{},loadingmask:!0,width:500,height:300,minW:65,minH:40,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!1,onLoad:null,beforeClose:null,onClose:null},u.ZINDEX=30,u.prototype.TOOLS=function(){var s=this;return{getDefaults:function(){return d.extend(u.DEFAULTS,BJUI.dialog)},init:function(t){var e=s.options.width>s.options.minW?s.options.width:s.options.minW,i=s.options.height>s.options.minH?s.options.height:s.options.minH,a=d(window).width(),n=d(window).height(),o=s.options.max?0:(n-i)/2;a<e&&(e=a),n<i&&(i=n),t.height(i).width(e).show().css({left:(a-e)/2,top:0,opacity:.1}).animate({top:0<o?o:0,opacity:1}).addClass(r).find("> .dialogContent").height(i-d("> .dialogHeader",t).outerHeight()-6),d("body").find("> .bjui-dialog-container").not(t).removeClass(r)},reload:function(e,t){var i,a=e.find("> .dialogContent");if(t=t||e.data("initOptions"),i=t.onLoad?t.onLoad.toFunc():null,e.trigger(BJUI.eventType.beforeLoadDialog),BJUI.ModuleFixed.destroyModules(e),t.url)a.ajaxUrl({type:t.type||"GET",url:t.url,data:t.data||{},loadingmask:t.loadingmask,callback:function(t){i&&i.apply(s,[e]),BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e)}});else if(t.target){var n=d(t.target).html()||e.data("bjui.dialog.target");d(t.target).empty(),e.data("bjui.dialog.target",n),a.trigger(BJUI.eventType.beforeAjaxLoad).html(n).initui(),i&&i.apply(s,[e])}},resizeContent:function(t,e,i){t.find("> .dialogContent").css({width:e-12,height:i-t.find("> .dialogHeader").outerHeight()-6}).resizePageH(),d(window).trigger(BJUI.eventType.resizeGrid)}}},u.prototype.open=function(){var i=this,a=i.options,t=d("body"),n=t.data(a.id);if(a.target&&d(a.target).length)a.url=void 0;else{if(!a.url&&a.href&&(a.url=a.href),!a.url)return void BJUI.debug("Dialog Plugin: Error trying to open a dialog, url is undefined!");if(a.url=decodeURI(a.url).replacePlh(i.$element.closest(".unitBox")),!a.url.isFinishedTm())return i.$element.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Dialog Plugin: The new dialog's url is incorrect, url: "+a.url);a.url=encodeURI(a.url)}if(n){var e=n.data("initOptions")||a;this.switchDialog(n),n.is(":hidden")&&n.show(),(e.fresh||a.fresh||!e.url||e.url!==a.url)&&(i.reload(a),n.data("initOptions",a))}else{var o=BJUI.regional.dialog,s=FRAG.dialog.replace("#close#",o.close).replace("#maximize#",o.maximize).replace("#restore#",o.restore).replace("#minimize#",o.minimize).replace("#title#",o.title);(n=d(s).data("options",a).data("initOptions",a).css("zIndex",c+=1).hide().appendTo(t)).find("> .dialogHeader > h1 > span.title").html(a.title),this.tools.init(n),a.maxable?n.find("a.maximize").show():n.find("a.maximize").hide(),a.minable?n.find("a.minimize").show():n.find("a.minimize").hide(),a.max&&i.maxsize(n),a.mask?this.addMask(n):a.minable&&d.fn.taskbar&&this.$element.taskbar({id:a.id,title:a.title}),n.on("click",function(t){d(t.target).data("bjui.dialog")||l&&l[0]!==n[0]&&i.switchDialog(n)}).on("click",".btn-close",function(t){i.close(n),t.preventDefault()}).on("click",".dialogHeader > a",function(t){var e=d(this);e.hasClass("close")&&i.close(n),e.hasClass("minimize")&&i.minimize(n),e.hasClass("maximize")&&(i.switchDialog(n),i.maxsize(n)),e.hasClass("restore")&&i.restore(n),t.preventDefault(),t.stopPropagation()}).on("dblclick",".dialogHeader > h1",function(t){a.maxable&&(n.find("> .dialogHeader > a.restore").is(":hidden")?n.find("a.maximize").trigger("click"):n.find("> .dialogHeader > a.restore").trigger("click"))}).on("mousedown.bjui.dialog.drag",".dialogHeader > h1",function(t){i.switchDialog(n),a.drawable&&!n.data("max")&&(n.data("bjui.dialog.task",!0),setTimeout(d.proxy(function(){n.data("bjui.dialog.task")&&i.drag(t,n)},i),150),t.preventDefault())}).on("mouseup.bjui.dialog.drag",".dialogHeader > h1",function(t){n.data("bjui.dialog.task",!1)}).on("mousedown.bjui.dialog.resize",'div[class^="resizable"]',function(t){if(a.drawable&&!n.data("max")){var e=d(this);i.switchDialog(n),i.resizeInit(t,d("#bjui-resizable"),n,e),e.show(),t.preventDefault()}}).on("mouseup.bjui.dialog.resize",'div[class^="resizable"]',function(t){t.preventDefault()}),t.data(a.id,n),this.tools.reload(n,a)}d.CurrentDialog=l=n},u.prototype.addMask=function(t){var e=t.data("bjui.dialog.mask");t.wrap('<div style="z-index:'+c+'" class="bjui-dialog-wrap"></div>'),t.find("> .dialogHeader > a.minimize").hide(),e&&e.length||((e=d(FRAG.dialogMask)).css("zIndex",1).show().insertBefore(t),t.data("bjui.dialog.mask",e))},u.prototype.refresh=function(t){if(t&&"string"==typeof t)for(var e=t.split(","),i=0;i<e.length;i++){var a=d("body").data(e[i].trim());a&&(a.removeData("bjui.clientPaging"),this.tools.reload(a))}else l.removeData("bjui.clientPaging"),this.tools.reload(l)},u.prototype.reload=function(t,e){var i=this,a=d.extend({},"object"==typeof t&&t),n=a.id&&d("body").data(a.id)||i.getCurrent();if(n&&n.length){var o=n.data("initOptions"),s=d.extend({},o,a),l=function(){var t=n.find("> .dialogContent");o.width!==s.width&&(s.max?(n.width(s.width),t.width(s.width)):n.animate({width:s.width},"normal",function(){t.width(s.width)})),o.height!==s.height&&(s.max?(n.height(s.height),t.height(s.height-n.find("> .dialogHeader").outerHeight()-6)):n.animate({height:s.height},"normal",function(){t.height(s.height-n.find("> .dialogHeader").outerHeight()-6).resizePageH()})),o.maxable!==s.maxable&&(s.maxable?n.find("a.maximize").show():n.find("a.maximize").hide()),o.minable!==s.minable&&(s.minable?n.find("a.minimize").show():n.find("a.minimize").hide()),o.max!==s.max&&s.max&&setTimeout(i.maxsize(n),10),o.mask!==s.mask&&(s.mask?(i.addMask(n),d.fn.taskbar&&i.$element.taskbar("closeDialog",s.id)):s.minable&&d.fn.taskbar&&i.$element.taskbar({id:s.id,title:s.title})),o.title!==s.title&&(n.find("> .dialogHeader > h1 > span.title").html(s.title),n.taskbar("changeTitle",s.id,s.title)),n.data("options",s),e||n.data("initOptions",s),i.tools.reload(n,s)};s.reloadWarn?n.alertmsg("confirm",s.reloadWarn,{okCall:function(){l()}}):l()}},u.prototype.reloadForm=function(t,e){var i,a;if("string"==typeof e?a=(i=d("body").data(e)).data("options"):"object"==typeof e&&(i=e.id&&d("body").data(e.id)||this.getCurrent()),i){"object"==typeof e&&(e.title&&i.find("> .dialogHeader > h1 > span.title").html(e.title),a=d.extend({},e,i.data("options")));var n=i.find("#pagerForm"),o={},s={};if(n.attr("action")&&(a.url=n.attr("action")),n&&n.length){if(s=n.serializeJson(),e&&e.type||(a.type=n.attr("method")||"POST"),t){var l=BJUI.pageInfo;for(var r in l)l.hasOwnProperty(r)&&(o[l[r]]=s[l[r]])}else o=s;a.data=d.extend({},a.data||{},o)}this.reload(a,!0)}},u.prototype.getCurrent=function(){return l},u.prototype.switchDialog=function(t){var e=t.css("zIndex");if(l&&l!==t){var i=l.css("zIndex");l.css("zIndex",e),t.css("zIndex",i),d.CurrentDialog=l=t,d.fn.taskbar&&this.$element.taskbar("switchTask",t.data("options").id)}t.addClass(r),d("body").find("> .bjui-dialog-container").not(t).removeClass(r)},u.prototype.close=function(t){var a=this,n="string"==typeof t?d("body").data(t):t,e=n.data("bjui.dialog.mask"),o=n.data("options"),i=n.data("bjui.dialog.target"),s=o.beforeClose?o.beforeClose.toFunc():null,l=o.onClose?o.onClose.toFunc():null,r=!0;n&&o&&(s&&(r=s.apply(a,[n])),r?(BJUI.ModuleFixed.destroyModules(n),o.target&&i&&d(o.target).html(i),e&&e.length?(e.remove(),n.unwrap()):d.fn.taskbar&&this.$element.taskbar("closeDialog",o.id),n.animate({top:-n.outerHeight(),opacity:.1},"normal",function(){var t=d("body");t.removeData(o.id),n.trigger(BJUI.eventType.beforeCloseDialog).remove(),l&&l.apply(a);var e=t.find(".bjui-dialog-container"),i=null;e.length?i=a.$element.getMaxIndexObj(e):c=u.ZINDEX,i&&i.is(":visible")&&a.switchDialog(i)})):a.switchDialog(n))},u.prototype.closeCurrent=function(){this.close(l)},u.prototype.checkTimeout=function(){var t=l.find("> .dialogContent"),e=JSON.parse(t.html());e&&e[BJUI.keys.statusCode]===BJUI.statusCode.timeout&&this.closeCurrent()},u.prototype.maxsize=function(t){t.data("original",{top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height")}).data("max",!0),t.find("> .dialogHeader > a.maximize").hide(),t.find("> .dialogHeader > a.restore").show();var e=d(window).width(),i=d(window).height()-d("#bjui-taskbar").height()-1;t.css({top:0,left:0,width:e,height:i}),this.tools.resizeContent(t,e,i)},u.prototype.restore=function(t){var e=t.data("original"),i=parseInt(e.width),a=parseInt(e.height);t.css({top:e.top,left:e.left,width:i,height:a}),this.tools.resizeContent(t,i,a),t.find("> .dialogHeader > a.maximize").show(),t.find("> .dialogHeader > a.restore").hide(),t.data("max",!1)},u.prototype.minimize=function(t){t.hide(),d.fn.taskbar&&this.$element.taskbar("minimize",t)},u.prototype.drag=function(t,e){e.find("> .dialogContent").css("opacity",".3"),e.basedrag({selector:"> .dialogHeader",stop:function(){e.css({left:e.css("left"),top:e.css("top")}).find("> .dialogContent").css("opacity",1)},event:t,nounbind:!0})},u.prototype.resizeDialog=function(t,e,i){var a=parseInt(t.css("left")),n=parseInt(t.css("top")),o=parseInt(t.css("height")),s=parseInt(t.css("width"));(n<0&&(n=0),e.css({top:n,left:a,width:s+2,height:o+1}).find("> .dialogContent").css("width",s-10),"w"!==i&&"e"!==i)&&e.find("> .dialogContent").css({height:o-e.find("> .dialogHeader").outerHeight()-6}).resizePageH();d(window).trigger(BJUI.eventType.resizeGrid)},u.prototype.resizeInit=function(t,e,i,a){var n=a.attr("tar");d("body").css("cursor",n+"-resize"),e.css({top:i.css("top"),left:i.css("left"),height:i.outerHeight(),width:i.css("width")}).show(),this.options.dragCurrent||(this.options.dragCurrent={$resizable:e,$dialog:i,target:n,oleft:parseInt(e.css("left"))||0,owidth:parseInt(e.css("width"))||0,otop:parseInt(e.css("top"))||0,oheight:parseInt(e.css("height"))||0,ox:t.pageX||t.screenX,oy:t.pageY||t.clientY},d(document).on("mouseup.bjui.dialog.resize",d.proxy(this.resizeStop,this)),d(document).on("mousemove.bjui.dialog.resize",d.proxy(this.resizeStart,this)))},u.prototype.resizeStart=function(t){var e=this.options.dragCurrent;if(e){t||(t=window.event);var i=(t.pageX||t.screenX)-e.ox,a=(t.pageY||t.clientY)-e.oy,n=e.$dialog.data("bjui.dialog.mask");if(n&&n.length||!((t.pageY||t.clientY)<=0||(t.pageY||t.clientY)>=d(window).height()-e.$dialog.find("> .dialogHeader").outerHeight())){var o=e.target,s=e.owidth,l=e.oheight;"n"!==o&&"s"!==o&&(s+=0<=o.indexOf("w")?-i:i),s>=this.options.minW&&(0<=o.indexOf("w")&&e.$resizable.css("left",e.oleft+i),"n"!==o&&"s"!==o&&e.$resizable.css("width",s)),"w"!==o&&"e"!==o&&(l+=0<=o.indexOf("n")?-a:a),l>=this.options.minH&&(0<=o.indexOf("n")&&e.$resizable.css("top",e.otop+a),"w"!==o&&"e"!==o&&e.$resizable.css("height",l))}}},u.prototype.resizeStop=function(t){var e=this.options.dragCurrent;if(!e)return!1;d(document).off("mouseup.bjui.dialog.resize"),d(document).off("mousemove.bjui.dialog.resize"),this.options.dragCurrent=null,this.resizeDialog(e.$resizable,e.$dialog,e.target),d("body").css("cursor",""),e.$resizable.hide()};var t=d.fn.dialog;d.fn.dialog=o,d.fn.dialog.Constructor=u,d.fn.dialog.noConflict=function(){return d.fn.dialog=t,this},d(document).on("click.bjui.dialog.data-api",'[data-toggle="dialog"]',function(t){var e=d(this),i=e.attr("href"),a=e.data(),n=a.options;n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&d.extend(a,n)),a.title||(a.title=e.text()),i&&!a.url&&(a.url=i),o.call(e,a),t.preventDefault()})}(jQuery),function(s){"use strict";var n,t,e,o,i,a,l,r,d;s(function(){n=s("#bjui-resizable"),t=s(FRAG.taskbar),e=t.find(".taskbarContent"),o=e.find("> ul"),i=t.find(".taskbarLeft"),a=t.find(".taskbarRight"),l="disabled",r="selected",d="taskbarMargin",s("body").append("\x3c!-- dialog task bar --\x3e").append(t),i.click(function(t){s(this).taskbar("scrollLeft")}),a.click(function(t){s(this).taskbar("scrollRight")})});var c=function(t,e){this.$element=s(t),this.$task=null,this.options=e,this.tools=this.TOOLS()};c.DEFAULTS={id:void 0,title:void 0},c.prototype.init=function(){var i=this,a=o.find("#"+this.options.id);if(this.show(),a.length)a.find("> div > span.title").html(this.options.title);else{(a=s('<li id="#taskid#"><div class="taskbutton"><span><i class="fa fa-th-large"></i></span> <span class="title">#title#</span></div><div class="close"><i class="fa fa-times-circle"></i></div></li>'.replace("#taskid#",this.options.id).replace("#title#",this.options.title))).appendTo(o)}this.contextmenu(a),this.switchTask(a),this.tools.scrollTask(a),a.click(function(t){if(s(t.target).closest("div").hasClass("close")||s(t.target).hasClass("close"))a.dialog("close",i.options.id);else{var e=s("body").data(i.options.id);a.hasClass("selected")?e.find(".dialogHeader a.minimize").trigger("click"):e.is(":hidden")?i.restoreDialog(e):(e.trigger("click"),a.addClass(r)),i.scrollCurrent(a)}return!1})},c.prototype.TOOLS=function(){return{scrollCurrent:function(){if(this.tasksW(this.getTasks())>this.getTaskBarW()){var t=this,e=o.find("> li:last-child"),i=this.getTaskBarW()-e.position().left-e.outerWidth(!0);o.animate({left:i},200,function(){t.ctrlScrollBtn()})}else this.ctrlScrollBtn()},getTaskBarW:function(){return e.width()-(i.is(":hidden")?i.width()+2:0)-(a.is(":hidden")?a.width()+2:0)},scrollTask:function(t){var e,i=this;t.position().left+this.getLeft()+t.outerWidth()>this.getBarWidth()?(e=this.getTaskBarW()-t.position().left-t.outerWidth(!0)-2,o.animate({left:e},200,function(){i.ctrlScrollBtn()})):t.position().left+this.getLeft()<0&&(e=this.getLeft()-(t.position().left+this.getLeft()),o.animate({left:e},200,function(){i.ctrlScrollBtn()}))},ctrlScrollBtn:function(){var t=this.tasksW(this.getTasks());this.getTaskBarW()>t?(e.removeClass(d),a.hide(),i.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(e.addClass(d),a.show().removeClass(l),i.show().removeClass(l),0<=this.getLeft()&&i.addClass(l),this.getLeft()<=this.getTaskBarW()-t&&a.addClass(l))},getLeft:function(){return o.position().left},visibleStart:function(){for(var t=this.getLeft(),e=this.getTasks(),i=0;i<e.size();i++)if(0<=e.eq(i).position().left+e.eq(i).outerWidth(!0)+t)return e.eq(i);return e.eq(0)},visibleEnd:function(){for(var t=this.getLeft(),e=this.getTasks(),i=0;i<e.size();i++)if(e.eq(i).position().left+e.eq(i).outerWidth(!0)+t>this.getBarWidth())return e.eq(i);return e.eq(e.size()-1)},getTasks:function(){return o.find("> li")},tasksW:function(t){var e=0;return t.each(function(){e+=s(this).outerWidth(!0)}),e},getBarWidth:function(){return t.innerWidth()},getCurrent:function(){return o.find("li."+r)}}},c.prototype.contextmenu=function(t){var n=this;t.contextmenu({id:"dialogCM",bindings:{reload:function(t){t.dialog("refresh",n.options.id)},closeCurrent:function(t,e){(t.isTag("li")?t:n.tools.getCurrent()).find(".close").trigger("click")},closeOther:function(t,e){o.find("> li").not(t).each(function(t){s(this).find(".close").trigger("click")})},closeAll:function(t,e){n.tools.getTasks().each(function(t){s(this).find(".close").trigger("click")})}},ctrSub:function(t,e){var i=e.find('[rel="closeCurrent"]'),a=e.find('[rel="closeOther"]');n.tools.getCurrent().length?1===n.tools.getTasks().size()&&a.addClass(l):(i.addClass(l),a.addClass(l))}})},c.prototype.closeDialog=function(t){var e="string"==typeof t?this.getTask(t):t;e&&e.length&&(e.remove(),0===this.tools.getTasks().size()&&this.hide(),this.tools.scrollCurrent(),this.$element.removeData("bjui.taskbar"))},c.prototype.minimize=function(t){var e=this,i="string"==typeof t?s("body").data("dialog"):t,a=this.getTask(i.data("options").id);n.css({top:i.css("top"),left:i.css("left"),height:i.css("height"),width:i.css("width")}).show().animate({top:s(window).height()-60,left:a.position().left,width:a.outerWidth(),height:a.outerHeight()},250,function(){s(this).hide(),e.inactive(a)})},c.prototype.restoreDialog=function(t){var e=this.getTask(t.data("options").id);n.css({top:s(window).height()-60,left:e.position().left,height:e.outerHeight(),width:e.outerWidth()}).show().animate({top:t.css("top"),left:t.css("left"),width:t.css("width"),height:t.css("height")},250,function(){s(this).hide(),t.show()}),this.switchTask(e)},c.prototype.inactive=function(t){("string"==typeof t?this.getTask(t):t).removeClass(r)},c.prototype.scrollLeft=function(){var t=this.tools.visibleStart();this.tools.scrollTask(t)},c.prototype.scrollRight=function(){var t=this.tools.visibleEnd();this.tools.scrollTask(t)},c.prototype.scrollCurrent=function(t){this.tools.scrollTask(t)},c.prototype.switchTask=function(t){this.tools.getCurrent().removeClass(r),("string"==typeof t?this.getTask(t):t).addClass(r)},c.prototype.getTask=function(t){return o.find("#"+t)},c.prototype.changeTitle=function(t,e){var i=this.getTask(t);i&&e&&i.find(".title").html(e)},c.prototype.show=function(){t.is(":hidden")&&t.show().animate({bottom:0},500)},c.prototype.hide=function(){t.is(":visible")&&t.animate({bottom:-50},500,function(){t.hide()})};var u=s.fn.taskbar;s.fn.taskbar=function(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},c.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.taskbar");i?i.options.id!==e.id&&t.data("bjui.taskbar",i=new c(this,e)):t.data("bjui.taskbar",i=new c(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})},s.fn.taskbar.Constructor=c,s.fn.taskbar.noConflict=function(){return s.fn.taskbar=u,this}}(jQuery),function(d){"use strict";var n,c=function(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()};function o(a){var n=arguments,o=a;return this.each(function(){var t=d(this),e=d.extend({},c.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.bjuiajax");i||t.data("bjui.bjuiajax",i=new c(this,e)),"string"==typeof o&&d.isFunction(i[o])&&([].shift.apply(n),n?i[o].apply(i,n):i[o]())})}c.DEFAULTS={reload:!0,loadingmask:!0},c.NAVTAB="navtab",c.prototype.TOOLS=function(){var t=this;return{getPagerForm:function(t,e){var i=t.isTag("form")?t[0]:t.find("#pagerForm:first")[0],a=d.extend({},BJUI.pageInfo);if(t.data("bjui.clientPaging")&&(e=d.extend({},t.data("bjui.clientPaging"),e),t.data("bjui.clientPaging",e)),i)for(var n in a)if(a.hasOwnProperty(n)){var o="";e&&e[n]&&(o=e[n]),i[a[n]]?o&&(i[a[n]].value=o):d('<input type="hidden" name="'+a[n]+'" value="'+o+'">').appendTo(d(i))}return i},getTarget:function(){return t.$element.closest(".navtab-panel").length?c.NAVTAB:"dialog"}}},c.prototype.ajaxForm=function(e){var a=this,n=this.$element,o=e&&e.callback,i=n.attr("enctype");e=d.extend({},a.options,"object"==typeof e&&e),o&&(o=o.toFunc());var s=function(t,e,i){o?o.apply(a,[t,n]):d.proxy(a.ajaxCallback(t),a)},t=function(){var t={loadingmask:e.loadingmask,type:n.attr("method"),url:n.attr("action"),callback:s,error:d.proxy(a.ajaxError,a)};i&&"multipart/form-data"===i?window.FormData?d.extend(t,{data:new FormData(n[0]),contentType:!1,processData:!1}):d.extend(t,{data:n.serializeArray(),files:n.find(":file"),iframe:!0,processData:!1}):d.extend(t,{data:n.serializeArray()}),n.doAjax(t)};e.confirmMsg?n.alertmsg("confirm",e.confirmMsg,{okCall:t}):t()},c.prototype.ajaxDone=function(t){var e=this.$element;t[BJUI.keys.statusCode]===BJUI.statusCode.error?t[BJUI.keys.message]&&e.alertmsg("error",t[BJUI.keys.message]):t[BJUI.keys.statusCode]===BJUI.statusCode.timeout?(e.alertmsg("info",t[BJUI.keys.message]||FRAG.sessionTimout),BJUI.loadLogin()):t[BJUI.keys.message]&&e.alertmsg("correct",t[BJUI.keys.message])},c.prototype.ajaxError=function(t,e,i){BJUI.removeProgress();var a=t.responseText.trim();a.startsWith("{")?this.ajaxDone(a.toObj()):this.$element.alertmsg("error","<div>Http status: "+t.status+" "+t.statusText+"</div><div>ajaxOptions: "+e+" </div><div>thrownError: "+i+" </div><div>"+a+"</div>")},c.prototype.ajaxCallback=function(t){var e=this,i=e.$element.closest(".bjui-layout");e.ajaxDone(t),t[BJUI.keys.statusCode]===BJUI.statusCode.ok&&(i&&i.length?e.divCallback(t,i):e.tools.getTarget()===c.NAVTAB?e.navtabCallback(t):e.dialogCallback(t))},c.prototype.divCallback=function(t,e){var i=this;if(t.tabid&&setTimeout(function(){i.$element.navtab("reloadFlag",t.tabid)},100),t.dialogid&&setTimeout(function(){i.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){i.$element.bjuiajax("refreshDiv",t.divid)},100),i.options.reload){var a=i.tools.getPagerForm(e),n=null,o=null;o=a?(n=a.attr("action"),a.attr("method")||"GET"):(n=e.data("url"),e.data("type")||"GET"),n&&e.ajaxUrl({url:n,type:o})}if(i.options.reloadNavtab&&setTimeout(function(){i.$element.navtab("refresh")},100),t.forward){var s=function(){e.ajaxUrl({url:t.forward})};t.forwardConfirm?i.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){s()}}):s()}},c.prototype.navtabCallback=function(t){var e=this;if(t.tabid&&setTimeout(function(){e.$element.navtab("reloadFlag",t.tabid)},100),t.dialogid&&setTimeout(function(){e.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){e.$element.bjuiajax("refreshDiv",t.divid)},100),t.datagrid&&setTimeout(function(){d.each(t.datagrid.join(","),function(t,e){d("#"+e.trim()).datagrid("refresh")})},100),t.closeCurrent&&!t.forward?e.$element.navtab("closeCurrentTab"):e.options.reload&&setTimeout(function(){e.$element.navtab("refresh")},100),t.forward){var i=function(){e.$element.navtab("reload",{url:t.forward})};t.forwardConfirm?e.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){i()},cancelCall:function(){t.closeCurrent&&e.$element.navtab("closeCurrentTab")}}):i()}},c.prototype.dialogCallback=function(t){var e=this;if(t.tabid||t.statusCode!==BJUI.statusCode.ok?t.tabid&&"false"!==t.tabid&&setTimeout(function(){e.$element.navtab("reloadFlag",t.tabid)},100):setTimeout(function(){e.$element.navtab("refresh")},100),t.dialogid&&setTimeout(function(){e.$element.dialog("refresh",t.dialogid)},100),t.divid&&setTimeout(function(){e.$element.bjuiajax("refreshDiv",t.divid)},100),t.closeCurrent&&!t.forward?e.$element.dialog("closeCurrent"):e.options.reload&&setTimeout(function(){e.$element.dialog("refresh")},100),e.options.reloadNavtab&&setTimeout(function(){e.$element.navtab("refresh")},100),t.forward){var i=function(){e.$element.dialog("reload",{url:t.forward})};t.forwardConfirm?e.$element.alertmsg("confirm",t.forwardConfirm,{okCall:function(){i()}}):i()}},c.prototype.pageCallback=function(t,e){var i=this,a=d.extend({},c.DEFAULTS,t),n=e||null,o=null;n&&n.length?(o=i.tools.getPagerForm(n,a))&&(d.extend(a,d(o).data()),i.reloadDiv(n,{type:d(o).attr("method")||"POST",url:d(o).attr("action"),data:d(o).serializeArray(),loadingmask:a.loadingmask})):i.tools.getTarget()===c.NAVTAB?(n=d.CurrentNavtab,(o=i.tools.getPagerForm(n,a))&&d.extend(a,d(o).data()),i.$element.navtab("reloadForm",!1,a)):(n=d.CurrentDialog,(o=i.tools.getPagerForm(n,a))&&d.extend(a,d(o).data()),i.$element.dialog("reloadForm",!1,a))},c.prototype.doSearch=function(n){var o=this,s=o.$element,l={pageCurrent:1},r=s.closest(".bjui-layout"),t=n.isValid;if((n=d.extend({},c.DEFAULTS,"object"==typeof n&&n)).url||(n.url=s.attr("action")),n.url){if(n.url=decodeURI(n.url).replacePlh(s.closest(".unitBox")),!n.url.isFinishedTm())return s.alertmsg("error",n.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The submit form action is incorrect: "+n.url);n.url=encodeURI(n.url);var e=function(){if(r&&r.length){o.tools.getPagerForm(r,l);var t=s.serializeJson(),e={};if(n.clearQuery){var i=BJUI.pageInfo;for(var a in i)i.hasOwnProperty(a)&&(e[i[a]]=t[i[a]]);t=e}o.reloadDiv(r,{type:s.attr("method")||"POST",url:n.url,data:t,loadingmask:n.loadingmask})}else o.tools.getTarget()===c.NAVTAB?(r=d.CurrentNavtab,o.tools.getPagerForm(r,l),s.navtab("reloadForm",n.clearQuery,n)):(r=d.CurrentDialog,o.tools.getPagerForm(r,l),s.dialog("reloadForm",n.clearQuery,n))};t?e():d.validator?s.isValid(function(t){t&&e()}):e()}else BJUI.debug("Error trying to submit form action: action url is undefined!")},c.prototype.doLoad=function(t){var e=this.$element,i=t.target?d(t.target):null;if((t=d.extend({},c.DEFAULTS,"object"==typeof t&&t)).url){if(t.url=decodeURI(t.url).replacePlh(e.closest(".unitBox")),!t.url.isFinishedTm())return e.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax link incorrect: "+t.url);t.url=encodeURI(t.url),i&&i.length?i&&i.length&&(i.removeData("bjui.clientPaging"),this.reloadDiv(i,t)):BJUI.debug("Not set loaded 'ajax' content container, like [data-target].")}else BJUI.debug("Error trying to open a ajax link: The url is undefined!")},c.prototype.refreshLayout=function(t){var e=t.target?d(t.target):null;if(t=d.extend({},c.DEFAULTS,"object"==typeof t&&t),!e||!e.length)return n&&clearInterval(n),void BJUI.debug("Not set loaded 'ajax' content container, like [data-target].");e&&e.length&&(e.removeData("bjui.clientPaging"),this.reloadDiv(e,d.extend({},e.data("options")||{},t)))},c.prototype.reloadDiv=function(e,i){var a=i.autorefresh&&(isNaN(String(i.autorefresh))?15:i.autorefresh);e.addClass("bjui-layout").data("options",i).ajaxUrl({type:i.type,url:i.url,data:i.data,loadingmask:i.loadingmask,callback:function(t){BJUI.ui.clientPaging&&e.data("bjui.clientPaging")&&e.pagination("setPagingAndOrderby",e),i.callback&&i.callback.apply(this,[e]),n&&clearInterval(n),a&&(n=setInterval(function(){e.bjuiajax("refreshLayout",i)},1e3*a))}})},c.prototype.refreshDiv=function(t){if(t&&"string"==typeof t)for(var e=t.split(","),i=0;i<e.length;i++)this.refreshLayout({target:"#"+e[i]})},c.prototype.doAjax=function(t){var e=this,i=e.$element;if((t=d.extend({},c.DEFAULTS,"object"==typeof t&&t)).url){if(t.url=decodeURI(t.url).replacePlh(i.closest(".unitBox")),!t.url.isFinishedTm())return i.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+t.url);t.url=encodeURI(t.url);var a=t.callback&&t.callback.toFunc(),n=function(){i.doAjax({type:t.type,url:t.url,data:t.data,callback:a||d.proxy(function(t){e.ajaxCallback(t)},e)})};t.confirmMsg?i.alertmsg("confirm",t.confirmMsg,{okCall:function(){n()}}):n()}else BJUI.debug("Error trying to open a ajax link: url is undefined!")},c.prototype.doExport=function(t){var e,i=this,a=i.$element,n=t.target?d(t.target):null;if(t.url){if(t.url=decodeURI(t.url).replacePlh(a.closest(".unitBox")),!t.url.isFinishedTm())return a.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+t.url);var o=function(){n&&n.length||(n=i.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog),(e=i.tools.getPagerForm(n))&&(t.url=encodeURI(t.url+(-1===t.url.indexOf("?")?"?":"&")+d(e).serialize())),d.fileDownload(t.url,{failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),i.ajaxDone(t)}})};t.confirmMsg?a.alertmsg("confirm",t.confirmMsg,{okCall:function(){o()}}):o()}else BJUI.debug("Error trying to open a ajax link: url is undefined!")},c.prototype.doExportChecked=function(i){var a=this,t=a.$element,n=i.target?d(i.target):null;if(i.url){if(i.url=decodeURI(i.url).replacePlh(t.closest(".unitBox")),!i.url.isFinishedTm())return t.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+i.url);var e=function(){if(i.group){n&&n.length||(n=a.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog);var t=[],e=n.find(":checkbox[name="+i.group+"]:checked");0!==e.length?(e.each(function(){t.push(d(this).val())}),i.url=i.url.setUrlParam(i.idname?i.idname:"ids",t.join(",")),d.fileDownload(i.url,{failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),a.ajaxDone(t)}})):a.$element.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked))}else a.$element.alertmsg("error",i.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))};i.confirmMsg?t.alertmsg("confirm",i.confirmMsg,{okCall:function(){e()}}):e()}else BJUI.debug("Error trying to open a export link: url is undefined!")},c.prototype.doAjaxChecked=function(a){var n=this,o=n.$element,s=a.target?d(a.target):null;if((a=d.extend({},c.DEFAULTS,"object"==typeof a&&a)).url){if(a.url=decodeURI(a.url).replacePlh(o.closest(".unitBox")),!a.url.isFinishedTm())return o.alertmsg("error",a.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("The ajax url is incorrect: "+a.url);var t=function(){if(a.group){s&&s.length||(s=n.tools.getTarget()===c.NAVTAB?d.CurrentNavtab:d.CurrentDialog);var t=[],e=s.find(":checkbox[name="+a.group+"]:checked"),i=a.callback&&a.callback.toFunc();0!==e.length?(e.each(function(){t.push(d(this).val())}),a.url=a.url.setUrlParam(a.idname?a.idname:"ids",t.join(",")),o.doAjax({type:a.type,url:a.url,data:a.data,callback:i||d.proxy(function(t){n.ajaxCallback(t)},n)})):o.alertmsg("error",FRAG.alertNotChecked.replace("#notchecked#",BJUI.regional.notchecked))}else o.alertmsg("error",a.warn||FRAG.alertNoCheckGroup.replace("#nocheckgroup#",BJUI.regional.nocheckgroup))};a.confirmMsg?o.alertmsg("confirm",a.confirmMsg,{okCall:function(){t()}}):t()}else BJUI.debug("Error trying to open a del link: url is undefined!")};var t=d.fn.bjuiajax;d.fn.bjuiajax=o,d.fn.bjuiajax.Constructor=c,d.fn.bjuiajax.noConflict=function(){return d.fn.bjuiajax=t,this},d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxform"]',function(t){var e=d(this),i=e.data();o.call(e,"ajaxForm",i),t.preventDefault()}),d(function(){d.validator?d(document).on(BJUI.eventType.initUI,function(t){d(t.target).find('form[data-toggle="ajaxsearch"]').each(function(){var e=d(this),i=e.data();i.isValid=!0,e.validator({valid:function(t){o.call(e,"doSearch",i)}})})}):d(document).on("submit.bjui.bjuiajax.data-api",'form[data-toggle="ajaxsearch"]',function(t){var e=d(this),i=e.data();o.call(e,"doSearch",i),t.preventDefault()})}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="reloadsearch"]',function(t){var e,i=d(this),a=i.closest("form");a&&a.length&&((e=a.data()).clearQuery=i.data("clearQuery")||!0,o.call(a,"doSearch",e),t.preventDefault())}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="ajaxload"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),o.call(e,"doLoad",i),t.preventDefault()}),d(document).on(BJUI.eventType.initUI,function(t){d(t.target).find('[data-toggle="autoajaxload"]').each(function(){var t=d(this),e=t.data();e.target=this,o.call(t,"doLoad",e)})}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="refreshlayout"]',function(t){var e=d(this),i=e.data();o.call(e,"refreshLayout",i)}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajax"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),o.call(e,"doAjax",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexport"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),o.call(e,"doExport",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doexportchecked"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),o.call(e,"doExportChecked",i),t.preventDefault()}),d(document).on("click.bjui.bjuiajax.data-api",'[data-toggle="doajaxchecked"]',function(t){var e=d(this),i=e.data();i.url||(i.url=e.attr("href")),o.call(e,"doAjaxChecked",i),t.preventDefault()})}(jQuery),function(f){"use strict";var g,m,b;f(function(){g=f(FRAG.alertBoxFrag).hide().html(""),m=f(FRAG.alertBackground).hide().html(""),f("body").append("\x3c!-- alert msg box --\x3e").append(g).append("\x3c!-- alert msg box mask bg --\x3e").append(m)});var s=function(t,e){this.$element=f(t),this.options=e,this.tools=this.TOOLS(),this.clearTime=null};function o(a){var n=arguments,o=a;return this.each(function(){var t=f(this),e=f.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=new s(this,e);"string"==typeof o&&f.isFunction(i[o])&&([].shift.apply(n),n?i[o].apply(i,n):i[o]())})}s.DEFAULTS={displayPosition:"topcenter",displayMode:"slide",autoClose:null,alertTimeout:3e3,mask:null,types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},fas:{error:"fa-times-circle",info:"fa-info-circle",warn:"fa-exclamation-circle",correct:"fa-check-circle",confirm:"fa-question-circle"}},s.prototype.TOOLS=function(){var h=this,p=h.options;return{getTitle:function(t){return p.title||BJUI.regional.alertmsg.title[t]},keydownOk:function(t){return t.which!==BJUI.keyCode.ENTER||(t.data.target.trigger("click"),!1)},keydownEsc:function(t){t.which===BJUI.keyCode.ESC&&t.data.target.trigger("click")},openPosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,i=g.outerHeight(),a={},n={};switch(t?p.displayPosition&&"topcenter"!==p.displayPosition&&(t=p.displayPosition):t=p.displayPosition,e?p.displayMode&&"silde"!==p.displayMode&&(e=p.displayMode):e=p.displayMode,t){case"topleft":a={top:0-i,left:0,"margin-left":0},n={top:0};break;case"topcenter":a={top:0-i},n={top:0};break;case"topright":a={top:0-i,left:"auto",right:0,"margin-left":0},n={top:0};break;case"middleleft":a={top:"50%",left:-460,"margin-left":0,"margin-top":0-i/2},n={left:0};break;case"middlecenter":a={top:"0","margin-top":0-i/2},n={top:"50%"};break;case"middleright":a={top:"50%",left:"auto",right:-460,"margin-top":0-i/2},n={right:0};break;case"bottomleft":a={top:"auto",left:0,bottom:0-i,"margin-left":0},n={bottom:0};break;case"bottomcenter":a={top:"auto",bottom:0-i},n={bottom:0};break;case"bottomright":a={top:"auto",left:"auto",right:0,bottom:0-i,"margin-left":0},n={bottom:0}}"slide"===e?g.css(a).show().animate(n,500):"fade"===e?(a.opacity=.1,g.css(a).css(n).show().animate({opacity:1},500)):g.css(a).css(n).show()},closePosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,i=g.outerHeight(),a={};switch(t?p.displayPosition&&"topcenter"!==p.displayPosition&&(t=p.displayPosition):t=p.displayPosition,e?p.displayMode&&"silde"!==p.displayMode&&(e=p.displayMode):e=p.displayMode,t){case"topleft":case"topcenter":case"topright":a={top:0-i};break;case"middleleft":a={left:-460};break;case"middlecenter":a={top:0-i};break;case"middleright":a={right:-460};break;case"bottomleft":case"bottomcenter":case"bottomright":a={bottom:0-i}}"slide"===e?g.animate(a,500,function(){m.hide(),f(this).hide().empty()}):"fade"===e?g.animate({opacity:0},500,function(){m.hide(),f(this).hide().empty()}):(g.hide().remove(),m.hide())},open:function(t,e,i){var a,n,o=this,s="",l=BJUI.alertMsg.alertTimeout;if(i)for(var r=0;r<i.length;r++){var d=i[r].call?"callback":"",c=i[r].cls?i[r].cls:"default",u=i[r].cls&&"green"===i[r].cls?"check":"close";s+=FRAG.alertBtnFrag.replace("#btnMsg#",'<i class="fa fa-'+u+'"></i> '+i[r].name).replace("#callback#",d).replace("#class#",c)}a=f(FRAG.alertBoxFrag.replace("#type#",t).replace("#fa#",p.fas[t]).replace("#title#",this.getTitle(t)).replace("#message#",e).replace("#btnFragment#",s)).hide().appendTo("body"),g&&g.length&&g.remove(),g=a,o.openPosition(),b&&(clearTimeout(b),b=null),null==p.mask&&p.types.info!==t&&p.types.correct!==t&&m.show(),null==p.autoClose&&(p.types.info!==t&&p.types.correct!==t||(l?p.alertTimeout&&3e3!==p.alertTimeout&&(l=p.alertTimeout):l=p.alertTimeout,b=setTimeout(function(){o.close()},l))),(n=g.find(".btn")).each(function(e){f(this).on("click",f.proxy(function(){h.tools.close();var t=i[e].call;"string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call()},h)),i[e].keyCode===BJUI.keyCode.ENTER&&f(document).on("keydown.bjui.alertmsg.ok",{target:n.eq(e)},o.keydownOk),i[e].keyCode===BJUI.keyCode.ESC&&f(document).on("keydown.bjui.alertmsg.esc",{target:n.eq(e)},o.keydownEsc)})},alert:function(t,e,i){f.extend(p,"object"==typeof i&&i);var a=f.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},p),n=[{name:a.okName,call:a.okCall,cls:"default",keyCode:BJUI.keyCode.ENTER}];this.open(t,e,n)},close:function(){f(document).off("keydown.bjui.alertmsg.ok").off("keydown.bjui.alertmsg.esc"),this.closePosition()}}},s.prototype.error=function(t,e){this.tools.alert(this.options.types.error,t,e)},s.prototype.info=function(t,e){this.tools.alert(this.options.types.info,t,e)},s.prototype.warn=function(t,e){this.tools.alert(this.options.types.warn,t,e)},s.prototype.ok=function(t,e){this.tools.alert(this.options.types.correct,t,e)},s.prototype.correct=function(t,e){this.tools.alert(this.options.types.correct,t,e)},s.prototype.confirm=function(t,e){f.extend(this.options,"object"==typeof e&&e);var i=f.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options),a=[{name:i.okName,call:i.okCall,cls:"green",keyCode:BJUI.keyCode.ENTER},{name:i.cancelName,call:i.cancelCall,cls:"red",keyCode:BJUI.keyCode.ESC}];this.tools.open(this.options.types.confirm,t,a)};var t=f.fn.alertmsg;f.fn.alertmsg=o,f.fn.alertmsg.Constructor=s,f.fn.alertmsg.noConflict=function(){return f.fn.alertmsg=t,this},f(document).on("click.bjui.alertmsg.data-api",'[data-toggle="alertmsg"]',function(t){var e,i=f(this),a=i.data(),n=a.options;if(n&&("string"==typeof n&&(n=n.toObj()),"object"==typeof n&&f.extend(a,n)),!(e=a.type))return!1;o.call(i,e,a.msg||e,a),t.preventDefault()})}(jQuery),function(p){"use strict";var s=function(t,e){this.$element=p(t),this.options=e,this.tools=this.TOOLS()};function i(a){var n=arguments,o=a;return this.each(function(){var t=p(this),e=p.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.pagination");i||t.data("bjui.pagination",i=new s(this,e)),"string"==typeof o&&p.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.DEFAULTS={first:"li.j-first",prev:"li.j-prev",next:"li.j-next",last:"li.j-last",nums:"li.j-num > a",jump:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}},s.prototype.TOOLS=function(){var a=this.options;return{pageNums:function(){return Math.ceil(a.total/a.pageSize)},getInterval:function(){var t=Math.ceil(a.pageNum/2),e=this.pageNums(),i=e-a.pageNum;return{start:(this.getCurrentPage()>t?Math.max(Math.min(this.getCurrentPage()-t,i),0):0)+1,end:(this.getCurrentPage()>t?Math.min(this.getCurrentPage()+t,e):Math.min(a.pageNum,e))+1}},getCurrentPage:function(){var t=parseInt(a.pageCurrent);return isNaN(t)?1:t},hasPrev:function(){return 1<this.getCurrentPage()},hasNext:function(){return this.getCurrentPage()<this.pageNums()}}},s.prototype.init=function(){BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize});for(var a=this,n=this.options,t=this.tools,e=t.getInterval(),i="",o=FRAG.pagination,s=BJUI.regional.pagination,l=e.start;l<e.end;l++)i+=n.pageNumFrag.replaceAll("#pageNum#",l).replaceAll("#liClass#",l===t.getCurrentPage()?"selected j-num":"j-num");o=o.replaceAll("#pageNumFrag#",i).replaceAll("#pageCurrent#",t.getCurrentPage()).replaceAll("#first#",s.first).replaceAll("#last#",s.last).replaceAll("#prev#",s.prev).replaceAll("#next#",s.next).replaceAll("#jumpto#",s.jumpto).replaceAll("#jump#",s.jump),this.$element.html(o);var r=this.$element.find(n.first),d=this.$element.find(n.prev),c=this.$element.find(n.next),u=this.$element.find(n.last);function h(t,i){t.on("click",function(t){var e={pageCurrent:i,pageSize:a.options.pageSize};a.setClientPaging(e),p(this).bjuiajax("pageCallback",e,a.$element.closest(".bjui-layout")),t.preventDefault()})}t.hasPrev()?(r.add(d).find("> span").hide(),h(d,t.getCurrentPage()-1),h(r,1)):r.add(d).addClass("disabled").find("> a").hide(),t.hasNext()?(c.add(u).find("> span").hide(),h(c,t.getCurrentPage()+1),h(u,t.pageNums())):c.add(u).addClass("disabled").find("> a").hide(),this.$element.find(n.nums).each(function(t){h(p(this),t+e.start)}),this.$element.find(n.jump).each(function(){var i=p(this).find(":text"),e=p(this).find(".goto");e.on("click",function(){var t=i.val(),e={pageCurrent:t,pageSize:n.pageSize};t&&t.isPositiveInteger()&&(a.setClientPaging(e),p(this).bjuiajax("pageCallback",e,a.$element.closest(".bjui-layout")))}),i.keyup(function(t){t.keyCode===BJUI.keyCode.ENTER&&e.trigger("click")})})},s.prototype.changePagesize=function(){var t=this.$element.val(),e={pageSize:t};isNaN(t)||(this.setClientPaging(e),this.$element.bjuiajax("pageCallback",e,this.$element.closest(".bjui-layout")))},s.prototype.orderBy=function(t){var e=this;e.$element.css({cursor:"pointer"}).click(function(){var t={orderField:p(this).data("orderField"),orderDirection:p(this).data("orderDirection")};e.setClientPaging(t),p(this).bjuiajax("pageCallback",t,e.$element.closest(".bjui-layout"))})},s.prototype.destroy=function(){this.$element.removeData("bjui.pagination").empty()},s.prototype.getTarget=function(){return this.$element.closest(".bjui-layout").length?this.$element.closest(".bjui-layout"):this.$element.closest(".navtab-panel").length?p.CurrentNavtab:p.CurrentDialog},s.prototype.getClientPaging=function(){return this.getTarget().data("bjui.clientPaging")},s.prototype.setClientPaging=function(t){if(BJUI.ui.clientPaging){var e=this.getTarget();e.data("bjui.clientPaging",p.extend({},e.data("bjui.clientPaging")||{},t))}},s.prototype.setClientOrder=function(t){if(BJUI.ui.clientPaging){var e=this.getClientPaging();e&&e.orderField||this.setClientPaging(t)}},s.prototype.setPagingAndOrderby=function(t){var e=t.data("bjui.clientPaging");t.find('[data-toggle="pagination"]').pagination("destroy").pagination(e),e.pageSize&&t.find('select[data-toggle-change="changepagesize"]').selectpicker("val",e.pageSize),e.orderField&&t.find('th[data-order-field="'+e.orderField+'"]').addClass(e.orderDirection).siblings().removeClass("asc desc")};var t=p.fn.pagination;p.fn.pagination=i,p.fn.pagination.Constructor=s,p.fn.pagination.noConflict=function(){return p.fn.pagination=t,this},p(document).on(BJUI.eventType.initUI,function(t){var e=p(t.target).find('[data-toggle="pagination"]');e.length&&i.call(e)}),p(document).on("change.bjui.pagination.data-api",'select[data-toggle-change="changepagesize"]',function(t){var e=p(this);i.call(e,"changePagesize"),t.preventDefault()})}(jQuery),function($){"use strict";var MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function LZ(t){return(t<0||9<t?"":"0")+t}function formatDate(t,e){e+="";var i="",a=0,n="",o="",s=t.getYear()+"",l=t.getMonth()+1,r=t.getDate(),d=t.getDay(),c=t.getHours(),u=t.getMinutes(),h=t.getSeconds(),p={};for(s.length<4&&(s=""+(s-0+1900)),p.y=""+s,p.yyyy=s,p.yy=s.substring(2,4),p.M=l,p.MM=LZ(l),p.MMM=MONTH_NAMES[l-1],p.NNN=MONTH_NAMES[l+11],p.d=r,p.dd=LZ(r),p.E=DAY_NAMES[d+7],p.EE=DAY_NAMES[d],p.H=c,p.HH=LZ(c),p.h=0===c?12:12<c?c-12:c,p.hh=LZ(p.h),p.K=11<c?c-12:c,p.k=c+1,p.KK=LZ(p.K),p.kk=LZ(p.k),p.a=11<c?"PM":"AM",p.m=u,p.mm=LZ(u),p.s=h,p.ss=LZ(h);a<e.length;){for(n=e.charAt(a),o="";e.charAt(a)===n&&a<e.length;)o+=e.charAt(a++);null!=p[o]?i+=p[o]:i+=o}return i}function _isInteger(t){return new RegExp(/^\d+$/).test(t)}function _getInt(t,e,i,a){for(var n=a;i<=n;n--){var o=t.substring(e,e+n);if(o.length<i)return null;if(_isInteger(o))return o}return null}function parseDate(t,e){var i;t+="",e+="";for(var a,n,o=0,s=0,l="",r="",d=new Date(1900,0,1),c=d.getYear(),u=d.getMonth()+1,h=1,p=d.getHours(),f=d.getMinutes(),g=d.getSeconds(),m="";s<e.length;){for(l=e.charAt(s),r="";e.charAt(s)===l&&s<e.length;)r+=e.charAt(s++);if("yyyy"===r||"yy"===r||"y"===r){if("yyyy"===r&&(n=a=4),"yy"===r&&(n=a=2),"y"===r&&(a=2,n=4),null===(c=_getInt(t,o,a,n)))return 0;o+=c.length,2===c.length&&(c=70<c?c-0+1900:c-0+2e3)}else if("MMM"===r||"NNN"===r){for(i=u=0;i<MONTH_NAMES.length;i++){var b=MONTH_NAMES[i];if(t.substring(o,o+b.length).toLowerCase()===b.toLowerCase()&&("MMM"===r||"NNN"===r&&11<i)){12<(u=i+1)&&(u-=12),o+=b.length;break}}if(u<1||12<u)return 0}else if("EE"===r||"E"===r)for(i=0;i<DAY_NAMES.length;i++){var v=DAY_NAMES[i];if(t.substring(o,o+v.length).toLowerCase()===v.toLowerCase()){o+=v.length;break}}else if("MM"===r||"M"===r){if(null===(u=_getInt(t,o,r.length,2))||u<1||12<u)return 0;o+=u.length}else if("dd"===r||"d"===r){if(null===(h=_getInt(t,o,r.length,2))||h<1||31<h)return 0;o+=h.length}else if("hh"===r||"h"===r){if(null===(p=_getInt(t,o,r.length,2))||p<1||12<p)return 0;o+=p.length}else if("HH"===r||"H"===r){if(null===(p=_getInt(t,o,r.length,2))||p<0||23<p)return 0;o+=p.length}else if("KK"===r||"K"===r){if(null===(p=_getInt(t,o,r.length,2))||p<0||11<p)return 0;o+=p.length}else if("kk"===r||"k"===r){if(null===(p=_getInt(t,o,r.length,2))||p<1||24<p)return 0;o+=p.length,p--}else if("mm"===r||"m"===r){if(null===(f=_getInt(t,o,r.length,2))||f<0||59<f)return 0;o+=f.length}else if("ss"===r||"s"===r){if(null===(g=_getInt(t,o,r.length,2))||g<0||59<g)return 0;o+=g.length}else if("a"===r){if("am"===t.substring(o,o+2).toLowerCase())m="AM";else{if("pm"!==t.substring(o,o+2).toLowerCase())return 0;m="PM"}o+=2}else{if(t.substring(o,o+r.length)!==r)return 0;o+=r.length}}if(o!==t.length)return 0;if(2===u)if(c%4==0&&c%100!=0||c%400==0){if(29<h)return 0}else if(28<h)return 0;return(4===u||6===u||9===u||11===u)&&30<h?0:(p<12&&"PM"===m?p+=12:11<p&&"AM"===m&&(p-=12),new Date(c,u-1,h,p,f,g))}function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),i=this.getMonth()+1,a=this.getDate(),n=t.replaceAll("%y",e).replaceAll("%M",i).replaceAll("%d",a),o=1900,s=0,l=1,r=(n=replaceTmEval(n)).split("-");return 0<r.length&&(o=r[0]),1<r.length&&(s=r[1]-1),2<r.length&&(l=r[2]),new Date(o,s,l).formatDate("yyyy-MM-dd")}}(jQuery),function(m){"use strict";var b,v,r,d,c,u,y,k,x,C,w,$,j,h,T,n,p,f;m(function(){!function(){var t=BJUI.regional.datepicker,e=FRAG.calendarFrag.replace("#close#",t.close).replace("#prev#",t.prev).replace("#next#",t.next).replace("#clear#",t.clear).replace("#ok#",t.ok);b=m(e).hide(),m("body").append("\x3c!-- datepicker --\x3e").append(b),v=b.find("> .main"),r=b.find("a.prev"),d=b.find("a.next"),c=b.find("select[name=year]"),u=b.find("select[name=month]"),y=b.find(".time"),k=y.find(":text"),x=y.find("ul > li"),C=y.find(".hh"),w=y.find(".mm"),$=y.find(".ss"),j=v.find("> .tm"),h=b.find(".close"),T=v.find("> .body > .days"),n=v.find("> .body > .dayNames"),p=b.find(".clearBtn"),f=b.find(".okBtn");var i="",a=BJUI.regional.datepicker;m.each(a.dayNames,function(t,e){i+="<dt>"+e+"</dt>"}),n.html(i),m.each(a.monthNames,function(t,e){var i=t+1;u.append('<option value="'+i+'">'+e+"</option>")}),b.on("selectstart",function(){return!1})}()});var s=function(t,e){this.$element=m(t),this.options=e,this.tools=this.TOOLS(),this.$dateBtn=null;var i=new Date;this.options.minDate=i.formatDateTm(this.options.minDate),this.options.maxDate=i.formatDateTm(this.options.maxDate),this.events={focus_time:"focus.bjui.datepicker.time",click_prev:"click.bjui.datepicker.prev",click_next:"click.bjui.datepicker.next",click_ok:"click.bjui.datepicker.ok",click_days:"click.bjui.datepicker.days",click_clear:"click.bjui.datepicker.clear",click_close:"click.bjui.datepicker.close",click_tm:"click.bjui.datepicker.tm",click_spinner:"click.bjui.datepicker.spinner",mousedown_sp:"mousedown.bjui.datepicker.spinner",mouseup_sp:"mouseup.bjui.datepicker.spinner",change_ym:"change.bjui.datepicker.ym",click_time:"click.bjui.datepicker.time",keydown_time:"keydown.bjui.datepicker.time",keyup_time:"keyup.bjui.datepicker.time"}};function i(a){var n=arguments,o=a;return this.each(function(){var t=m(this),e=m.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.datepicker");i||t.data("bjui.datepicker",i=new s(this,e)),"string"==typeof o&&m.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.DEFAULTS={pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},s.EVENTS={afterChange:"afterchange.bjui.datepicker"},s.prototype.TOOLS=function(){var l=this,e={changeTmMenu:function(t){j.removeClass("hh").removeClass("mm").removeClass("ss"),t&&(j.addClass(t),k.removeClass("slt").filter("."+t).addClass("slt"))},clickTmMenu:function(i,t){j.find("> ul").hide().filter("."+t).show().find("> li").off(l.events.click_tm).on(l.events.click_tm,function(){var t=m(this),e=parseInt(t.text())<10?"0"+t.text():t.text();i.val(e)})},keydownInt:function(t){if(!(48<=t.keyCode&&t.keyCode<=57||t.keyCode===BJUI.keyCode.DELETE||t.keyCode===BJUI.keyCode.BACKSPACE))return!1},changeTm:function(t,e){var i=parseInt(t.val()),a=parseInt(t.data("start"))||0,n=parseInt(t.data("end")),o=parseInt(t.data("step")||1),s=e?e.data("add")?e.data("add"):-1:0,l=i;1===s?i<=n-o&&(l=i+o):-1===s?a+o<=i&&(l=i-o):n<i?l=n:i<a&&(l=a),l<10&&(l="0"+l),t.val(l)},closeCalendar:function(t){e.changeTmMenu(),t&&(m(document).off(l.events.click_close),b.hide())},get:function(t){return l.options[t]},getDays:function(t,e){return 2===e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},minMaxDate:function(t){var e=t.split("-").length-1,i="y-M-d";return 1===e?i="y-M":0===e&&(i="y"),t.parseDate(i)},getMinDate:function(){return this.minMaxDate(l.options.minDate)},getMaxDate:function(){var t=l.options.maxDate,e=t.split("-").length-1,i=this.minMaxDate(t);if(e<2){var a=this.getDays(i.getFullYear(),i.getMonth()+1);i.setDate(a),0===e&&i.setMonth(11)}return i},getDateWrap:function(t){t||(t=this.parseDate(l.sDate)||new Date);var e=t.getFullYear(),i=t.getMonth()+1,a=this.getDays(e,i);return{year:e,month:i,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:a,date:t}},changeDate:function(t,e,i){var a=new Date(t,e-1,i||1);return l.sDate=this.formatDate(a),a},changeDateTime:function(t,e,i,a,n,o){var s=new Date(t,e-1,i,a,n,o);return l.sDate=this.formatDate(s),s},changeDay:function(t,e){e||(e=0);var i=this.getDateWrap();return this.changeDate(i.year,i.month+parseInt(e),t)},changeMonth:function(t){var e=c.get(0).selectedIndex,i=c.find("option").length,a=1*u.val()+t;0===a?0===e?a=1:(a=12,e--,c.get(0).selectedIndex=e):13===a&&(e===i-1?a=12:(a=1,e++,c.get(0).selectedIndex=e)),u.val(a).change()},parseDate:function(t){return t?t.parseDate(l.options.pattern):null},formatDate:function(t){return t.formatDate(l.options.pattern)},hasHour:function(){return-1!==l.options.pattern.indexOf("H")},hasMinute:function(){return-1!==l.options.pattern.indexOf("m")},hasSecond:function(){return-1!==l.options.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=["y","M","d","E"],e=0;e<t.length;e++)if(-1!==l.options.pattern.indexOf(t[e]))return!0;return!1},afterChange:function(t){l.$element.trigger(s.EVENTS.afterChange,{value:t})}};return e},s.prototype.addBtn=function(){var t=this.$element;if(!this.$dateBtn&&!this.options.addbtn&&!t.parent().hasClass("wrap_bjui_btn_box")){this.$dateBtn=m(FRAG.dateBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var e=this.$element.parent(),i=this.$element.addClass("form-control").innerHeight();e.css({position:"relative",display:"inline-block"}),this.$dateBtn.css({height:i,lineHeight:i+"px"}).appendTo(e),this.$dateBtn.on("selectstart",function(){return!1})}},s.prototype.init=function(){this.$element.val()&&(this.sDate=this.$element.val().trim());var i=this,a=this.tools,n=a.getDateWrap(),o=a.getMinDate(),s=a.getMaxDate(),t=o.getFullYear(),e=s.getFullYear();c.empty();for(var l=t;l<=e;l++)c.append('<option value="'+l+'"'+(n.year===l?" selected":"")+">"+l+"</option>");u.val(n.month),c.add(u).off(this.events.change_ym).on(this.events.change_ym,function(){var t,e;e=a.hasTime()?(t=T.find(".slt"),a.changeDateTime(c.val(),u.val(),t.data("day"),n.hour,n.minute,n.second)):(t=T.find(".slt"),a.changeDate(c.val(),u.val(),t.data("day"))),i.create(a.getDateWrap(e),o,s)}),r.off(this.events.click_prev).on(this.events.click_prev,function(){i.tools.changeMonth(-1)}),d.off(this.events.click_prev).on(this.events.click_prev,function(){i.tools.changeMonth(1)}),p.off(this.events.click_clear).on(this.events.click_clear,function(){i.$element.val(""),a.closeCalendar(!0)}),f.off(this.events.click_ok).on(this.events.click_ok,function(){var t=T.find("dd.slt");if(t.hasClass("disabled"))return!1;var e=a.changeDay(t.data("day"),t.data("month"));a.hasTime()&&(e.setHours(parseInt(C.val())),e.setMinutes(parseInt(w.val())),e.setSeconds(parseInt($.val()))),a.closeCalendar(!0),i.$element.val(a.formatDate(e)).focus(),a.afterChange(e)}),h.off(this.events.click_close).on(this.events.click_close,function(){a.closeCalendar(!0)}),m(document).on(this.events.click_close,function(t){var e=m(t.target);t.target!==i.$element.get(0)&&(e.closest("#calendar").length||("datepicker"===e.data("toggle")||"datepickerbtn"===e.parent().data("toggle")||"datepickerbtn"===e.data("toggle")?a.closeCalendar(!1):a.closeCalendar(!0)))}),this.create(n,o,s)},s.prototype.create=function(t,e,i){var a,n,o,s=this,l=this.options,r=this.tools,d=new Date(t.year,t.month-1,1),c=d.getDay(),u="";if(0<c){d.setMonth(d.getMonth()-1);var h=r.getDateWrap(d);for(o=h.days-c+1;o<=h.days;o++)u+='<dd class="other'+(n=e<=(a=new Date(t.year,t.month-2,o))&&a<=i?"":" disabled")+'" data-month="-1" data-day="'+o+'">'+o+"</dd>"}for(o=1;o<=t.days;o++)n=e<=(a=new Date(t.year,t.month-1,o))&&a<=i?"":"disabled",o===t.day&&(n+=" slt"),u+='<dd class="'+n+'" data-day="'+o+'">'+o+"</dd>";for(o=1;o<=42-c-t.days;o++)u+='<dd class="other'+(n=e<=(a=new Date(t.year,t.month,o))&&a<=i?"":" disabled")+'" data-month="1" data-day="'+o+'">'+o+"</dd>";var p=T.html(u).find("dd");if(p.not(".disabled").off(this.events.click_days).on(this.events.click_days,function(){var t=m(this);if(r.hasTime())p.removeClass("slt"),t.addClass("slt");else{var e=r.changeDay(t.data("day"),t.data("month"));r.closeCalendar(!0),s.$element.val(r.formatDate(e)).focus(),r.afterChange(e)}}),r.hasDate()?v.removeClass("nodate"):v.addClass("nodate"),r.hasTime()){y.show(),C.val(t.hour<10?"0"+t.hour:t.hour).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("hh")});var f=parseInt(t.minute/l.mmStep)*l.mmStep;w.val(f<10?"0"+f:f).data("step",l.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("mm")}),$.val(r.hasSecond()?t.second<10?"0"+t.second:t.second:"00").data("step",l.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){r.changeTmMenu("ss")}),b.off("click").on("click",function(t){m(t.target).closest(".time").length||(j.find("> ul").hide(),r.changeTmMenu())}),k.off(this.events.keydown_time).on(this.events.keydown_time,r.keydownInt).each(function(){var t=m(this);t.off(s.events.keyup_time).on(s.events.keyup_time,function(){r.changeTm(t)})}).off(this.events.click_time).on(this.events.click_time,function(){r.clickTmMenu(m(this),m(this).data("type"))});var g=null;x.off(this.events.click_spinner).on(this.events.click_spinner,function(t){var e=m(this);k.filter(".slt").each(function(){r.changeTm(m(this),e)}),t.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(t){var e=m(this);g=setInterval(function(){k.filter(".slt").each(function(){r.changeTm(m(this),e)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(t){clearTimeout(g)}),r.hasHour()||C.attr("disabled",!0),r.hasMinute()||w.attr("disabled",!0),r.hasSecond()||$.attr("disabled",!0)}else y.hide();this.show()},s.prototype.show=function(){var t=this.$element.offset(),e=t.top+this.$element.get(0).offsetHeight,i=b.outerHeight(!0);i<e&&e>m(window).height()-i&&(e=t.top-i),b.css({left:t.left,top:e}).show().click(function(t){t.stopPropagation()})};var t=m.fn.datepicker;m.fn.datepicker=i,m.fn.datepicker.Constructor=s,m.fn.datepicker.noConflict=function(){return m.fn.datepicker=t,this},m(document).on(BJUI.eventType.initUI,function(t){var e=m(t.target).find('[data-toggle="datepicker"]');e.length&&(e.data("nobtn")||i.call(e,"addBtn"))}),m(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepickerbtn"]',function(t){var e=m(this).prevAll('[data-toggle="datepicker"]');e&&e.is(":text")&&(i.call(e,e.data()),t.preventDefault())}),m(document).on("click.bjui.datepicker.data-api",'[data-toggle="datepicker"]',function(t){var e=m(this);e.data("onlybtn")||e.is(":text")&&(i.call(e,e.data()),t.preventDefault())})}(jQuery),function(s){"use strict";var l=function(t,e){this.$element=s(t),this.options=e};function a(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},l.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.ajaxtab");i||t.data("bjui.ajaxtab",i=new l(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}l.DEFAULTS={url:void 0,target:void 0,reload:!1},l.prototype.init=function(){var t=this.options;if(t.url){if(t.url=decodeURI(t.url).replacePlh(this.$element.closest(".unitBox")),!t.url.isFinishedTm())return this.$element.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: "+t.url);if(t.url=encodeURI(t.url),t.target)if(t.reload)this.load();else this.$element.data("bjui.ajaxtab.reload")?this.$element.tab("show"):this.load();else BJUI.debug("Ajaxtab Plugin: Attribute 'target' is not defined!")}else BJUI.debug("Ajaxtab Plugin: Error trying to open a tab, url is undefined!")},l.prototype.load=function(){var t=this.$element,e=this.options;s(e.target).ajaxUrl({url:e.url,data:{},callback:function(){t.data("bjui.ajaxtab.reload",!0).tab("show")}})};var t=s.fn.ajaxtab;s.fn.ajaxtab=a,s.fn.ajaxtab.Constructor=l,s.fn.ajaxtab.noConflict=function(){return s.fn.ajaxtab=t,this},s(document).on("click.bjui.ajaxtab.data-api",'[data-toggle="ajaxtab"]',function(t){var e=s(this),i=e.data();i.url||(i.url=e.attr("href")),a.call(e,i),t.preventDefault()})}(jQuery),function(j){"use strict";var u=function(t,e){this.$element=j(t),this.options=e,this.tools=this.TOOLS(),this.datanames={tbody:"bjui.datagrid.tbody.dom",td_html:"bjui.datagrid.td.html",changeData:"bjui.datagrid.tr.changeData"},this.classnames={s_checkbox:"datagrid-checkbox",s_linenumber:"datagrid-linenumber",s_edit:"datagrid-column-edit",s_lock:"datagrid-lock",s_menu:"datagrid-menu-box",s_filter:"datagrid-filter-box",s_showhide:"datagrid-showhide-box",th_cell:"datagrid-cell",th_menu:"datagrid-column-menu",btn_menu:"datagrid-column-menu-btn",th_col:"datagrid-col",th_field:"datagrid-col-field",th_sort:"datagrid-sortable",th_resize:"datagrid-resize-head",th_resizemark:"datagrid-column-resizemark",tr_edit:"datagrid-edit-tr",tr_add:"datagrid-add-tr",tr_selected:"datagrid-selected-tr",td_edit:"datagrid-edit-td",td_changed:"datagrid-changed",td_linenumber:"datagrid-linenumber-td",td_checkbox:"datagrid-checkbox-td",li_asc:"datagrid-li-asc",li_desc:"datagrid-li-desc",li_filter:"datagrid-li-filter",li_showhide:"datagrid-li-showhide",li_lock:"datagrid-li-lock",li_unlock:"datagrid-li-unlock"}};function i(a){var n=arguments,o=a;return this.each(function(){var t=j(this),e=j.extend({},u.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.datagrid");i||t.data("bjui.datagrid",i=new u(this,e)),"string"==typeof o&&j.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}u.DEFAULTS={gridTitle:"",columns:null,data:null,dataUrl:null,loadType:"POST",dataType:"json",local:"remote",fieldSortable:!0,filterThead:!0,sortAll:!1,filterAll:!1,filterMult:!0,linenumberAll:!1,showLinenumber:!0,showCheckboxcol:!1,showEditbtnscol:!1,showTfoot:!1,showToolbar:!1,toolbarItem:"",toolbarCustom:"",columnResize:!0,columnMenu:!0,columnShowhide:!0,columnFilter:!0,columnLock:!0,paging:!0,pagingAlign:"center",editUrl:null,editCallback:null,editMode:"inline",editDialogOp:null,inlineEditMult:!0,saveAll:!0,addLocation:"first",delUrl:null,delType:"POST",delPK:null,delConfirm:!0,delCallback:null,jsonPrefix:"",contextMenuH:!0,contextMenuB:!1,hScrollbar:!1,fullGrid:!1,importOption:null,exportOption:null,beforeEdit:null,beforeDelete:null,afterSave:null,afterDelete:null},u.renderItem=function(i,t){if(!t||!t.length)return"";var a="";return j.each(t,function(t,e){if(void 0!==e[i])return a=e[i],!1}),a},u.prototype.TOOLS=function(){var v=this,y=v.options,a={getPageCount:function(t,e){return Math.ceil(e/t)},getPageInterval:function(t,e,i){var a=Math.ceil(i/2),n=t-i,o=a<e?Math.max(Math.min(e-a,n),0):0,s=a<e?Math.min(e+a,t):Math.min(i,t);return s-o==i&&(s+=1),s<i&&(s+=1),{start:o+1,end:s}},getRight:function(t){var i=0,e=t.data("index"),a=v.$tbody.find("> tr:first > td:lt("+(e+1)+")");return a&&a.length||(a=v.$colgroupH.find("> col:lt("+(e+1)+")")),a.each(function(){var t=j(this),e=t.is(":hidden")?0:t.outerWidth();i+=e}),i},getRight4Lock:function(t){var i=0,e=v.$lockTbody.find("> tr:first > td:eq("+t+")"),a=e&&e.prevAll().add(e);return a&&a.length||(a=v.$lockColgroupH.filter(":lt("+(t+1)+")")),a.each(function(){var t=j(this),e=t.is(":hidden")?0:t.outerWidth();i+=e}),i},beforeEdit:function(t,e){var i=y.beforeEdit;return!i||("string"==typeof i&&(i=i.toFunc()),"function"!=typeof i)||i.call(v,t,e)},afterSave:function(t,e){var i=y.afterSave;i&&("string"==typeof i&&(i=i.toFunc()),"function"==typeof i&&i.call(v,t,e))},afterDelete:function(){var t=y.afterDelete;t&&("string"==typeof t&&(t=t.toFunc()),"function"==typeof t&&t.call(v))},setColspan:function(t,e){t.colspan&&(t.colspan=t.colspan+e-1),t.index=t.index+e-1,t.parent&&this.setColspan(t.parent,e)},columns2Arr:function(t,n,o,s){var l=this;return n||(n=[]),o||(o=0),n[o]||(n[o]=[]),j.each(t,function(t,e){var i,a=n[o].length;if(s&&(e.parent=s),e.columns)return i=e.columns.length,o&&e.parent&&l.setColspan(e.parent,i),e.index=v.columnModel.length+i-1,e.colspan=i,e.quicksort=!1,n[o][a++]=e,l.columns2Arr(e.columns,n,o+1,e);e.rowspan=o,e.index=v.columnModel.length,e.menu=void 0===e.menu||e.menu,e.lock=void 0===e.lock||e.lock,e.hide=void 0!==e.hide&&e.hide,e.edit=void 0===e.edit||e.edit,e.add=void 0===e.add||e.add,e.quicksort=void 0===e.quicksort||e.quicksort,n[o][a++]=e,v.columnModel.push(e)}),n},createTrsByData:function(t,e){var i;v.$tbody||(v.$tbody=j("<tbody></tbody>")),t&&(i=t.list?t.list:t,v.paging.total=i.length,"object"==typeof t&&(t[BJUI.pageInfo.total]&&(v.paging.total=parseInt(t[BJUI.pageInfo.total])),t[BJUI.pageInfo.pageSize]&&(e&&v.paging.pageSize!=t[BJUI.pageInfo.pageSize]&&v.$selectpage.trigger("bjui.datagrid.paging.pageSize",t[BJUI.pageInfo.pageSize]),v.paging.pageSize=parseInt(t[BJUI.pageInfo.pageSize]))),v.paging.pageCount=a.getPageCount(v.paging.pageSize,v.paging.total),v.paging.pageCurrent>v.paging.pageCount&&(v.paging.pageCurrent=v.paging.pageCount),this.initTbody(i,e)),v.init_tbody||v.$tbody.appendTo(v.$element),v.init_thead||v.initThead()},initTbody:function(o,s){var l,r=this,d=v.allData,c=y.dataType||"json",u=v.columnModel,h=v.hiddenFields,p=(v.regional,[]),f=v.attach,g=v.paging,m=0,b=g.pageSize,t=function(){if(c=c.toLowerCase(),o&&(d=v.allData=o),d.length?"local"==y.local?(m=g.pageSize*(g.pageCurrent-1),b=m+g.pageSize,g.total!=d.length&&(g.total=d.length),m>d.length&&(m=g.pageSize*(g.pageCount-1))):d.length>g.pageSize&&(b=g.pageSize):b=0,b>d.length&&(b=d.length),"array"==c&&o&&o.length&&"array"==j.type(o[0])){var n,t=m,e=b,i=[];"local"==y.local&&(t=0,e=d.length);for(var a=t;a<e;a++)l={},n=0,j.each(d[a],function(t,e){var i,a=e;u[n]&&u[n].gridNumber&&n++,u[n]&&u[n].gridCheckbox&&n++,"string"==typeof a&&(a='"'+a+'"'),u[n]&&!u[n].gridEdit?(i='{"'+u[n].name+'":'+a+"}",j.extend(l,JSON.parse(i))):(u[n]&&u[n].gridEdit&&n++,n>=u.length&&h&&h[t-u.length]&&(i='{"'+h[t-u.length]+'":'+a+"}",j.extend(l,JSON.parse(i)))),n++}),i.push(l);d=v.allData=i}for(a=m;a<b;a++)l=j.extend({},v.allData[a],f),p.push(l);r.createTrs(p,s),v.data=p};s&&v.$boxM?v.$boxM.show().trigger("bjui.ajaxEnd").trigger("bjui.ajaxStart",[50,t]):t()},createTrs:function(g,m){var e=v.columnModel,i=v.paging,b=BJUI.doRegional(FRAG.gridEditBtn,v.regional);m&&(j.each(e,function(t,e){e.locked&&(v.colLock(e.th,!1),e.lock_refresh=!0)}),v.$tbody.empty(),v.$lockTableH&&v.$lockTableH.empty(),v.$lockTableB&&v.$lockTableB.empty()),j.each(g,function(u,h){var p,f=j("<tr></tr>"),t=y.linenumberAll?(i.pageCurrent-1)*i.pageSize+(u+1):u+1;j.extend(h,{gridNumber:t,gridIndex:u}),j.each(e,function(t,a){var e,n,o,i=a.name||"datagrid-noname",s=h[i],l="",r="";if(void 0===s&&(s=""),e=s,a.align&&(l=' align="'+a.align+'"'),a.gridCheckbox&&(s='<div><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox" value="true"></div>'),a.gridEdit&&(s=b,r=' class="'+v.classnames.s_edit+'"'),a.calc){a.calc_count||(a.calc_count=g.length);var d=s&&String(s).isNumber()?1*s:0;"sum"==a.calc||"avg"==a.calc?a.calc_sum=(a.calc_sum||0)+d:"max"==a.calc?a.calc_max=a.calc_max?a.calc_max<d?d:a.calc_max:d:"min"==a.calc&&(a.calc_min=a.calc_min?a.calc_min>d?d:a.calc_min:d)}if((p=j("<td"+l+r+"><div>"+s+"</div></td>")).data("val",s).appendTo(f),a.gridNumber&&p.addClass(v.classnames.td_linenumber),a.gridCheckbox&&p.addClass(v.classnames.td_checkbox),m&&a.hidden&&p.css("display","none"),a.items&&!a.render&&(a.render=j.datagrid.renderItem),a.render&&"string"==typeof a.render&&(a.render=a.render.toFunc()),a.render&&"function"==typeof a.render){var c="";if(a.items){"string"==typeof a.items&&(a.render.trim().startsWith("[")?a.render=a.render.toObj():a.render=a.render.toFunc()),a.renderTds||(a.renderTds=[]);"function"==typeof a.items?0==u?(v.delayRender||(v.delayRender=0),v.delayRender++,n=p,o=e,j.when(a.items.call(v)).then(function(i){a.items=i,c=a.render.call(v,o,i),n.html(c),j.each(a.renderTds,function(t,e){c=a.render.call(v,e.text(),i),e.html(c),t==a.renderTds.length-1&&(a.renderTds=null)}),v.delayRender--})):a.renderTds.push(p):(c=a.render.call(v,e,a.items),p.html(c))}else c=a.render.call(v,e),p.html(c)}}),f.appendTo(v.$tbody),m&&f.initui()}),m&&(v.initEvents(),y.editMode&&v.edit(),v.$paging&&v.$paging.trigger("bjui.datagrid.paging.jump"),j.each(e,function(t,e){e.lock_refresh&&(v.colLock(e.th,!0),delete e.lock_refresh)})),v.$boxM&&v.$boxM.trigger("bjui.ajaxStop").hide()},loadData:function(t,i){var a=this,e=y.dataUrl,o=y.dataType||"json";v.columnModel;v.$tbody&&v.$boxM.show().trigger("bjui.ajaxStart",[50]),"array"==(o=o.toLowerCase())&&(o="text"),j.ajax({url:e,data:t||{},type:y.loadType,cache:y.cache||!1,dataType:o,success:function(t){if("xml"==o){var n,e=[];j(t).find("row").each(function(){n={},j(this).find("cell").each(function(t){var e=j(this),i=e.text(),a=e.attr("name");n[a]=i}),e.push(n)}),e&&a.createTrsByData(e,i)}else"json"==o?a.createTrsByData(t,i):a.createTrsByData(t.toObj(),i)}})},appendColumns:function(){v.linenumberColumn={name:"gridNumber",gridNumber:!0,width:30,minWidth:30,label:"No.",align:"center",menu:!1,edit:!1,quicksort:!1},v.checkboxColumn={name:"gridCheckbox",gridCheckbox:!0,width:40,minWidth:40,label:"Checkbox",align:"center",menu:!1,edit:!1,quicksort:!1},v.editBtnsColumn={name:"gridEdit",gridEdit:!0,width:110,minWidth:110,label:"Edit",align:"center",menu:!1,edit:!1,hide:!1,quicksort:!1}},createThead:function(){var n,o,s,l,r,d,c,t=y.columns,u=[];this.appendColumns(),y.showCheckboxcol&&(t.unshift(v.checkboxColumn),"lock"==y.showCheckboxcol&&(v.checkboxColumn.initLock=!0)),y.showLinenumber&&(t.unshift(v.linenumberColumn),"lock"==y.showLinenumber&&(v.linenumberColumn.initLock=!0)),y.showEditbtnscol&&t.push(v.editBtnsColumn),u=this.columns2Arr(t,u),v.columnModel[v.columnModel.length-(y.showEditbtnscol?2:1)].lock=!1,y.hiddenFields&&(v.hiddenFields=y.hiddenFields),v.$thead=j("<thead></thead>"),j.each(u,function(t,e){var i,a=j('<tr style="height:25px;"></tr>');j.each(e,function(t,e){n=e.label||e.name,o=e.align?' align="'+e.align+'"':"",s=e.width?' width="'+e.width+'"':"",l=e.colspan?' colspan="'+e.colspan+'"':"",r=1<u.length-e.rowspan?' rowspan="'+(u.length-e.rowspan)+'"':"",d='<div class="'+v.classnames.th_resizemark+'"></div>',c="",e.gridCheckbox&&(n='<input type="checkbox" data-toggle="icheck">'),e.colspan&&(o=' align="center"'),e.thalign&&(o=' align="'+e.thalign+'"'),e.menu&&y.columnMenu&&(c=' class="'+v.classnames.th_menu+'"'),(i=j("<th"+c+s+o+l+r+'><div><div class="datagrid-space"></div><div class="datagrid-label">'+n+'</div><div class="'+v.classnames.th_cell+'">'+d+"</div></div></th>")).data("index",e.index).appendTo(a),i.find("> div").css("height",1<u.length-e.rowspan?24*(u.length-e.rowspan)+"px":"24px"),r||i.addClass("single-row"),e.gridNumber&&i.addClass(v.classnames.td_linenumber),y.fieldSortable&&e.quicksort&&i.addClass("datagrid-quicksort-th"),e.th=i}),a.appendTo(v.$thead)}),v.$thead.appendTo(v.$element)},createTbody:function(){var t=y.data;v.columnModel;t?("string"==typeof t&&(t=t.trim().startsWith("[")||t.trim().startsWith("{")?t.toObj():t.toFunc()),"function"==typeof t&&(t=t.call()),this.createTrsByData(t)):y.dataUrl&&this.loadData()},setBoxbH:function(t){var e,i=t||y.height,a=0;i<100||(isNaN(i)&&(i=v.$grid.height()),v.$boxT&&(i-=e=v.$boxT.outerHeight(),a+=e),v.$toolbar&&(i-=e=v.$toolbar.outerHeight(),a+=e),v.$box_paging&&(i-=v.$box_paging.outerHeight()),v.$boxF&&(i-=v.$boxF.outerHeight()),a+=v.$tableH.outerHeight(),(i-=v.$boxH.outerHeight())<0&&(i=0),v.$boxB.height(i),v.$boxM.height(i).css({top:a}))},fixedH:function(t){this.setBoxbH(t)},showSubMenu:function(e,i,a){var n,o,s=i.outerWidth(),l=a.data("width")||a.outerWidth(),r=v.$boxH.width(),d=function(t,e,i){n=e.offset().left-v.$grid.offset().left-1,o={left:"50%"},t.removeClass("active"),e.hasClass("position-right")||r-n<s+l?(i.css({left:"auto",right:"100%"}),o={right:"50%"}):i.css({left:"100%",right:"auto"}),o.opacity=.2,i.stop().animate(o,"fast",function(){j(this).hide()})};e.hover(function(){if(a.appendTo(e),e.hasClass(v.classnames.li_filter)&&a.is(":visible"))return!1;var t=e.siblings("."+v.classnames.li_filter);t.length&&t.hasClass("active")&&d(t,i,t.find("> ."+v.classnames.s_filter)),n=i.offset().left-v.$grid.offset().left-1,o={left:"100%"},i.hasClass("position-right")||r-n<s+l?(a.css({left:"auto",right:"50%"}),o={right:"100%"}):a.css({left:"50%",right:"auto"}),o.opacity=1,e.addClass("active"),a.show().stop().animate(o,"fast")},function(){if(e.hasClass(v.classnames.li_filter))return!1;d(e,i,a)}),e.on("bjui.datagrid.th.submenu.hide",function(t,e,i){d(j(this),e,i)})},locking:function(t){var e=t.data("index"),i=v.columnModel[e],a=i.lock,n=i.locked,o=v.$menu,s=o.find("> ul").find("> li."+v.classnames.li_lock),l=s.next();n?(s.addClass("disable"),l.removeClass("disable")):(l.addClass("disable"),s.removeClass("disable")),a?(s.show().off("click").on("click",function(){s.hasClass("disable")||(o.hide().data("bjui.datagrid.menu.btn").removeClass("active"),v.colLock(t,!0))}),l.show().off("click").on("click",function(){l.hasClass("disable")||(o.hide().data("bjui.datagrid.menu.btn").removeClass("active"),v.colLock(t,!1))})):(s.hide().off("click"),l.hide().off("click"))},createShowhide:function(){var n;v.$showhide||(v.col_showhide_count=v.columnModel.length,n=j('<ul class="'+v.classnames.s_showhide+'" role="menu"></ul>'),j.each(v.columnModel,function(t,e){(e.gridNumber||e.gridCheckbox||e.gridEdit)&&v.col_showhide_count--;var i,a=j(FRAG.gridShowhide.replaceAll("#index#",e.index).replaceAll("#label#",e.label||"")).toggleClass("nodisable",!!(e.gridNumber||e.gridCheckbox||e.gridEdit));i=e,a.click(function(){if(j(this).hasClass("disable"))return!1;var t=j(this),e=!t.find("i").hasClass("fa-check-square-o");i.index,t.toggleClass("datagrid-col-check").find("i").attr("class","fa fa"+(e?"-check":"")+"-square-o"),v.showhideColumn(i.th,e),i.gridNumber||i.gridCheckbox||i.gridEdit||(v.col_showhide_count=e?v.col_showhide_count+1:v.col_showhide_count-1),1==v.col_showhide_count?n.find("> li.datagrid-col-check").addClass("disable"):n.find("> li.disable").removeClass("disable"),n.find("> li.nodisable").removeClass("disable")}),a.appendTo(n),e.hide&&a.trigger("click")}),n.appendTo(v.$grid),n.data("width",n.outerWidth()),v.$showhide=n)},showhide:function(t,i){var e=t.index,a=t.th,n=v.$tbody.find("> tr"),o=i?"":"none",s=function(t){var e=t.colspan;i?e++:e--,e?t.th.css("display",""):t.th.css("display","none"),t.th.attr("colspan",e),t.colspan=e,t.parent&&s(t.parent)};void 0===t.hidden&&(t.hidden=!1),t.hidden!=!i&&(t.hidden=!i,a.css("display",o),n.find("> td:eq("+e+")").css("display",o),v.$colgroupH.find("> col").eq(e).css("display",o),v.$colgroupB.find("> col").eq(e).css("display",o),v.$thead.find("> tr.datagrid-filter > th:eq("+e+")").css("display",o),v.$boxF&&(v.$tableF.find("> thead > tr > th:eq("+e+")").css("display",o),v.$colgroupF.find("> col").eq(e).css("display",o)),t.calc&&v.$tfoot&&v.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),t.parent&&s(t.parent))},jumpPage:function(t,e){var i,a=v.allData;t&&(v.paging.pageCurrent=t),e&&(v.paging.pageSize=e,v.paging.pageCount=this.getPageCount(e,v.paging.total),v.paging.pageCurrent>v.paging.pageCount&&(v.paging.pageCurrent=v.paging.pageCount)),"remote"==y.local?(i=this.getRemoteFilterData(!0),this.loadData(i,!0)):this.initTbody(a,!0)},quickSort:function(a){if(v.isDom){if("local"==y.local)return;y.sortAll=!0}if(v.$tbody.find("> tr."+v.classnames.tr_edit).length)v.$tbody.alertmsg("info",BJUI.getRegional("datagrid.editMsg"));else{var t,e,i=a.th,n=v.data,o=v.allData,s=a.name,l=a.type,r=v.$thead.find("> tr > th.datagrid-quicksort-th");s||(s="datagrid-noname");var d=function(t){t.sort(function(t,e){t[s];var i=typeof e[s];return"boolean"==l||"number"==l||"number"==i||"boolean"==i?a.sortAsc?t[s]-e[s]:e[s]-t[s]:a.sortAsc?String(t[s]).localeCompare(e[s]):String(e[s]).localeCompare(t[s])})};r.find("> div > .datagrid-label > i").remove(),a.sortAsc?(e="desc",a.sortAsc=!1):(e="asc",a.sortAsc=!0),i.find("> div > .datagrid-label").prepend('<i class="fa fa-long-arrow-'+(a.sortAsc?"up":"down")+'"></i>'),y.sortAll?"remote"==y.local?((t={})[BJUI.pageInfo.orderField]=s,t[BJUI.pageInfo.orderDirection]=e,t[BJUI.pageInfo.pageSize]=v.paging.pageSize,t[BJUI.pageInfo.pageCurrent]=v.paging.pageCurrent,this.loadData(t,!0)):(d(o),this.initTbody(o,!0)):(d(n),this.createTrs(n,!0))}},quickFilter:function(n,t){if(v.isDom){if("remote"!=y.local)return void BJUI.debug("Datagrid Plugin: Please change the local option is remote!");if(!y.dataUrl)return void BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!")}n.th;var e,i=v.data,a=v.allData,o=n.name,s=function(t,e,i){var a=!1;switch(t){case"=":a=String(e)==String(i);break;case"!=":a=String(e)!=String(i);break;case">":a=parseFloat(i)>parseFloat(e);break;case"<":a=parseFloat(i)<parseFloat(e);break;case"like":a="select"==n.type?String(e)==String(i):0<=String(i).indexOf(String(e))}return a},l=function(t,i){return j.grep(t,function(t,e){return a=t,n=0,j.each(i,function(t,e){var i=e.datas;if(n++,!i)return n--,e.model.isFiltered=!1,e.model.th.trigger("bjui.datagrid.th.filter",[!1]),e.model.quickfilter&&e.model.quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0;e.model.isFiltered=!0,e.model.th.trigger("bjui.datagrid.th.filter",[!0]),i.andor?"and"==i.andor?s(i.operatorA,i.valA,a[t])&&s(i.operatorB,i.valB,a[t])&&n--:"or"==i.andor&&(s(i.operatorA,i.valA,a[t])||s(i.operatorB,i.valB,a[t]))&&n--:i.operatorB?s(i.operatorB,i.valB,a[t])&&n--:s(i.operatorA,i.valA,a[t])&&n--}),!n;var a,n})};v.filterDatas||(v.filterDatas={}),y.filterMult||(v.filterDatas={}),v.filterDatas[o]={datas:t,model:n},"remote"!=y.local&&a&&(v.oldAllData?a=v.oldAllData.concat():v.oldAllData=a.concat()),y.filterAll?"remote"==y.local?this.loadData(this.getRemoteFilterData(),!0):(e=l(a,v.filterDatas),v.paging.pageCurrent=1,v.paging.pageCount=this.getPageCount(v.paging.pageSize,e.length),this.initTbody(e,!0)):v.isDom?this.loadData(this.getRemoteFilterData(),!0):(e=l(i,v.filterDatas),this.createTrs(e,!0))},getRemoteFilterData:function(t){var i=[];return v.filterDatas&&!j.isEmptyObject(v.filterDatas)&&(j.each(v.filterDatas,function(t,e){if(!e.datas)return e.model.isFiltered=!1,e.model.th.trigger("bjui.datagrid.th.filter",[!1]),e.model.quickfilter&&e.model.quickfilter.trigger("bjui.datagrid.thead.clearfilter"),!0;e.model.isFiltered=!0,e.model.th.trigger("bjui.datagrid.th.filter",[!0]),y.jsonPrefix&&(t=y.jsonPrefix+"."+t),e.datas.andor&&i.push({name:"andor",value:e.datas.andor}),e.datas.operatorA&&(i.push({name:t,value:e.datas.valA}),i.push({name:t+".operator",value:e.datas.operatorA})),e.datas.operatorB&&(i.push({name:t,value:e.datas.valB}),i.push({name:t+".operator",value:e.datas.operatorB}))}),t||(v.paging.pageCurrent=1)),i.push({name:BJUI.pageInfo.pageSize,value:v.paging.pageSize}),i.push({name:BJUI.pageInfo.pageCurrent,value:v.paging.pageCurrent}),i},setDomData:function(t){var n=v.columnModel,o={},e=t.attr("data-hidden-datas"),i=v.attach;return t.find("> td").each(function(t){var e=j(this),i=n[t],a=e.attr("data-val")||e.text();i.name?o[i.name]=a:o["datagrid-noname"+t]=a}),e&&(e=e.toObj()),j.extend(o,i,{gridNumber:t.index()+1},e),t.data("initData",o),o},initEditInputs:function(){var t=v.columnModel;return v.inputs=[],j.each(t,function(t,e){var i=e.name,a="",n="",o=[],s="";if(e)if(e.attrs&&"object"==typeof e.attrs&&j.each(e.attrs,function(t,e){s+=" "+t+"="+e}),e==v.linenumberColumn||e==v.checkboxColumn||e==v.editBtnsColumn)v.inputs.push("");else if(i)if(e.rule?a=' data-rule="'+e.label+"："+e.rule+'"':"date"==e.type&&(a=' data-rule="pattern('+(e.pattern||"yyyy-MM-dd")+')"'),e.type)switch(e.type){case"date":e.pattern||(e.pattern="yyyy-MM-dd"),n=' data-pattern="'+e.pattern+'"',v.inputs.push('<input type="text" name="'+i+'" data-toggle="datepicker"'+n+a+s+">");break;case"select":if(!e.items)return;j.each(e.items,function(t,e){j.each(e,function(t,e){o.push('<option value="'+t+'">'+e+"</option>")})}),v.inputs.push('<select name="'+i+'" data-toggle="selectpicker"'+a+s+' data-width="100%">'+o.join("")+"</select>");break;case"boolean":v.inputs.push('<input type="checkbox" name="'+i+'" data-toggle="icheck"'+a+s+' value="true">');break;case"lookup":v.inputs.push('<input type="text" name="'+i+'" data-toggle="lookup" data-custom-event="true"'+a+s+">");break;case"spinner":v.inputs.push('<input type="text" name="'+i+'" data-toggle="spinner"'+a+s+">");break;case"textarea":v.inputs.push('<textarea data-toggle="autoheight" rows="1"'+a+s+"></textarea>");break;default:v.inputs.push('<input type="text" name="'+i+'"'+a+s+">")}else v.inputs.push('<input type="text" name="'+i+'"'+a+s+">");else v.inputs.push("")}),v.inputs},contextmenuH:function(){var a=this;v.$tableH.on("contextmenu",function(t){v.$showhide||a.createShowhide();var e=t.pageX,i=t.pageY;j(window).width()<e+v.$showhide.width()&&(e-=v.$showhide.width()),j(window).height()<i+v.$showhide.height()&&(i-=v.$showhide.height()),v.$menu&&v.$grid.trigger("click.bjui.datagrid.filter"),v.$showhide.appendTo("body").css({left:e,top:i,opacity:1,"z-index":9999}).show(),j(document).on("click",function(t){j(t.target).closest("."+v.classnames.s_showhide).length||v.$showhide.css({left:"50%",top:0,opacity:.2,"z-index":""}).hide().appendTo(v.$grid)}),t.preventDefault(),t.stopPropagation()})},contextmenuB:function(t,a){t.contextmenu("show",{exclude:"input, .bootstrap-select",items:[{icon:"refresh",title:BJUI.getRegional("datagrid.refresh"),func:function(t,e){v.refresh()}},{title:"diver"},{icon:"plus",title:BJUI.getRegional("datagrid.add"),func:function(t,e){v.add()}},{icon:"edit",title:BJUI.getRegional("datagrid.edit"),func:function(t,e){var i=t;a&&(i=v.$tbody.find("> tr:eq("+i.index()+")")),v.doEditRow(i)}},{icon:"undo",title:BJUI.getRegional("datagrid.cancel"),func:function(t,e){var i=t;a&&(i=v.$tbody.find("> tr:eq("+i.index()+")")),i.hasClass(v.classnames.tr_edit)||(i=v.$tbody.find("> tr."+v.classnames.tr_edit)),v.doCancelEditRow(i)}},{icon:"remove",title:BJUI.getRegional("datagrid.del"),func:function(t,e){var i=t;a&&(i=v.$tbody.find("> tr:eq("+i.index()+")")),v.delRows(i)}}]})}};return a},u.prototype.createTable=function(){var t=this.options,e=this.tools;t.columns&&e.createThead(),(t.data||t.dataUrl)&&e.createTbody()},u.prototype.setColumnModel=function(){var p=this,f=p.options,t=p.$thead.find("> tr"),g=[],m=[],e=t.length;if(!p.isDom){var i;p.tools.appendColumns();var a=1<e?' rowspan="'+e+'"':"";f.showCheckboxcol&&(p.columnModel.push(p.checkboxColumn),"lock"==f.showCheckboxcol&&(p.checkboxColumn.initLock=!0),(i=j("<th"+a+'><input type="checkbox" data-toggle="icheck"></th>')).prependTo(t.first()),a&&i.data("datagrid.column",p.checkboxColumn)),f.showLinenumber&&(p.columnModel.unshift(p.linenumberColumn),"lock"==f.showLinenumber&&(p.linenumberColumn.initLock=!0),(i=j('<th class="datagrid-linenumber-td"'+a+">No.</th>")).prependTo(t.first()),a&&i.data("datagrid.column",p.linenumberColumn)),f.showEditbtnscol&&(p.columnModel[i.index()]=p.editBtnsColumn,(i=j("<th"+a+">Edit</th>")).appendTo(t.first()),a&&i.data("datagrid.column",p.editBtnsColumn))}t.length&&1==e?(t.height(25),t.find("> th").each(function(t){var e=j(this).addClass("single-row"),i=e.data("options"),a=e.attr("width")||e.outerWidth(),n=e.html();p.columnModel.length&&p.columnModel[t]?i=p.columnModel[t]:(i&&"string"==typeof i&&(i=i.toObj()),"object"!=typeof i&&(i={}),i.index=t,i.label=n,i.width=void 0===i.width?a:i.width,i.menu=void 0===i.menu||i.menu,i.lock=void 0===i.lock||i.lock,i.hide=void 0!==i.hide&&i.hide,i.edit=void 0===i.edit||i.edit,i.add=void 0===i.add||i.add,i.quicksort=void 0===i.quicksort||i.quicksort,p.columnModel[t]=i),(i.th=e).html('<div><div class="datagrid-space"></div><div class="datagrid-label">'+n+'</div><div class="'+p.classnames.th_cell+'"><div class="'+p.classnames.th_resizemark+'"></div></div></div>'),i.menu&&f.columnMenu&&e.addClass(p.classnames.th_menu),f.fieldSortable&&i.quicksort&&e.addClass("datagrid-quicksort-th"),i.align&&e.attr("align",i.align),e.data("index",t).find("> div").css("height","24px")})):t.each(function(t){var d=[],c=[],u=-1,h=0;g.length&&(d=g.concat(),c=m.concat()),g=[],m=[],j(this).height(25).find("> th").each(function(t){var e=j(this),i=e.data("options")||e.data("datagrid.column")||{},a=parseInt(e.attr("colspan")||0),n=parseInt(e.attr("rowspan")||0),o=e.attr("width")||e.outerWidth(),s=e.html();if(i&&"string"==typeof i&&(i=i.toObj()),"object"!=typeof i&&(i={}),-[1]||1!=a||(a=0),i.label=s,i.th=e,i.gridCheckbox&&(i.label="Checkbox"),u++,a){i.colspan=a;for(var l=d.length?d[u]:u,r=l;r<l+a;r++)g[h++]=r,m[h-1]=i;u+=a-1,e.data("index",u),d.length&&(i.parent=c[u])}n&&1!=n||e.addClass("single-row"),a?e.html('<div style="height:'+(n?24*n:24)+'px;"><div class="datagrid-space"></div><div class="datagrid-label">'+s+'</div><div class="'+p.classnames.th_cell+'"><div class="'+p.classnames.th_resizemark+'"></div></div></div>'):(i.width=void 0===i.width?o:i.width,i.menu=void 0===i.menu||i.menu,i.lock=void 0===i.lock||i.lock,i.hide=void 0!==i.hide&&i.hide,i.edit=void 0===i.edit||i.edit,i.add=void 0===i.add||i.add,i.quicksort=void 0===i.quicksort||i.quicksort,e.html('<div style="height:'+(n?24*n:24)+'px;"><div class="datagrid-space"></div><div class="datagrid-label">'+s+'</div><div class="'+p.classnames.th_cell+'"><div class="'+p.classnames.th_resizemark+'"></div></div></div>'),i.menu&&f.columnMenu&&e.addClass(p.classnames.th_menu),f.fieldSortable&&i.quicksort&&e.addClass("datagrid-quicksort-th"),i.align&&e.attr("align",i.align),d.length?(i.index=d[u],i.parent=c[u],p.columnModel[d[u]]=i):(i.index=u,p.columnModel[u]=i),e.data("index",i.index))})})},u.prototype.init=function(){if(this.$element.isTag("table")&&!this.$element.data("bjui.datagrid.init")){var t,e=this,i=e.tools,a=e.$element.parent();e.options.options&&("string"==typeof e.options.options&&(e.options.options=e.options.options.toObj()),j.extend(e.options,"object"==typeof e.options.options&&e.options.options)),e.parentH=a.height(),t=e.options,e.$element.data("bjui.datagrid.init",!0),t.width||a.width(),String(t.width).endsWith("%")&&Math.round(a.width()*parseInt(String(t.width).replace("%",""))/100),t.height=t.height||300,e.isDom=!1,e.columnModel=[],e.inputs=[],e.$grid=j('<div class="bjui-datagrid"></div>').width(t.width).height(t.height),e.$boxH=j('<div class="datagrid-box-h"></div>'),e.$boxB=j('<div class="datagrid-box-b"></div>'),e.$boxM=j('<div class="datagrid-box-m"></div>').appendTo(e.$grid),e.regional=BJUI.regional.datagrid,e.$element.before(e.$grid),"string"==typeof t.paging&&(t.paging=t.paging.toObj()),e.paging=j.extend({},{pageSize:30,selectPageSize:"30,60,90",pageCurrent:1,total:0,showPagenum:5},"object"==typeof t.paging&&t.paging),e.attach={gridNumber:0,gridCheckbox:"#checkbox#",gridEdit:"#edit#"},e.$thead=e.$element.find("> thead"),e.$tbody=e.$element.find("> tbody"),e.$tbody&&e.$tbody.find("> tr").length&&(e.isDom=!0),t.columns?("string"==typeof t.columns&&(t.columns.trim().startsWith("[")?t.columns=t.columns.toObj():t.columns=t.columns.toFunc()),"function"==typeof t.columns&&(t.columns=t.columns.call()),e.$thead=null,i.createThead()):e.$thead&&e.$thead.length&&e.$thead.find("> tr").length&&e.setColumnModel(),e.initTop(),e.$grid.data("bjui.datagrid.table",e.$element.clone()),e.isDom?(i.appendColumns(),e.$tbody.find("> tr > td").each(function(){var t=j(this),e=t.html();t.html("<div>"+e+"</div>")}),e.paging.total?e.paging.pageCount=i.getPageCount(e.paging.pageSize,e.paging.total):(e.paging.total=e.$tbody.find("> tr").length,e.paging.pageCount=1),e.paging.pageCurrent=1,e.initThead()):(e.$tbody=null,(t.data||t.dataUrl)&&i.createTbody())}},u.prototype.refresh=function(){var t=this,e=t.options,i=t.tools,a=(t.isDom,BJUI.pageInfo),n=t.paging,o={};if(!e.dataUrl)return e.data&&e.data.length?void i.initTbody(t.allData,!0):void BJUI.debug("Datagrid Plugin: Not Set the dataUrl option!");o[a.pageSize]=n.pageSize,o[a.pageCurrent]=n.pageCurrent,i.loadData(o,!0),t.filterDatas=null,j.each(t.columnModel,function(t,e){e.th.trigger("bjui.datagrid.th.filter",[!1]),e.isFiltered=!1,e.quickfilter&&e.quickfilter.trigger("bjui.datagrid.thead.clearfilter")}),t.$thead.find("> tr > th.datagrid-quicksort-th").find("> div > .datagrid-label > i").remove()},u.prototype.destroy=function(){var t=this.$grid.data("bjui.datagrid.table");t&&(this.$element.html(t.html()).insertBefore(this.$grid),this.$grid.remove())},u.prototype.initTop=function(){var i,a=this,n=a.options,t=(a.regional,!1),o='<button type="button" class="btn" data-icon=""></button>';if(n.gridTitle&&(a.$boxT=j('<div class="datagrid-title">'+n.gridTitle+"</div>"),a.$boxT.appendTo(a.$grid)),n.showToolbar&&(n.toolbarItem||n.toolbarCustom)){if(a.$toolbar=j('<div class="datagrid-toolbar"></div'),n.toolbarItem&&(t=!0,0<=n.toolbarItem.indexOf("all")&&(n.toolbarItem="add, edit, cancel, save, |, del, |, refresh, |, import, export"),j.each(n.toolbarItem.split(","),function(t,e){if(e=e.trim().toLocaleLowerCase(),(!i||"|"==e)&&(i=j('<div class="btn-group" role="group"></div>').appendTo(a.$toolbar),"|"==e))return!0;"add"==e?a.$toolbar_add=j(o).attr("data-icon","plus").addClass("btn-blue").text(BJUI.getRegional("datagrid.add")).appendTo(i).on("click",function(t){a.add()}):"edit"==e?a.$toolbar_edit=j(o).attr("data-icon","edit").addClass("btn-green").text(BJUI.getRegional("datagrid.edit")).appendTo(i).on("click",function(t){var e=a.$tbody.find("> tr."+a.classnames.tr_selected);e.length?n.inlineEditMult?a.doEditRow(e):a.$lastSelect?a.doEditRow(a.$lastSelect):a.doEditRow(e.first()):j(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"cancel"==e?a.$toolbar_calcel=j(o).attr("data-icon","undo").addClass("btn-orange").text(BJUI.getRegional("datagrid.cancel")).appendTo(i).on("click",function(t){a.doCancelEditRow(a.$tbody.find("> tr."+a.classnames.tr_edit))}):"save"==e?a.$toolbar_save=j(o).attr("data-icon","save").addClass("btn-default").text(BJUI.getRegional("datagrid.save")).appendTo(i).on("click",function(t){a.doSaveEditRow()}):"del"==e?a.$toolbar_del=j(o).attr("data-icon","times").addClass("btn-red").text(BJUI.getRegional("datagrid.del")).appendTo(i).on("click",function(t){var e=a.$tbody.find("> tr."+a.classnames.tr_selected);e.length?a.delRows(e):j(this).alertmsg("info",BJUI.getRegional("datagrid.selectMsg"))}):"refresh"==e?a.$toolbar_refresh=j(o).attr("data-icon","refresh").addClass("btn-green").text(BJUI.getRegional("datagrid.refresh")).appendTo(i).on("click",function(t){a.refresh()}):"import"==e?a.$toolbar_add=j(o).attr("data-icon","sign-in").addClass("btn-blue").text(BJUI.getRegional("datagrid.import")).appendTo(i).on("click",function(t){if(n.importOption){var e=n.importOption;"string"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&("dialog"==e.type?a.$grid.dialog(e.options):"navtab"==e.type?a.$grid.navtab(e.options):a.$grid.bjuiajax("doAjax",e.options))}}):"export"==e&&(a.$toolbar_add=j(o).attr("data-icon","sign-out").addClass("btn-green").text(BJUI.getRegional("datagrid.export")).appendTo(i).on("click",function(t){if(n.exportOption){var e=n.exportOption;"string"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&("dialog"==e.type?a.$grid.dialog(e.options):"navtab"==e.type?a.$grid.navtab(e.options):"file"==e.type?j.fileDownload(e.options.url,{failCallback:function(t,e){t.trim().startsWith("{")&&(t=t.toObj()),a.$grid.bjuiajax("ajaxDone",t)}}):a.$grid.bjuiajax("doAjax",e.options))}}))})),n.toolbarCustom){var e,s=j('<div style="display:inline-block;"></div>');if("string"==typeof n.toolbarCustom){var l=j(n.toolbarCustom);l&&l.length?e=l:(l=l.toFunc())&&"string"==typeof(e=l.call(a))&&(e=j(e))}else"function"==typeof n.toolbarCustom?"string"==typeof(e=n.toolbarCustom.call(a))&&(e=j(e)):e=n.toolbarCustom;e&&e.length&&"string"!=typeof e&&(t&&s.css("margin-left","5px"),s.appendTo(a.$toolbar),e.appendTo(s))}a.$toolbar.appendTo(a.$grid)}},u.prototype.initThead=function(){var i,n=this,t=n.options,e=n.tools,a=n.columnModel,o=[],s=n.$tbody.find("> tr:first-child > td");n.init_thead=!0,n.$colgroupH=j("<colgroup></colgroup>"),n.$tableH=j('<table class="table table-bordered"></table>').append(n.$thead),n.$trsH=n.$thead.find("> tr"),n.table_width=0,j.each(n.columnModel,function(t,e){i=e.width?e.width:s.eq(t).outerWidth()||50,o.push('<col style="width:'+i+'px;">'),e.width=i,n.table_width+=i}),n.$thead.before(n.$colgroupH.append(o.join(""))),n.$grid.append(n.$boxH.append(j('<div class="datagrid-wrap-h"></div>').append(n.$tableH)));var l=n.$trsH.find("> th");l.filter(".datagrid-quicksort-th").on("click.bjui.datagrid.quicksort",function(t){j(t.target).closest("."+n.classnames.th_cell).length||n.isResize||e.quickSort(a[j(this).data("index")])}),l.filter(".datagrid-column-menu").on("bjui.datagrid.th.filter",function(t,e){var i=j(this),a=i.find("> div > ."+n.classnames.th_cell+"> ."+n.classnames.btn_menu+"> .btn");e?(i.addClass("filter-active"),a.find("> i").attr("class","fa fa-filter")):(i.removeClass("filter-active"),a.find("> i").attr("class","fa fa-bars"))}),t.contextMenuH&&e.contextmenuH(),n.initTbody(),t.columnResize&&n.colResize(),t.columnMenu&&n.colMenu(),t.paging&&n.initPaging(),t.editMode&&n.edit(),n.resizeGrid();var r=function(){t.showTfoot&&n.initTfoot(),n.initLock(),n.$grid.initui(),t.height&&e.fixedH(),setTimeout(function(){n.fixedWidth("init")},500),n.initEvents()};t.filterThead?n.delayRender?n.delayFilterTimeout=setInterval(function(){n.delayRender||(clearInterval(n.delayFilterTimeout),n.filterInThead(),r())},100):(n.filterInThead(),r()):r()},u.prototype.fixedWidth=function(t){var e,i,a,n=this,o=n.options,s=0,l=n.columnModel,r=l.length;if(!t||!n.initFixedW){n.initFixedW=!0;var d=function(){n.$boxH.find("> div").css("width",""),n.$boxB.find("> div").css("width",""),n.$boxF&&n.$boxF.find("> div").css("width",""),n.$pagingCon&&n.$pagingCon.css("width",""),(e=n.$boxB.find("> div").width())&&(n.$boxB.find("> div").width(e),n.$boxH.find("> div").width(e),n.$boxF&&n.$boxF.find("> div").width(e),n.table_width>e?n.$pagingCon&&n.$pagingCon.width(e):n.$pagingCon&&n.$pagingCon.width(n.table_width))};o.fullGrid?(d(),e&&e<n.table_width&&(l[r-1]==n.editBtnsColumn&&(s+=n.editBtnsColumn.width,r--),l[0]==n.linenumberColumn&&(s+=n.linenumberColumn.width,r--),l[0]!=n.checkboxColumn&&l[1]!=n.checkboxColumn||(s+=n.checkboxColumn.width,r--),(i=parseInt((e-n.table_width-s)/r))?i--:i=-1,j.each(l,function(t,e){if(e==n.linenumberColumn||e==n.checkboxColumn||e==n.editBtnsColumn)return!0;(a=e.width+i)<=0&&(a=1),n.$colgroupH.find("> col:eq("+e.index+")").width(a),n.$colgroupB.find("> col:eq("+e.index+")").width(a),n.$colgroupF&&n.$colgroupF.find("> col:eq("+e.index+")").width(a),e.new_width=a}))):d()}},u.prototype.initTbody=function(){var t=this,e=t.options,i=(t.tools,t.$tbody.find("> tr").find("> td"),"0");t.init_tbody=!0,t.$colgroupB=t.$colgroupH.clone(),t.$tableB=t.$element,t.$tableB.removeAttr("data-toggle width").empty().append(t.$tbody),t.$tbody.before(t.$colgroupB),t.$grid.append(t.$boxB.append(j('<div class="datagrid-wrap-b"></div>').append(t.$tableB))),-[1]||(i="auto"),e.fullGrid&&(i="100%"),t.$tableH.width(i),t.$tableB.width(i),t.$tableB.addClass("table table-bordered").removeClass("table-hover"),t.$boxB.scroll(function(){t.$boxH.find("> div").prop("scrollLeft",this.scrollLeft),t.$boxF&&t.$boxF.find("> div").prop("scrollLeft",this.scrollLeft),t.$lockB&&t.$lockB.prop("scrollTop",this.scrollTop)}),t.isDom&&(e.showLinenumber&&t.showLinenumber(e.showLinenumber),e.showCheckboxcol&&t.showCheckboxcol(e.showCheckboxcol),e.showEditbtnscol&&t.showEditCol(e.showEditbtnscol),t.$grid.data(t.datanames.tbody,t.$tbody.clone()))},u.prototype.initEvents=function(t){var l=this,e=l.options,i=l.$tbody.find("> tr");t||(t=i),t.on("click.bjui.datagrid.tr",function(t,e){var i,a=j(this),n=a.index(),o=l.$tbody.find("> tr."+l.classnames.tr_selected),s=l.$lastSelect;l.$lockTbody&&l.$lockTbody.find("> tr");if(e)(i=e.is(":checked"))||(l.$lastSelect=a),l.selectedRows(a,!i);else{if(a.hasClass(l.classnames.tr_edit))return;BJUI.KeyPressed.ctrl||BJUI.KeyPressed.shift?(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),BJUI.KeyPressed.ctrl?(a.hasClass(l.classnames.tr_selected)||(l.$lastSelect=a),l.selectedRows(a)):BJUI.KeyPressed.shift&&(s||(s=l.$lastSelect=a),s.length&&(l.selectedRows(null),s.index()!=n?s.index()>n?l.selectedRows(a.nextUntil(s).add(a).add(s),!0):l.selectedRows(a.prevUntil(s).add(a).add(s),!0):l.selectedRows(n)))):1<o.length&&a.hasClass(l.classnames.tr_selected)?(l.selectedRows(o.not(a)),l.$lastSelect=a):(o.length&&o[0]!=this&&l.selectedRows(null),a.hasClass(l.classnames.tr_selected)||(l.$lastSelect=a),l.selectedRows(a))}}).on("mouseenter.bjui.datagrid",function(t){var e=j(this),i=e.index();e.addClass("datagrid-hover"),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+i+")").addClass("datagrid-hover")}).on("mouseleave.bjui.datagrid",function(t){var e=j(this),i=e.index();e.removeClass("datagrid-hover"),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+i+")").removeClass("datagrid-hover")}).on("bjui.datagrid.tr.delete",function(t){var e,i=j(this),a=i.index(),n=l.data,o=l.allData,s=l.$lockTbody&&l.$lockTbody.find("> tr");l.isDom||(e=n[a].gridIndex,l.data=n.remove(a),l.allData=o.remove(e)),l.columnModel[0]==l.linenumberColumn&&(i.nextAll().each(function(){var t=j(this).find("> td:eq(0)"),e=parseInt(t.text());t.text(e-1)}),s&&s.eq(a).trigger("bjui.datagrid.tr.delete",[a])),i.remove()}),e.contextMenuB&&t.each(function(){l.tools.contextmenuB(j(this))}),t.each(function(){var t=j(this);t.find("> td."+l.classnames.td_checkbox).find("input").on("ifClicked",function(){t.trigger("click.bjui.datagrid.tr",[j(this)])})}),l.checkboxColumn&&l.checkboxColumn.th&&l.checkboxColumn.th.find("input").on("ifChanged",function(){var t=j(this).is(":checked"),e=l.$tbody.find("> tr");l.selectedRows(e,t)})},u.prototype.initTfoot=function(){var t=this,e=t.options,i=t.tools,a=t.columnModel,n=j("<tr></tr>");t.$boxF=j('<div class="datagrid-box-f"></div>'),t.$colgroupF=t.$colgroupH.clone(),t.$tableF=t.$tableH.clone().empty(),t.$tableF.append(t.$colgroupF),t.$boxF.append(j('<div class="datagrid-wrap-h"></div>').append(t.$tableF)),t.$boxF.insertAfter(t.$boxB),t.$tfoot=j("<thead></thead>"),j.each(a,function(t,e){var i=j("<th><div></div></th>");if(e.calc){var a='<div><div class="datagrid-calcbox">#tit#</div>#number#</div>';"avg"==e.calc?i.html(a.replace("#tit#",e.calcTit||"AVG").replace("#number#",(e.calc_sum/e.calc_count).toFixed(e.calcDecimal||2))):"count"==e.calc?i.html(a.replace("#tit#",e.calcTit||"COUNT").replace("#number#",e.calc_count)):"sum"==e.calc?i.html(a.replace("#tit#",e.calcTit||"SUM").replace("#number#",e.calc_sum)):"max"==e.calc?i.html(a.replace("#tit#",e.calcTit||"MAX").replace("#number#",e.calc_max)):"min"==e.calc&&i.html(a.replace("#tit#",e.calcTit||"MIN").replace("#number#",e.calc_min))}e.hidden&&i.css("display","none"),i.appendTo(n)}),t.$tfoot.append(n).appendTo(t.$tableF),t.$tfoot.on("bjui.datagrid.tfoot.resizeH",function(){i.setBoxbH(e.height)})},u.prototype.selectedRows=function(t,i){var a=this,n=a.$lockTbody&&a.$lockTbody.find("> tr"),e=a.$tbody.find("> tr"),o=function(t){void 0===i&&(i=!0),e.eq(t).toggleClass(a.classnames.tr_selected,i).find("> td."+a.classnames.td_checkbox+" input").iCheck(i?"check":"uncheck"),n&&n.eq(t).toggleClass(a.classnames.tr_selected,i).find("> td."+a.classnames.td_checkbox+" input").iCheck(i?"check":"uncheck")};null==t?(e.removeClass(a.classnames.tr_selected).find("> td."+a.classnames.td_checkbox+" input").iCheck("uncheck"),n&&n.removeClass(a.classnames.tr_selected).find("> td."+a.classnames.td_checkbox+" input").iCheck("uncheck")):"object"==typeof t?t.each(function(){var t=j(this),e=t.index();void 0!==i?o(e):(t.toggleClass(a.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("> td."+a.classnames.td_checkbox+" input").iCheck(t.hasClass(a.classnames.tr_selected)?"check":"uncheck"),n&&n.eq(e).toggleClass(a.classnames.tr_selected).trigger("bjui.datagrid.tr.selected").find("> td."+a.classnames.td_checkbox+" input").iCheck(t.hasClass(a.classnames.tr_selected)?"check":"uncheck"))}):isNaN(t)?j.each(t.split(","),function(t,e){o(parseInt(e.trim()))}):isNaN(t)||o(parseInt(t)),a.$lastSelect&&!a.$lastSelect.hasClass(a.classnames.tr_selected)&&(a.$lastSelect=null),a.$element.data("selectedTrs",a.$tbody.find("> tr."+a.classnames.tr_selected))},u.prototype.initLock=function(){var i=this;i.columnModel;i.col_lock_count=0,j.each(i.columnModel,function(t,e){e.initLock&&i.col_lock_count++}),i.col_lock_count&&i.doLock()},u.prototype.colLock=function(t,e){var i,a,n=this;if("number"==j.type(t)){if((i=parseInt(t))<0||i>n.columnModel.length-1)return;(a=n.columnModel[i]).th}else i=t.data("index"),a=n.columnModel[i];a!=n.editBtnsColumn&&a.index!=n.columnModel.length-1&&(void 0===a.locked&&(a.locked=!1),a.locked!=e&&((a.initLock=e)?n.col_lock_count++:n.col_lock_count--,n.col_lock_count<0&&(n.col_lock_count=0),n.doLock()))},u.prototype.fixedLockItem=function(t){var n=this,o=n.columnModel,a=n.$thead.find("> tr.datagrid-filter > th"),e=n.$lockTbody&&n.$lockTbody.find("> tr");t?(a&&a.length&&n.$lockThead.find("> tr.datagrid-filter > th:visible").each(function(){var t=j(this),e=t.index(),i=a.eq(e);i.clone().html("").insertAfter(i),i.show().insertAfter(t),t.remove()}),e&&e.length&&e.filter("."+n.classnames.tr_edit).each(function(){var t=j(this),a=t.index();t.find("> td."+n.classnames.td_edit+":visible").each(function(){var t,e=j(this),i=e.index();o[i].locked&&((t=n.$tbody.find("> tr:eq("+a+")").find("> td:eq("+i+")")).clone().insertAfter(t),t.show().insertAfter(e),e.remove())})})):(a&&a.length&&n.$lockThead&&n.$lockThead.find("> tr.datagrid-filter > th:visible").each(function(){var t=j(this),e=t.index(),i=a.eq(e);t.clone().insertAfter(t),t.hide().insertAfter(i),i.remove()}),e&&e.length&&e.filter("."+n.classnames.tr_edit).each(function(){var t,e=j(this),i=e.find("> td:eq("+o.lockIndex+")"),a=e.index();i.hasClass(n.classnames.td_edit)&&(t=n.$tbody.find("> tr:eq("+a+")").find("> td:eq("+index+")"),i.clone().insertAfter(i),i.hide().insertAfter(t),t.remove())}))},u.prototype.doLock=function(){var a,n,i=this,o=(i.options,i.tools),t=i.columnModel,s=(i.$tableH.width(),0),l=0,e=i.$boxF&&!0,r=0;i.$lockBox&&i.$lockBox.length?(i.fixedLockItem(),i.$lockTableH.empty(),i.$lockTableB.empty(),i.$lockTableF&&i.$lockTableF.empty()):(i.$lockBox=j('<div class="datagrid-box-l"></div>'),i.$lockH=j('<div class="datagrid-box-h"></div>'),i.$lockB=j('<div class="datagrid-box-b"></div>'),i.$lockF=j('<div class="datagrid-box-f"></div>'),i.$lockTableH=j('<table class="table table-bordered"></table>'),i.$lockTableB=j("<table></table>").addClass(i.$tableB.attr("class")),i.$lockTableF=j('<table class="table table-bordered"></table>'),i.$lockH.append(i.$lockTableH),i.$lockB.append(i.$lockTableB),i.$lockF.append(i.$lockTableF),i.$lockBox.append(i.$lockH).append(i.$lockB).prependTo(i.$grid),e&&(i.$lockBox.append(i.$lockF),i.$lockF.css("margin-top",i.$boxB.outerHeight()-i.$boxB[0].clientHeight).height(i.$boxF.outerHeight()))),i.$boxT&&(r+=i.$boxT.outerHeight()),i.$toolbar&&(r+=i.$toolbar.outerHeight()),r&&i.$lockBox.css({top:r}),j.each(t,function(t,e){e.lockShow=!1,e.lockHide=!1,e.initLock?(e.hidden&&o.showhide(e,!0),e.lockHide=!0,e.locked=!0,e.lockIndex=l++,s+=e.width):(e.lockShow=!0,e.hidden?e.lockShow=!1:o.showhide(e,!1),e.locked&&(e.lockShow=!0),e.locked=!1)}),i.$lockThead=i.$thead.clone(!0),i.$lockTbody=i.$tbody.clone(),i.$lockColgroupH=i.$colgroupH.clone(),i.$lockColgroupB=i.$colgroupB.clone(),i.$lockTableH.append(i.$lockColgroupH).append(i.$lockThead).css("width",s),i.$lockTableB.append(i.$lockColgroupB).append(i.$lockTbody).css("width",s),e&&(i.$lockTfoot=i.$tableF.find("> thead").clone(),i.$lockColgroupF=i.$colgroupF.clone(),i.$lockTableF.append(i.$lockColgroupF).append(i.$lockTfoot).css("width",s)),j.each(i.columnModel,function(t,e){e.lockShow&&o.showhide(e,!0),e.lockHide&&o.showhide(e,!1)}),i.$boxH.find("> div").css("width",""),i.$boxB.find("> div").css("width",""),i.$boxF&&i.$boxF.find("> div").css("width",""),setTimeout(function(){var t=i.$boxB.find("> div").width();i.$boxB.find("> div").width(t),i.$boxH.find("> div").width(t),i.$boxF&&i.$boxF.find("> div").width(t)},50),0==i.col_lock_count?i.$lockBox.hide():i.$lockBox.show(),1<s&&(s-=1),i.$boxH.css("margin-left",s),i.$boxB.css("margin-left",s),e&&i.$boxF.css("margin-left",s),i.$lockB.height(i.$boxB[0].clientHeight),i.$lockB.prop("scrollTop",i.$boxB[0].scrollTop);var d=i.$lockTableH.height(),c=i.$thead.height(),u=i.$lockTableF&&i.$lockTableF.height(),h=i.$tableF&&i.$tableF.height();d!=c&&(d<c?i.$lockTableH.height(c):i.$tableH.height(d)),u&&h&&u!=h&&(u<h?i.$lockTableF.find("> thead > tr:first-child > th:visible:first").height(h):i.$tableF.find("> thead > tr:first-child > th:visible:first").height(u)),n=i.$lockTbody.find("> tr"),a=i.$tbody.find("> tr"),setTimeout(function(){var t=i.$lockTableB.height(),e=i.$tableB.height();t!=e&&(e<t?n.each(function(t){var e=j(this),i=e.find("> td:visible:first").outerHeight();30<i&&(e.height(i),a.eq(t).height(i))}):a.each(function(t){var e=j(this),i=e.find("> td:visible:first").outerHeight();30<i&&(e.height(i),n.eq(t).height(i))}))},20),i.fixedLockItem(1),n.find("> td:hidden").remove(),i.initLockEvents(n)},u.prototype.initLockEvents=function(t){if(this.$lockTbody){var a=this,e=a.options;t||(t=a.$lockTbody.find("> tr")),t.on("click.bjui.datagrid.tr",function(){var t=j(this).index();a.$tbody.find("> tr:eq("+t+")").trigger("click.bjui.datagrid.tr")}).on("bjui.datagrid.tr.delete",function(t,e){var i=j(this);a.linenumberColumn&&a.linenumberColumn.locked&&i.nextAll().each(function(){var t=j(this).find("> td:eq(0)"),e=parseInt(t.text());t.text(e-1)}),i.remove()}).find("> td."+a.classnames.td_checkbox+" input").on("ifChanged",function(){var t=j(this),e=t.closest("tr"),i=e.index();t.is(":checked")?(e.addClass(a.classnames.tr_selected),$trs.eq(i).addClass(a.classnames.tr_selected)):(e.removeClass(a.classnames.tr_selected),$trs.eq(i).removeClass(a.classnames.tr_selected))}),e.contextMenuB&&t.each(function(){a.tools.contextmenuB(j(this),!0)})}},u.prototype.filterInThead=function(){var r=this,i=(r.options,r.tools),d=r.regional,t=r.columnModel,c=j('<tr class="datagrid-filter"></tr>'),u=function(t,e){i.quickFilter(t,e?{operatorA:"like",valA:e}:null)};r.inputs&&r.inputs.length||i.initEditInputs(),j.each(t,function(t,e){var a,n,i,o,s=j(r.inputs[t]),l=j("<th></th>");"spinner"==e.type?s=j('<input type="text" name="'+e.name+'">'):"boolean"==e.type?s=j(BJUI.doRegional('<select name="'+e.name+'" data-toggle="selectpicker"><option value="">#all#</option><option value="true">#true#</option><option value="false">#false#</option></select>',d)):"select"==e.type&&s.find("> option:first-child").val()&&(s=j('<select name="'+e.name+'" data-toggle="selectpicker"></select>').append(BJUI.doRegional('<option value="">#all#</option>',d)).append(s.html())),l.append(s),e.hidden&&l.hide(),"boolean"==e.type&&l.attr("align","center"),l.appendTo(c),s.data("clearFilter",!1),a=s,i=l,"date"==(o=(n=e).type)?a.on("afterchange.bjui.datepicker",function(t,e){u(n,a.val())}).change(function(){u(n,a.val())}):("lookup"==o&&i.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var i in e)n.name==i&&(a.val(e[i]),u(n,e[i]))}),a.change(function(){u(n,a.val())})),s.on("bjui.datagrid.thead.clearfilter",function(){s.val(""),"boolean"!=e.type&&"select"!=e.type||s.selectpicker("refresh")}),e.quickfilter=s}),c.appendTo(r.$thead).initui()},u.prototype.showLinenumber=function(t){var e=this,i=e.options,a=e.columnModel,n=a[0];e.data;if(n==e.linenumberColumn)"string"!=typeof t||"lock"!=t&&"unlock"!=t?e.showhideColumn(n.th,!!t):e.colLock(n.th,"lock"==t);else if(t){var o,s=e.$thead.find("> tr"),l='<col style="width:30px;">',r=s.filter(".datagrid-filter"),d=s.length-r.length;n=e.linenumberColumn,a.unshift(n),e.$colgroupH.prepend(l),e.$colgroupB.prepend(l),e.$colgroupF&&e.$colgroupF.prepend(l),o=j('<th align="center" rowspan="'+d+'" class="'+e.classnames.td_linenumber+'">'+e.linenumberColumn.label+"</th>"),s.first().prepend(o),r.length&&r.prepend("<th></th>"),n.th=o,n.index=0,n.width=30,e.$tbody.find("> tr").each(function(t){j(this).prepend('<td align="center" class="'+e.classnames.td_linenumber+'">'+(t+1)+"</td>")}),e.$tableF&&e.$tableF.find("> thead > tr").prepend("<th></th>"),j.each(a,function(t,e){e.index=t,e.th&&e.th.data("index",t)}),"lock"==t&&e.colLock(o,!0),e.$showhide&&(e.$showhide.remove(),e.colShowhide(i.columnShowhide))}},u.prototype.showCheckboxcol=function(t){var e,i=this,a=i.options,n=i.columnModel,o=n[0],s=i.data;if(n[0]==i.checkboxColumn&&(e=n[0]),n[1]==i.checkboxColumn&&(e=n[1]),e)"string"!=typeof t||"lock"!=t&&"unlock"!=t?i.showhideColumn(e.th,t):i.colLock(e.th,"lock"==t);else if(t){var l,r,d=i.$thead.find("> tr"),c='<col style="width:26px;">',u=d.filter(".datagrid-filter"),h=d.length-u.length;e=i.checkboxColumn,l=j('<th align="center" rowspan="'+h+'" class="'+i.classnames.td_checkbox+'"><div><input type="checkbox" data-toggle="icheck"></div></th>'),o==i.linenumberColumn?(n.splice(1,0,e),s&&s.splice(1,0,{name:e.name}),e.index=1,i.$colgroupH.find("> col:first").after(c),i.$colgroupB.find("> col:first").after(c),i.$colgroupF&&i.$colgroupF.find("> col:first").after(c),u.length&&u.find("> th:first").after("<th></th>"),d.first().find("> th:first").after(l),i.$tableF&&i.$tableF.find("> thead > tr > th:first").after("<th></th>")):(n.unshift(e),s&&s.unshift({name:e.name}),e.index=0,i.$colgroupH.prepend(c),i.$colgroupB.prepend(c),i.$colgroupF&&i.$colgroupF.prepend(c),u.length&&u.prepend("<th></th>"),d.first().prepend(l),i.$tableF&&i.$tableF.find("> thead > tr").prepend("<th></th>")),l.initui(),e.th=l,e.width=26,i.$tbody.find("> tr").each(function(t){r=j('<td align="center" class="'+i.classnames.td_checkbox+'"><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox"></td>'),0==e.index?j(this).prepend(r):j(this).find("> td:first").after(r),r.initui()}),j.each(n,function(t,e){e.index=t,e.th&&e.th.data("index",t)}),"lock"==t&&i.colLock(l,!0),i.$showhide&&(i.$showhide.remove(),i.colShowhide(a.columnShowhide))}},u.prototype.showEditCol=function(t){var e=this,i=e.options,a=e.columnModel,n=a[a.length-1];e.data;if(n==e.editBtnsColumn)e.showhideColumn(n.th,!!t);else if(t){var o,s,l=e.$thead.find("> tr"),r='<col style="width:110px;">',d=l.filter(".datagrid-filter"),c=l.length-d.length;n=e.editBtnsColumn,a.push(n),e.$colgroupH.append(r),e.$colgroupB.append(r),e.$colgroupF&&e.$colgroupF.append(r),o=j('<th align="center" rowspan="'+c+'">Edit</th>'),l.first().append(o),d.length&&d.append("<th></th>"),o.initui().data("index",a.length-1),n.th=o,n.width=110,n.index=a.length-1,e.$tbody.find("> tr").each(function(t){s=j('<td align="center" class="'+e.classnames.s_edit+'">'+BJUI.doRegional(FRAG.gridEditBtn,e.regional)+"</td>"),j(this).append(s),s.initui()}),e.edit(e.$tbody.find("> tr")),e.$tableF&&e.$tableF.find("> thead > tr").append("<th></th>"),e.$showhide&&(e.$showhide.remove(),e.colShowhide(i.columnShowhide))}},u.prototype.colResize=function(){var g=this,n=g.tools,m=g.columnModel,t=g.$thead,b=g.$grid.find("> .resizeProxy");b.length||(b=j('<div class="resizeProxy" style="left:0; display:none;"></div>')).appendTo(g.$grid),t.find("> tr > th").each(function(t){var a=j(this);a.find("> div > ."+g.classnames.th_cell+"> ."+g.classnames.th_resizemark).on("mousedown.bjui.datagrid.resize",function(t){var o,s,e=g.$boxH.scrollLeft(),i=parseInt(g.$boxH.css("marginLeft")||0),l=n.getRight(a)-e+i,r=a.data("index"),d=m[r],c=d.th.width(),u=g.$tbody.find("> tr"),h=g.$lockTbody&&g.$lockTbody.find("> tr"),p=g.$lockTableB&&g.$lockTableB.height(),f=g.$tableB.height();g.isResize=!0,d.locked&&(l=n.getRight4Lock(d.lockIndex),d.lockWidth&&(c=d.lockWidth)),b.show().css({left:l,bottom:g.$box_paging?g.$box_paging.outerHeight():0,cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:b,move:"horizontal",event:t,stop:function(){var t=b.position().left-l,e=t+c,i=g.$tableH.width()+t,a=g.$lockTableH&&g.$lockTableH.width()+t;if(e<5&&(e=20),d.minWidth&&e<d.minWidth&&(e=d.minWidth),e!=c+t&&(i=i-t+(e-c),a=a-t+(e-c)),d.width=e,d.locked){if(a<.75*g.$grid.width()){d.lockWidth=e,g.$lockColgroupH.find("> col:eq("+r+")").width(e),g.$lockColgroupB.find("> col:eq("+r+")").width(e),g.$lockColgroupF&&g.$lockColgroupF.find("> col:eq("+r+")").width(e),g.$lockTableH.width(a),g.$lockTableB.width(a),g.$lockTableF&&g.$lockTableF.width(a);var n=g.$lockBox.width();g.$boxH.css("margin-left",n-1),g.$boxB.css("margin-left",n-1),g.$boxF&&g.$boxF.css("margin-left",n-1),g.$colgroupH.find("> col:eq("+r+")").width(e),g.$colgroupB.find("> col:eq("+r+")").width(e),g.$colgroupF&&g.$colgroupF.find("> col:eq("+r+")").width(e)}}else setTimeout(function(){g.$colgroupH.find("> col:eq("+r+")").width(e),g.$colgroupB.find("> col:eq("+r+")").width(e),g.$colgroupF&&g.$colgroupF.find("> col:eq("+r+")").width(e)},1);setTimeout(function(){u.css("height",""),s=g.$tableB.height(),g.$lockTbody&&(h.css("height",""),(o=g.$lockTableB.height())==p&&s==f||(s<o?h.each(function(t){var e=j(this),i=e.find("> td:eq("+d.lockIndex+")").outerHeight();30<i&&(e.height(i),u.eq(t).height(i))}):u.each(function(t){var e=j(this),i=e.find("> td:eq("+r+")").outerHeight();30<i&&(e.height(i),h.eq(t).height(i))})),g.$lockB.height(g.$boxB[0].clientHeight)),d.calc&&g.$tfoot&&g.$tfoot.trigger("bjui.datagrid.tfoot.resizeH"),g.isResize=!1},10),b.hide(),g.resizeFlag=!0}})})})},u.prototype.colMenu=function(){var p=this,t=p.options,f=p.tools,e=p.regional,i=p.$trsH.find("> th."+p.classnames.th_menu),g=p.$grid.find("> ."+p.classnames.s_menu);g.legnth||((g=j(BJUI.doRegional(FRAG.gridMenu,e))).hide().appendTo(p.$grid),p.$menu=g),p.colShowhide(t.columnShowhide),i.each(function(){var c,u=j(this),t=u.data("index"),h=p.columnModel[t],e=u.find("> div > ."+p.classnames.th_cell),i=e.find("> ."+p.classnames.btn_menu);i.length||(c=j('<button class="btn btn-default"><i class="fa fa-bars"></button>'),(i=j('<div class="'+p.classnames.btn_menu+'"></div>').append(c)).appendTo(e),c.click(function(){u.closest("tr");var e,t=parseInt(u.attr("rowspan")||1),i=j(this).offset().left-p.$grid.offset().left-1,a=25*(p.$trsH.length-t)+13*t+11,n=g.find("> ul > li.datagrid-li-showhide"),o=g.data("bjui.datagrid.menu.btn");o&&o.length&&o.removeClass("active"),j(this).addClass("active"),n.length&&p.$showhide&&(p.$showhide.appendTo(n),p.$showhide.data("width")),g.css({position:"absolute",top:a,left:i}).show().data("bjui.datagrid.menu.btn",c).siblings("."+p.classnames.s_menu).hide(),e=g.outerWidth();var s,l=function(t){p.$boxH.width()-t<e?g.css({left:t-e+18}).addClass("position-right"):g.css({left:t}).removeClass("position-right")};l(i),s=c,p.$boxB.scroll(function(){var t=s.offset().left-p.$grid.offset().left-1;l(t)}),p.colFilter(u,!0),f.locking(u);var r=g.find("> ul > li."+p.classnames.li_asc),d=r.next();r.click(function(){h.sortAsc=!1,f.quickSort(h)}),d.click(function(){h.sortAsc=!0,f.quickSort(h)}),g.on("bjui.datagrid.th.sort",function(t,e){r.toggleClass("sort-active",e),d.toggleClass("sort-active",!e)})}))}),p.$grid.on("click.bjui.datagrid.filter",function(t){var e=j(t.target),i=p.$grid.find("."+p.classnames.s_menu+":visible");i.length&&!e.closest("."+p.classnames.btn_menu).length&&(e.closest("."+p.classnames.s_menu).length||i.hide().data("bjui.datagrid.menu.btn").removeClass("active"))})},u.prototype.colShowhide=function(t){var e=this,i=(e.options,e.tools),a=e.$menu,n=a.find("> ul").find("> li."+e.classnames.li_showhide);t?e.$showhide||(i.createShowhide(),i.showSubMenu(n,a,e.$showhide)):n.hide()},u.prototype.showhideColumn=function(t,e){var i,a,n=this.tools;if("number"==j.type(t)){if((i=parseInt(t))<0)return}else i=t.data("index");if(a=this.columnModel[i]){if(a.locked){if(e)return;this.colLock(a.th,e)}n.showhide(a,e)}},u.prototype.colFilter=function(s,t){var l=this,r=(l.options,l.tools),e=l.regional,d=s.data("bjui.datagrid.filter"),c=l.$menu,u=c.find("> ul > li."+l.classnames.li_filter);if(l.inputs&&l.inputs.length||r.initEditInputs(),t){if(u.find("."+l.classnames.s_filter).addClass("hide"),!d||!d.length){d=j(BJUI.doRegional(FRAG.gridFilter.replaceAll("#label#",s.text()),e)).hide().appendTo(l.$grid);var h,p,i=s.data("index"),a=l.columnModel[i],n=a.type||"string",o=a.operator||[],f=d.find("span.filter-a"),g=d.find("span.filter-b"),m=j('<select data-toggle="selectpicker" data-container="true"></select>'),b=j(l.inputs[i]);b.removeAttr("data-rule").attr("size",10).addClass("filter-input"),"string"==n||"lookup"==n?o.length||(o=["=","!=","like"]):"number"==n||"int"==n||"spinner"==n?("spinner"==n&&b.removeAttr("data-toggle"),o.length||(o=["=","!=",">","<",">=","<="])):"date"==n?o.length||(o=["=","!="]):"boolean"==n?(o.length||(o=["=","!="]),b=j(BJUI.doRegional('<select name="'+a.name+'" data-toggle="selectpicker"><option value="">#all#</option><option value="true">#true#</option><option value="false">#false#</option></select>',e))):"select"==n&&(o.length||(o=["=","!="]),b.attr("data-width","80"),b.find("> option:first-child").val()&&(b=j('<select name="'+a.name+'" data-toggle="selectpicker" data-width="80"></select>').append(BJUI.doRegional('<option value="">#all#</option>',e)).append(b.html())));for(var v=0;v<o.length;v++)m.append('<option value="'+o[v]+'">'+o[v]+"</option>");p=(h=b).clone(),f.append(m).append(b),g.append(m.clone()).append(p),s.data("bjui.datagrid.filter",d),d.appendTo(u),d.data("width",d.outerWidth()).hide().initui(),d.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var i in e)a.name==i&&b.val(e[i])});var y=d.find("button.ok"),k=d.find("button.clear"),x=d.find("select"),C=x.first(),w=x.last(),$=x.eq(1);y.click(function(){var t=C.val(),e=h.val().trim(),i=w.val(),a=p.val().trim(),n=$.val(),o={};e.length&&j.extend(o,{operatorA:t,valA:e}),a.length&&(e.length&&j.extend(o,{andor:n}),j.extend(o,{operatorB:i,valB:a})),j.isEmptyObject(o)||(r.quickFilter(l.columnModel[s.data("index")],o),l.$grid.trigger("click"),u.trigger("bjui.datagrid.th.submenu.hide",[c,d]))}),k.click(function(){var t=l.columnModel[s.data("index")];x.find("> option:first").prop("selected",!0),x.selectpicker("refresh"),h.val(""),p.val(""),t.isFiltered&&(r.quickFilter(t,null),l.$grid.trigger("click"),u.trigger("bjui.datagrid.th.submenu.hide",[c,d]))})}r.showSubMenu(u,c,d.removeClass("hide")),c.find('> ul > li:not(".'+l.classnames.li_filter+'")').on("mouseover",function(){u.hasClass("active")&&u.trigger("bjui.datagrid.th.submenu.hide",[c,d])})}else u.hide()},u.prototype.initPaging=function(){var t,o=this,s=o.tools,l=(o.options,o.paging),a=BJUI.regional.pagination,e=FRAG.gridPaging,i=[],n=l.pageCount,r=[];if(0!=l.total){for(var d=(t=s.getPageInterval(n,l.pageCurrent,l.showPagenum)).start;d<t.end;d++)i.push(FRAG.gridPageNum.replace("#num#",d).replace("#active#",l.pageCurrent==d?" active":""));e=BJUI.doRegional(e.replaceAll("#pageCurrent#",l.pageCurrent).replaceAll("#count#",l.total+"/"+parseInt(n||0)),a),o.$box_paging=j('<div class="datagrid-paging-box"></div>'),o.$pagingCon=j('<div class="paging-content"></div>').width(o.$boxB.width()),o.$refreshBtn=j('<button class="btn-default btn-refresh" title="'+a.refresh+'" data-icon="refresh"></button>'),o.$paging=j('<div class="datagrid-paging"></div>'),o.$btnpaging=j(e),o.$pagenum=j(i.join("")),o.$pagesize=j('<div class="datagrid-pagesize"><span></span></div>'),o.$selectpage=j('<select data-toggle="selectpicker"></select>'),o.$pagingCon.appendTo(o.$box_paging),o.$box_paging.appendTo(o.$grid),o.$pagesize.appendTo(o.$pagingCon),o.$refreshBtn.appendTo(o.$pagesize),o.$selectpage.appendTo(o.$pagesize),o.$paging.appendTo(o.$pagingCon),o.$btnpaging.appendTo(o.$paging),o.$pagenum.insertAfter(o.$btnpaging.find("> li.page-prev")),o.$box_paging.initui();var c=o.$btnpaging.find("> li.page-jumpto"),u=c.next(),h=u.next(),p=o.$btnpaging.find("> li.page-next"),f=p.next(),g=function(){u.addClass("disabled"),h.addClass("disabled")},m=function(){u.removeClass("disabled"),h.removeClass("disabled")},b=function(){p.addClass("disabled"),f.addClass("disabled")},v=function(){p.removeClass("disabled"),f.removeClass("disabled")},y=function(){g(),v()},k=function(){m(),b()},x=function(t){o.$selectpage.empty(),t||(t=o.paging.pageSize),(r=l.selectPageSize.split(",")).push(String(t)),j.unique(r).sort(function(t,e){return t-e}),j.each(r,function(t,e){var i=j('<option value="'+e+'">'+e+"/"+a.page+"</option>");e==l.pageSize&&i.prop("selected",!0),o.$selectpage.append(i)}),o.$selectpage.selectpicker("refresh")};1==l.pageCurrent&&y(),l.pageCurrent==l.pageCount&&(k(),1==l.pageCurrent&&g()),x(),o.$paging.on("click",".page-num",function(t){var e=j(this);e.hasClass("active")||o.jumpPage(e.text()),t.preventDefault()}).on("bjui.datagrid.paging.jump",function(t){for(var e=o.paging.pageCurrent,i=s.getPageInterval(o.paging.pageCount,e,l.showPagenum),a=[],n=i.start;n<i.end;n++)a.push(FRAG.gridPageNum.replace("#num#",n).replace("#active#",e==n?" active":""));o.$pagenum.empty(),o.$pagenum=j(a.join("")),o.$pagenum.insertAfter(h),1==e?(y(),e==o.paging.pageCount&&b()):e==o.paging.pageCount?k():(m(),v()),c.find("input").val(e),o.$btnpaging.find("> li.page-total > span").html(o.paging.total+"/"+o.paging.pageCount)}),o.$selectpage.on("bjui.datagrid.paging.pageSize",function(t,e){x(e)}),c.find("input").on("keyup",function(t){if(t.which==BJUI.keyCode.ENTER){var e=j(this).val();e&&o.jumpPage(e)}}),u.on("click",function(){1<o.paging.pageCurrent&&o.jumpPage(1)}),h.on("click",function(){1<o.paging.pageCurrent&&o.jumpPage(o.paging.pageCurrent-1)}),p.on("click",function(){o.paging.pageCurrent<o.paging.pageCount&&o.jumpPage(o.paging.pageCurrent+1)}),f.on("click",function(){o.paging.pageCurrent<o.paging.pageCount&&o.jumpPage(o.paging.pageCount)}),o.$refreshBtn.on("click",function(){o.refresh()}),o.$selectpage.on("change",function(){var t=j(this).val();o.jumpPage(null,t)})}},u.prototype.jumpPage=function(t,e){var i=this.paging,a=i.pageCount;t&&isNaN(t)||e&&isNaN(e)||t&&((t=parseInt(t))<1&&(t=1),a<t&&(t=a),t==i.pageCurrent)||e&&(e=parseInt(e))>i.total||this.tools.jumpPage(t,e)},u.prototype.add=function(t){if(this.tools.beforeEdit())if(this.options.editUrl){if(this.options.editMode){this.options.inlineEditMult||this.doCancelEditRow(this.$tbody.find("> tr."+this.classnames.tr_edit));var e,i,o=this,a=o.options,n=(o.tools,o.paging),s={},l=(n.pageCurrent-1)*n.pageSize,r=function(t){var a=j("<tr></tr>").addClass(o.classnames.tr_add),n=a.clone();return j.each(o.columnModel,function(t,e){var i=j("<td></td>");e.gridNumber?i.addClass(o.classnames.td_linenumber).text(0):e.gridCheckbox?i.addClass(o.classnames.td_checkbox).html('<div><input type="checkbox" data-toggle="icheck" name="datagrid.checkbox" value="true"></div>'):e.gridEdit?i.addClass(o.classnames.s_edit).data("isAdd",!0).html(BJUI.doRegional(FRAG.gridEditBtn,o.regional)):i.text(""),e.hidden&&i.css("display","none"),e.align&&i.attr("align",e.align),s[e.name]="",e.locked?(i.clone().show().appendTo(n),i.hide().appendTo(a)):i.appendTo(a)}),s=j.extend({},o.attach,s),o.emptyData||(o.emptyData=s),{tr:a,lockTr:n.find("> td").length?n:null}};t||(t=a.addLocation||"first"),o.$lastSelect||("prev"==t?t="first":"next"==t&&(t="last")),"first"==t?(i=0,(e=r()).tr.prependTo(o.$tbody),e.lockTr&&e.lockTr.prependTo(o.$lockTbody)):"last"==t?(i=o.data?o.data.length:0,(e=r()).tr.appendTo(o.$tbody),e.lockTr&&e.lockTr.appendTo(o.$lockTbody)):"prev"==t?(i=o.$lastSelect.index(),(e=r()).tr.insertBefore(o.$lastSelect),e.lockTr&&e.lockTr.insertBefore(o.$lockTbody.find("> tr:eq("+o.$lastSelect.index()+")"))):"next"==t&&(i=o.$lastSelect.index()+1,(e=r()).tr.insertAfter(o.$lastSelect),e.lockTr&&e.lockTr.insertAfter(o.$lockTbody.find("> tr:eq("+o.$lastSelect.index()+")")));var d=j.extend({},o.emptyData,{addFlag:!0});o.data||(o.data=[]),o.allData||(o.allData=[]),o.allData.length?o.allData.splice(i+l,0,d):o.allData.push(d),o.data.length?o.data.splice(i,0,d):o.data.push(d),j.each(o.data,function(t,e){var i=a.linenumberAll?l+(t+1):t+1;j.extend(e,{gridNumber:i,gridIndex:t})}),e.tr.initui(),setTimeout(function(){o.initEvents(e.tr)},20),e.lockTr&&o.initLockEvents(e.lockTr),o.edit(e.tr),"dialog"!=a.editMode?o.doEditRow(e.tr,"inline",!0):o.dialogEdit(e.tr,!0)}}else BJUI.debug("Datagrid Plugin: Edit url is not set!")},u.prototype.edit=function(t){var d=this,e=d.options,c=d.tools,u=e.editMode;d.columnModel;"dialog"!=u&&(u="inline"),t||(t=d.$tbody.find("> tr")),t.find("> td."+d.classnames.s_edit).each(function(){var n=j(this),o=n.find("button"),i=o.first(),s=i.next(),l=s.next(),r=l.next(),a=r.next();i.on("click",function(t,e){var i=j(this).closest("tr"),a=n.data("isAdd");if(e||(e=d.isDom?i.data("initData")||c.setDomData(i):d.data[i.index()]),!c.beforeEdit(i,e))return!1;"dialog"!=u?(d.inlineEdit(i,a),o.hide(),s.show(),r.show(),a&&(s.hide(),l.show())):d.dialogEdit(i,a),t.stopPropagation()}),l.on("click",function(t){var e=j(this),i=e.closest("tr");d.updateEdit(i,e),t.stopPropagation()}).on("bjui.datagrid.update.tr",function(){o.hide(),i.show(),a.show()}),s.on("click",function(t){var e=j(this),i=e.closest("tr");d.updateEdit(i,e),t.stopPropagation()}).on("bjui.datagrid.update.tr",function(){o.hide(),i.show(),a.show()}),r.on("click",function(t){var e=j(this).closest("tr");d.cancelEdit(e),o.hide(),i.show(),a.show(),t.stopPropagation()}),a.on("click",function(t){var e=j(this).closest("tr");d.delRows(e),t.stopPropagation()})})},u.prototype.doEditRow=function(t,i,a){var e,n,o=this,s=[];if(i=i||o.options.editMode,"object"==typeof t)e=t;else if(isNaN(t)){var l,r=o.$tbody.find("> tr");(t=(t=t.split(",")).unique()).sort(function(t,e){return t.trim()-e.trim()}),j.each(t,function(t,e){var i=r.eq(parseInt(e.trim()));i&&i.length&&(l=l?l.add(i):i)}),e=l}else isNaN(t)||(e=o.$tbody.find("> tr").eq(t));e.length&&(e.each(function(){var t,e=j(this),i=e.index();t=o.isDom?e.data("initData")||tools.setDomData(e):o.data[i],s.push(t)}),o.tools.beforeEdit(e,s)&&(o.options.editUrl?e.each(function(t){var e=j(this);n=e.find("> td."+o.classnames.s_edit+" > button.edit"),"dialog"!=i?n.length?n.trigger("click",[s[t]]):o.inlineEdit(e,a,s[t]):o.dialogEdit(e,a,s[t])}):BJUI.debug("Datagrid Plugin: Edit url is not set!")))},u.prototype.doCancelEditRow=function(t){var i=this;("number"==j.type(t)?this.$tbody.find("> tr").eq(t):t).each(function(){var t=j(this),e=t.find("> td."+i.classnames.s_edit+" > button.cancel");e.length?e.trigger("click"):i.cancelEdit(t)})},u.prototype.doSaveEditRow=function(t){var e,i=this,a=i.options;(e="number"==j.type(t)?this.$tbody.find("> tr").eq(t):t||i.$tbody.find("> tr."+i.classnames.tr_edit)).length||i.$grid.alertmsg("info",BJUI.getRegional("datagrid.saveMsg")),1==e.length?e.hasClass(i.classnames.tr_edit)&&this.updateEdit(e):a.saveAll?i.saveAll(e):e.each(function(){i.updateEdit(j(this))})},u.prototype.delRows=function(t){var i,o=this,s=o.options,e=s.beforeDelete,a=s.delConfirm;if(!e||("string"==typeof e&&(e=e.toFunc()),"function"!=typeof e||e.call(this))){if("object"==typeof t)i=t;else if(isNaN(t)){var n,l=o.$tbody.find("> tr");(t=(t=t.split(",")).unique()).sort(function(t,e){return t.trim()-e.trim()}),j.each(t,function(t,e){var i=l.eq(parseInt(e.trim()));i&&i.length&&(n=n?n.add(i):i)}),i=n}else isNaN(t)||(i=this.$tbody.find("> tr").eq(t));if(i&&i.length){var r=function(){i.each(function(){j(this).trigger("bjui.datagrid.tr.delete")}),o.tools.afterDelete()},d=function(){var t=i.filter("."+o.classnames.tr_add);if(!t.length||(t.remove(),t.length!=i.length))if(s.delUrl){var n=[],e=s.delCallback;i.each(function(){var t,i,e=j(this),a=e.index();t=o.isDom?e.data("initData")||tools.setDomData(e):o.data[a],s.delPK?n.push(t[s.delPK]):(s.jsonPrefix?(i={},j.each(t,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;i[s.jsonPrefix+"."+t]=e})):(delete(i=j.extend({},t)).gridCheckbox,delete i.gridEdit),n.push(i))}),"string"==typeof e&&(e=e.toFunc()),o.$grid.bjuiajax("doAjax",{url:s.delUrl,data:s.delPK?[{name:s.delPK,value:n.join(",")}]:{json:JSON.stringify(n)},type:s.delType,callback:e||function(t){t[BJUI.keys.statusCode]==BJUI.statusCode.ok?r():o.$grid.bjuiajax("ajaxDone",t)}})}else r()};a?("string"!=typeof a&&(a=1==i.length?BJUI.getRegional("datagrid.delMsg"):BJUI.getRegional("datagrid.delMsgM")),o.$grid.alertmsg("confirm",a,{okCall:function(){d()}})):d()}}},u.prototype.inlineEdit=function(r,d,c){if(!this.tools.beforeEdit(r,c))return!1;var u=this,t=u.options,e=u.tools,h=u.columnModel,i=r.find("> td"),p=i.length,f=r.index();if(c||(c=u.isDom?r.data("initData")||e.setDomData(r):u.data[f]),r.hasClass(u.classnames.tr_edit))return!1;u.inputs&&u.inputs.length||e.initEditInputs(),r.addClass(u.classnames.tr_edit).data(u.datanames.changeData,{}),r.data("validator")&&r.validator("destroy"),t.inlineEditMult||u.doCancelEditRow(r.siblings("."+u.classnames.tr_edit)),u.$lastEditTr=r,i.each(function(t){var i,e=j(this),s=h[t],a=s&&s.name&&c[s.name],n=e.html(),o=u.inputs[t];if(e.data(u.datanames.td_html,n),d?s.add||(o=""):s.edit||(o=""),o&&(i=j(o),"boolean"==s.type?i.prop("checked",a):(a&&"null"!=a||(a=""),i.val(String(a))),d?s.addAttrs&&"object"==typeof s.addAttrs&&j.each(s.addAttrs,function(t,e){i.attr(t,e)}):s.editAttrs&&"object"==typeof s.editAttrs&&j.each(s.editAttrs,function(t,e){i.attr(t,e)}),e.empty().append(i).addClass(u.classnames.td_edit),function(a,n,i){var o=r.data(u.datanames.changeData);switch(s.type){case"date":a.on("afterchange.bjui.datepicker",function(t,e){n.addClass(u.classnames.td_changed),a.val()==i&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()}).change(function(){n.addClass(u.classnames.td_changed),a.val()==i&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()});break;case"select":a.change(function(){n.addClass(u.classnames.td_changed),a.val()==String(i)&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()});break;case"boolean":a.on("ifChanged",function(){n.toggleClass(u.classnames.td_changed);var t=!!j(this).is(":checked");t==i&&n.removeClass(u.classnames.td_changed),o[s.name]=t});break;case"lookup":n.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var i in n.toggleClass(u.classnames.td_changed),e)void 0!==c[i]&&(o[i]=e[i]),s.name==i&&(a.val()==e[i]?n.removeClass(u.classnames.td_changed):a.val(e[i]))}),a.change(function(){n.addClass(u.classnames.td_changed),a.val()==i&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()});break;case"spinner":a.on("afterchange.bjui.spinner",function(t,e){n.addClass(u.classnames.td_changed),a.val()==i&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()}).change(function(){n.addClass(u.classnames.td_changed),a.val()==i&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()});break;default:a.change(function(){n.addClass(u.classnames.td_changed),a.val()==i&&n.removeClass(u.classnames.td_changed),o[s.name]=a.val()})}}(i,e,a),s.locked)){var l=u.$lockTbody.find("tr:eq("+f+")").find("> td:eq("+s.lockIndex+")");e.clone().html(n).insertAfter(e),e.show().insertAfter(l).initui(),l.remove()}--p||r.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})})},u.prototype.saveAll=function(i){var e,a,n,o,s=this,l=s.options,t=l.editCallback,r=[],d=i&&i.length;i&&!i.length||(i=s.$tbody.find("> tr."+s.classnames.tr_edit),d=i.length),i.each(function(){e=j(this),a=s.isDom?e.data("initData"):s.data[e.index()],e.isValid(function(t){if(!t)return!(r=[]);n=e.data(s.datanames.changeData),j.extend(a,n),l.jsonPrefix?(o={},j.each(a,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;o[l.jsonPrefix+"."+t]=e})):(delete(o=j.extend({},a)).gridCheckbox,delete o.gridEdit),d--,r.push(o)})}),d||(t=t?t.toFunc():function(t){var e=!1,a=[];"array"==j.type(t)?(e=!0,a=t):"object"==j.type(t)&&(t[BJUI.keys.statusCode]?t[BJUI.keys.statusCode]==BJUI.statusCode.ok?e=!0:s.$grid.bjuiajax("ajaxDone",t):(e=!0,a.push(t))),e&&(i.each(function(t){var e=j(this),i=s.isDom?e.data("initData"):s.data[e.index()];j.extend(i,"object"==typeof a[t]&&a[t]),s.inlineEditComplete(e,i)}),s.tools.afterSave(i,r))},s.$grid.bjuiajax("doAjax",{url:l.editUrl,data:{json:JSON.stringify(r)},type:"POST",callback:t}))},u.prototype.updateEdit=function(a,n){var o,e,i,s=this,l=s.options,r=l.editCallback,d=[];o=s.isDom?a.data("initData"):s.data[a.index()],a.hasClass(s.classnames.tr_edit)&&a.isValid(function(t){t&&(e=a.data(s.datanames.changeData),j.extend(o,e),l.jsonPrefix?(i={},j.each(o,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;i[l.jsonPrefix+"."+t]=e})):(delete(i=j.extend({},o)).gridCheckbox,delete i.gridEdit),r=r?r.toFunc():function(t){var e,i=!1;"array"==j.type(t)?(i=!0,e=t[0]):"object"==j.type(t)&&(t[BJUI.keys.statusCode]?t[BJUI.keys.statusCode]==BJUI.statusCode.ok?i=!0:s.$grid.bjuiajax("ajaxDone",t):(i=!0,e=t)),i&&(j.extend(o,"object"==typeof e&&e),s.inlineEditComplete(a,o,n),s.tools.afterSave(a,o))},a.bjuiajax("doAjax",{url:l.editUrl,data:{json:JSON.stringify(d.push(i)&&d)},type:"POST",callback:r}))})},u.prototype.cancelEdit=function(t){var l=this,r=l.columnModel;t.each(function(){var t=j(this),s=t.index();if(t.hasClass(l.classnames.tr_edit)&&t.removeClass(l.classnames.tr_edit).find("> td."+l.classnames.td_edit).each(function(){var t=j(this),e=t.index(),i=r[e],a=t.data(l.datanames.td_html);if(t.removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed).html(a),i.locked){var n=l.$lockTbody.find("tr:eq("+s+")"),o=n.find("> td:eq("+i.lockIndex+")");a=o.data(l.datanames.td_html),n.removeClass(l.classnames.tr_edit),o.removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed).html(a)}}),t.hasClass(l.classnames.tr_add)){var e=!1,i=t.data(l.datanames.changeData);if(j.isEmptyObject(i))e=!0;else{for(var a in i)i[a]||delete i[a];j.isEmptyObject(i)&&(e=!0)}if(e){var n=t.index();l.data=l.data.remove(n),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+n+")").remove(),t.remove()}}})},u.prototype.inlineEditComplete=function(t,o,e){var s=this,i=s.columnModel,l=t.index(),r=t.find("> td"),d=!1,a=s.$tbody.find("> tr"),n=a.filter("."+s.classnames.tr_add);j.each(i,function(t,e){if(e.gridNumber&&(d=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var i,a=o[e.name],n=r.eq(e.index);if(void 0===a&&(a=""),n.text(a).removeClass(s.classnames.td_edit).removeClass(s.classnames.td_changed),e.render&&"function"==typeof e.render?(i=e.items?e.render.call(s,a,e.items):e.render.call(s,a),n.html(i)):e.items&&(i=u.renderItem.call(s,a,e.items),n.html(i)),e.locked)s.$lockTbody.find("> tr:eq("+l+")").find("> td:eq("+e.lockIndex+")").removeClass(s.classnames.td_changed).html(n.html())}}),t.removeClass(s.classnames.tr_edit),e||(e=r.filter("."+s.classnames.s_edit).find("button.update")),e&&e.length&&e.trigger("bjui.datagrid.update.tr"),d&&n.length&&(n.removeClass(s.classnames.tr_add),a.each(function(t){j(this).find("> td."+s.classnames.td_linenumber).text(t+1),s.$lockTbody&&s.$lockTbody.find("> tr:eq("+t+")").find("> td."+s.classnames.td_linenumber).text(t+1)}))},u.prototype.dialogEdit=function(r,t,d){if(!this.tools.beforeEdit(r,d))return!1;var e,i,a,c=this,u=c.options,h=c.tools,p=c.columnModel,n=r.index();d||(d=c.isDom?r.data("initData")||h.setDomData(r):c.data[n]),c.inputs&&c.inputs.length||h.initEditInputs(),a=u.gridTitle||"datagrid",a+=t?" - "+BJUI.getRegional("datagrid.add"):" - "+BJUI.getRegional("datagrid.edit"),e=j('<div><div class="bjui-pageContent"></div><div class="bjui-pageFooter"></div></div>'),i=j('<form class="datagrid-dialog-edit-form"></form>');e.find("> div:first").append(i).next().append(BJUI.doRegional(FRAG.gridDialogEditBtns,c.regional));var o=j.extend({},{id:"datagrid-dialog-edit",fresh:!0,target:e[0],width:520,height:400,mask:!0,title:a,onLoad:function(t){var o=t.find("form.datagrid-dialog-edit-form"),e=t.find("div.bjui-pageFooter button"),i=e.first(),a=e.eq(1),n=e.eq(2),s=e.last(),l=function(o,s,l){s.empty(),l.data(c.datanames.changeData)||l.data(c.datanames.changeData,{}),s.data("validator")&&s.validator("destroy"),j.each(p,function(t,e){if(e==c.linenumberColumn||e==c.checkboxColumn||e==c.editBtnsColumn)return!0;var i=j(c.inputs[t]),a=j("<p></p>"),n="datagrid-dialog-edit-column-"+t;i.isTag("select")?i.attr("data-width","auto"):i.isTag("checkbox")||i.attr("size",30),"boolean"==e.type?i.attr("checked",o[e.name]):"textarea"==e.type?i.html(o[e.name]):i.attr("value",o[e.name]),a.append('<label class="control-label x120" for="'+n+'">'+e.label+"：</label>").append(j('<span class="datagrid-dialog-column-span"></span>').append(i.attr("id",n))).appendTo(s),function(t,e,a,n){var o=t.data(c.datanames.changeData);switch(n.type){case"date":a.on("afterchange.bjui.datepicker",function(t,e){o[n.name]=a.val()}).change(function(){o[n.name]=a.val()});break;case"select":a.change(function(){o[n.name]=a.val()});break;case"boolean":a.on("ifChanged",function(){var t=!!j(this).is(":checked");o[n.name]=t});break;case"lookup":e.on("customEvent.bjui.lookup",'[data-toggle="lookupbtn"]',function(t,e){for(var i in e)void 0!==d[i]&&(o[i]=e[i]),n.name==i&&a.val(e[i])}),a.change(function(){o[n.name]=a.val()});break;case"spinner":a.on("afterchange.bjui.spinner",function(t,e){o[n.name]=a.val()}).change(function(){o[n.name]=a.val()});break;default:a.change(function(){o[n.name]=a.val()})}}(l,s,i,e)}),s.initui().validator({msgClass:"n-bottom",theme:"red_bottom_effect_grid"})};o.is(":empty")&&l(d,o,r),0==r.index()&&i.addClass("disabled"),r.index()==c.data.length-1&&a.addClass("disabled"),i.click(function(){var t,e=r.prev();e.length?(t=c.isDom?e.data("initData")||h.setDomData(e):c.data[e.index()],l(t,o,r=e),a.removeClass("disabled"),e.prev().length||i.addClass("disabled")):i.addClass("disabled")}),a.click(function(){var t,e=r.next();e.length?(t=c.isDom?e.data("initData")||h.setDomData(e):c.data[e.index()],l(t,o,r=e),o.initui(),i.removeClass("disabled"),e.next().length||a.addClass("disabled")):a.addClass("disabled")}),s.click(function(){var e,a,i,n=u.editCallback;a=c.isDom?r.data("initData"):c.data[r.index()],o.isValid(function(t){t&&(e=r.data(c.datanames.changeData),j.extend(a,e),u.jsonPrefix?(i={},j.each(a,function(t,e){if("gridCheckbox"==t||"gridEdit"==t)return!0;i[u.jsonPrefix+"."+t]=e})):(delete(i=j.extend({},a)).gridCheckbox,delete i.gridEdit),n=n?n.toFunc():function(t){var e,i=!1;"array"==j.type(t)?(i=!0,e=t[0]):"object"==j.type(t)&&(t[BJUI.keys.statusCode]?t[BJUI.keys.statusCode]==BJUI.statusCode.ok?i=!0:c.$grid.bjuiajax("ajaxDone",t):(i=!0,e=t)),i&&(j.extend(a,"object"==typeof e&&e),c.dialogEditComplete(r,a),c.$grid.dialog("close","datagrid-dialog-edit"),c.tools.afterSave(r,a))},r.bjuiajax("doAjax",{url:u.editUrl,data:{json:JSON.stringify(i)},type:"POST",callback:n}))})}),n.click(function(){c.$grid.dialog("close","datagrid-dialog-edit")})},onClose:function(){c.$tbody.find("> tr."+c.classnames.tr_add).each(function(){var t=!1,e=j(this),i=e.data(c.datanames.changeData);if(j.isEmptyObject(i))t=!0;else{for(var a in i)i[a]||delete i[a];j.isEmptyObject(i)&&(t=!0)}if(t){var n=e.index();c.data=c.data.remove(n),c.$lockTbody&&c.$lockTbody.find("> tr:eq("+n+")").remove(),e.remove()}})}},"object"==typeof u.editDialogOp&&u.editDialogOp);c.$grid.dialog(o)},u.prototype.dialogEditComplete=function(t,s){var l=this,e=l.columnModel,r=t.index(),d=t.find("> td"),c=!1,i=l.$tbody.find("> tr"),a=i.filter("."+l.classnames.tr_add);j.each(e,function(t,e){if(e.gridNumber&&(c=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var i,a=s[e.name],n=d.eq(e.index);if(void 0===a&&(a=""),n.text(a).removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed),e.render&&"function"==typeof e.render?(i=e.items?e.render.call(l,a,e.items):e.render.call(l,a),n.html(i)):e.items&&(i=u.renderItem.call(l,a,e.items),n.html(i)),e.locked){var o=l.$lockTbody.find("> tr:eq("+r+")");o.find("> td:eq("+e.lockIndex+")").removeClass(l.classnames.td_edit).removeClass(l.classnames.td_changed).html(n.html()),o.removeClass(l.classnames.tr_edit)}}}),c&&a.length&&(a.removeClass(l.classnames.tr_add),i.each(function(t){j(this).find("> td."+l.classnames.td_linenumber).text(t+1),l.$lockTbody&&l.$lockTbody.find("> tr:eq("+t+")").find("> td."+l.classnames.td_linenumber).text(t+1)}))},u.prototype.resizeGrid=function(){var t,e=this,i=e.$grid.getPageTarget();i.on("bjui.navtab.switch",j.proxy(function(){e.$grid.data("need.fixedH")&&((t=e.$grid.parent().height())&&e.tools.fixedH(t),e.$grid.removeData("need.fixedH")),e.$grid.data("need.fixedW")&&(e.fixedWidth(),e.$grid.removeData("need.fixedW"))},e)),j(window).on(BJUI.eventType.resizeGrid,j.proxy(function(){e.initFixedW&&String(e.options.width).endsWith("%")&&(e.$grid.parent().width(),i.is(":hidden")&&i.hasClass("navtabPage")?e.$grid.data("need.fixedW",!0):e.fixedWidth()),String(e.options.height).endsWith("%")&&(t=e.$grid.parent().height(),i.is(":hidden")&&i.hasClass("navtabPage")?i.hasClass("navtabPage")&&e.$grid.data("need.fixedH",!0):t&&t!=e.parentH&&e.tools.fixedH(t))},e))};var t=j.fn.datagrid;j.fn.datagrid=i,j.datagrid=u,j.fn.datagrid.noConflict=function(){return j.fn.datagrid=t,this},j(document).on(BJUI.eventType.initUI,function(t){var e=j(t.target).find('table[data-toggle="datagrid"]');e.length&&i.call(e)})}(jQuery),function(p){"use strict";var f=function(t,e){this.$element=p(t),this.options=e,this.tools=this.TOOLS()};function i(a){var n=arguments,o=a;return this.each(function(){var t=p(this),e=p.extend({},f.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.tablefixed");i||t.data("bjui.tablefixed",i=new f(this,e)),"string"==typeof o&&p.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}f.SCROLLW=18,f.DEFAULTS={width:"100%"},f.prototype.TOOLS=function(){return{getLeft:function(t){var e=0;return t.prevAll().each(function(){e+=p(this).outerWidth()}),e},getRight:function(t){var e=0;return t.prevAll().andSelf().each(function(){e+=p(this).outerWidth()}),e-1},getCellNum:function(t){return t.prevAll().andSelf().size()},getColspan:function(t){return t.attr("colspan")||1},getStart:function(t){var e=1;return t.prevAll().each(function(){e+=parseInt(p(this).attr("colspan")||1)}),e},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(t,e){if(!p.support.leadingWhitespace){var i=t.offset(),a=e.pageX||e.screenX,n=e.pageY||e.screenY;return{offsetX:a-i.left,offsetY:n-i.top}}var o=e.target;void 0===o.offsetLeft&&(o=o.parentNode);var s=this.getPageCoord(o),l=window.pageXOffset+e.clientX,r=window.pageYOffset+e.clientY;return{offsetX:l-s.x,offsetY:r-s.y}}}},f.prototype.resetWidth=function(){var t=this.$element,e=t.width(),i=t.find("table"),a=i&&i.width(),n=i.eq(0)&&i.eq(0).find("tr:first-child > th"),o=i.eq(1)&&i.eq(1).find("tr:first-child > td");if(i&&e-a<f.SCROLLW){var s=parseInt((e-a)/n.length);i.width(e-f.SCROLLW),n.each(function(t){var e=parseInt(p(this).css("width"));p(this).width(e+s),o.eq(t)&&o.eq(t).width(e+s)})}},f.prototype.init=function(){if(this.$element.isTag("table")){this.$container=this.$element.parent().addClass("bjui-resizeGrid"),this.$fixed=void 0;var t=this.$container.width(),e=this.options.height;this.$container.hasClass("tab-pane")&&(t=this.$container.parent().width()-20),"string"==typeof this.options.width&&this.options.width.indexOf("%")?this.options.newWidth=t*(this.options.width.replace("%","")/100):this.options.newWidth=parseInt(this.options.width),this.options.styles=[],this.$element.wrap('<div class="bjui-tablefixed clearfix"></div>'),this.$fixed=this.$element.parent(),this.initHead(),this.initBody(),this.resizeCol(),this.resizeGrid(),e&&!this.$fixed.closest(".tab-content").length&&this.$fixed.height(e).addClass("fixedH")}},f.prototype.initHead=function(){var n=this.options.styles=[],t=this.$element.find("thead > tr"),d=t.eq(0).find("> th"),o=0,l=[],r=[],c=-1;d.each(function(t){for(var e=p(this),i=parseInt(e.attr("colspan")||1),a=e.attr("width"),n=e.attr("align"),o="",s=0;s<i;s++)1===i&&a&&(o=' width="'+a+'"'),n&&e.removeAttr("align").addClass(n),l.push("<th"+o+"></th>");e.attr("colsNum",c+=i),r[t]=i});var e=l.length,u=p('<tr class="resize-head">'+l.join("")+"</tr>");if(1<t.length){c=0;var h=t.eq(1).find("> th");p.each(r,function(t,e){if(1<(e=parseInt(e)))for(var i=parseInt(d.eq(t).attr("colsnum")),a=e-1;0<=a;a--){var n=h.eq(c++),o=i-a,s=n.attr("width"),l=n.attr("align"),r=u.find("> th").eq(o);n&&n.length&&n.attr("colsnum",o),s&&r.attr("width",s),l&&n.addClass(l).removeAttr("align")}})}this.$fixed.html(this.$element.html());var i=this.$fixed.find("thead");i.prepend(u),u.find("> th").each(function(t){var e=[],i=p(this).innerWidth();e[0]=parseInt(i),o+=e[0],n[n.length]=e}),o=parseInt((this.options.newWidth-f.SCROLLW-o)/e);var a=i.find("> tr:eq(0) > th");(this.options.$ths=a).each(function(t){var e=p(this),i=n[t],a=e.attr("width");e.removeAttr("align").width(i[0]+o),i[0]=i[0]+o,a&&(i[0]=parseInt(a),e.width(a).removeAttr("width"))}),i.find("> tr:gt(0) > th").each(function(){var t=p(this);t.html('<div class="fixedtableCol">'+t.html()+"</div>")}),i.wrap('<div class="fixedtableHeader" style="width:'+(this.options.newWidth-f.SCROLLW)+'px;overflow:hidden;"><div class="fixedtableThead"><table class="table table-bordered" style="width:'+(this.options.newWidth-f.SCROLLW)+"px; max-width:"+(this.options.newWidth-f.SCROLLW)+'px;"></table></div></div>'),this.$fixed.append('<div class="resizeMarker" style="display:none; height:300px; left:57px;"></div><div class="resizeProxy" style="left:377px; display:none; height:300px;"></div>')},f.prototype.initBody=function(){var t,e,i=this,a=this.$fixed.find("> tbody");if(this.options.height)e=this.options.height-this.$fixed.find(".fixedtableHeader").height()+"px";else{e="100%";p(document).one(BJUI.eventType.afterInitUI,function(t){var e;e=i.$fixed.parent().height(),i.$fixed.parent().css("overflow","hidden"),i.$fixed.height(e).find(".fixedtableScroller").height(e-i.$fixed.find(".fixedtableHeader").height())})}t='style="height:'+e+'; overflow-y:auto;"',a.wrap('<div class="fixedtableScroller"'+t+' style="width:'+this.options.newWidth+'px;"><div class="fixedtableTbody"><table style="width:'+(this.options.newWidth-f.SCROLLW)+"px; max-width:"+(this.options.newWidth-f.SCROLLW)+'px;"></table></div></div>'),this.$element.attr("class")?a.parent().addClass(this.$element.attr("class")):a.parent().addClass("table table-striped table-bordered table-hover"),void 0!==this.$element.attr("data-selected-multi")&&a.parent().attr("data-selected-multi",this.$element.attr("data-selected-multi")),a.before('<thead><tr class="resize-head">'+this.$fixed.find("thead > tr").html()+"</tr></thead>"),this.options.$tds=a.prev().find("> tr:first-child > th"),this.options.nowrap&&a.parent().addClass("nowrap"),a.closest(".fixedtableScroller").scroll(function(t){var e=p(this),i=e.scrollLeft();return e.prev().find("> .fixedtableThead").css({position:"relative",left:-i}),!1})},f.prototype.resizeCol=function(){var s=this,l=this.$fixed,n=this.options.$ths,r=this.options.$tds,d=this.tools;l.find("thead > tr:gt(0) > th").each(function(t){var a=p(this);a.mouseover(function(t){var e=parseInt(l.find(".fixedtableThead").css("left"))||0,i=d.getOffset(a,t).offsetX,o=n.eq(a.attr("colsnum"));return a.outerWidth()-i<5?a.css("cursor","col-resize").off("mousedown.bjui.tablefixed.resize").on("mousedown.bjui.tablefixed.resize",function(t){l.find("> .resizeProxy").show().css({left:d.getRight(o)+e+l.position().left,top:l.position().top,height:l.height(),cursor:"col-resize"}).basedrag({scop:!0,cellMinW:20,relObj:l.find(".resizeMarker"),move:"horizontal",event:t,stop:function(){var t=l.find(".resizeProxy").position().left-l.find(".resizeMarker").position().left-o.outerWidth()-9,e=d.getCellNum(o),i=o.width()+t,a=r.eq(e-1),n=l.find("> .fixedtableHeader .table").width();o.width(i),a.width(i),l.find(".table").width(n+t),l.find(".resizeMarker, .resizeProxy").hide(),n+t+f.SCROLLW<s.options.newWidth?l.find(".fixedtableScroller").width(n+t+f.SCROLLW):(i=l.closest(".bjui-resizeGrid").innerWidth(),n+t+f.SCROLLW<i&&(i=n+t+f.SCROLLW),l.find(".fixedtableHeader").width(i-f.SCROLLW),l.find(".fixedtableScroller").width(i),l.width(i)),l.data("resizeGrid",!0)}}),l.find("> .resizeMarker").show().css({left:d.getLeft(o)+e+l.position().left,top:l.position().top,height:l.height()})}):a.css("cursor","default").off("mousedown.bjui.tablefixed.resize"),!1})})},f.prototype.setOrderBy=function(t){var e=this.$element,i=e.find(".fixedtableCol"),a=p(FRAG.orderby.replace("#asc#",BJUI.regional.orderby.asc).replace("#desc#",BJUI.regional.orderby.desc));t=t||this.options,e.addClass("orderby"),t.orderDirection&&(BJUI.ui.clientPaging||e.addClass(t.orderDirection),e.pagination("setClientOrder",{orderField:t.orderField,orderDirection:t.orderDirection})),i.length||(i=p('<div class="fixedtableCol">'+e.html()+"</div>").appendTo(e.empty())),a.data("orderField",t.orderField).appendTo(i).pagination("orderBy")},f.prototype.resizeGrid=function(){var r=this;p(window).on(BJUI.eventType.resizeGrid,function(){p("div.bjui-resizeGrid").each(function(){var e,t=p(this),i=t.closest(".navtabPage"),a=t.width(),n=t.height(),o=t.find(".bjui-tablefixed"),s=o.find(".fixedtableThead").height(),l=r.options.newWidth;t.length&&t.is(":hidden")&&(t.hasClass("tab-pane")||(i.show(),a=t.innerWidth(),n=t.height(),s=o.find(".fixedtableHeader").height(),i.hide())),a&&t.find(".bjui-tablefixed").each(function(){var t=p(this);e=t.data("resizeGrid")?l:a,t.width(e),t.find(".table").width(e-f.SCROLLW),t.find(".fixedtableHeader").width(e-f.SCROLLW),t.find(".fixedtableScroller").width(e)}),t.css("overflow","hidden"),o.height(n).find(".fixedtableScroller").height(n-s)})})};var t=p.fn.tablefixed;p.fn.tablefixed=i,p.fn.tablefixed.Constructor=f,p.fn.tablefixed.noConflict=function(){return p.fn.tablefixed=t,this},p(document).on(BJUI.eventType.initUI,function(t){var e=p(t.target).find('table[data-toggle="tablefixed"]');e.length&&i.call(e)}),p(document).on(BJUI.eventType.afterInitUI,function(t){var e=p(t.target).find("th[data-order-field]");e.length&&i.call(e,"setOrderBy")}),p(document).on("click.bjui.tr.data-api","tr[data-id]",function(t){var e=p(this),i=e.closest("table"),a=i.data("selectedMulti"),n=e.attr("data-id"),o="selected",s=i.closest(".unitBox").find("#bjui-selected");e.toggleClass(o),a?(n=[],e.siblings("."+o).add(e.hasClass(o)?e:"").each(function(){n.push(p(this).attr("data-id"))}),n=n.join(",")):(e.siblings().removeClass(o),e.hasClass(o)||(n="")),s&&s.length?s.val(n):(s=p('<input type="hidden" id="bjui-selected" value="'+n+'">')).appendTo(i.closest(".unitBox"))})}(jQuery),function(c){"use strict";var s=function(t,e){this.$element=c(t),this.options=e,this.tools=this.TOOLS(),this.$tbody=this.$element.find("> tbody"),this.$tbody.length||(this.$tbody=c("<tbody></tbody>"),this.$element.append(this.$tbody)),this.$numAdd=this.$btnAdd=null};function n(a){var n=arguments,o=a;return this.each(function(){var t=c(this),e=c.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.tabledit");i||t.data("bjui.tabledit",i=new s(this,e)),"string"==typeof o&&c.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.DEFAULTS={singleNoindex:!0},s.EVENTS={afterDelete:"afterdelete.bjui.tabledit"},s.prototype.TOOLS=function(){var d=this;return{initSuffix:function(t){t.find("> tr").each(function(d){c(this).find(":input, :file, a, label, div").each(function(){var t=c(this),e=t.attr("name"),i=t.val(),a=t.attr("for"),n=t.attr("id"),o=t.attr("href"),s=t.attr("data-group"),l=t.attr("data-suffix");if(e&&t.attr("name",e.replaceSuffix(d)),a&&t.attr("for",a.replaceSuffix(d)),n&&t.attr("id",n.replaceSuffix(d).replaceSuffix2(d)),o&&t.attr("href",o.replaceSuffix(d)),s&&t.attr("data-group",s.replaceSuffix(d)),l&&t.attr("data-suffix",l.replaceSuffix(d)),i&&0<=i.indexOf("#index#")&&t.val(i.replace("#index#",d+1)),t.hasClass("no")){var r=t.data("prefix")?t.data("prefix"):"";t.val(r+(d+1))}})})},initEnter:function(t){var a=t.find(":text");a.each(function(i){c(this).bind("keydown",function(t){if(t.which===BJUI.keyCode.ENTER){var e=i+1;a.eq(e)&&a.eq(e).focus(),t.preventDefault()}})}),this.initInput(t)},initInput:function(t){t.find("> tr > td").each(function(){var e=c(this).find(".input-hold");e.length||(e=c('<span class="input-hold" style="display:block; padding:0 4px; height:0; font-size:12px; visibility: hidden;"></span>'),c(this).append(e)),c.support.leadingWhitespace?c(this).on("input",":text",function(t){e.text(c(this).val())}):c(this).on("propertychange",":text",function(t){e.text(c(this).val())})})},initTbody:function(){var l=d.$element,i=d.$tbody;function a(t){t.removeClass("readonly").find("> td *").each(function(){var t=c(this),e=t.closest("td"),i=e.data("val"),a=t.attr("data-toggle-old"),n=e.data("readonly");if(void 0===i&&(i=e.html()),e.data("notread"))return!0;if(t.isTag("select")&&(e.find(".tabledit-select-text").first().hide(),t.val(e.attr("data-val")),t.removeClass("readonly disabled").selectpicker("show")),t.is(":checkbox")&&(t.closest(".icheckbox_minimal-purple").removeClass("disabled"),t.closest(".icheckbox_minimal-purple").find("ins").removeClass("readonly")),t.is(":radio")&&(t.closest(".iradio_minimal-purple").removeClass("disabled"),t.closest(".iradio_minimal-purple").find("ins").removeClass("readonly")),a){if("dosave"===a)return!0;t.removeAttr("data-toggle-old").attr("data-toggle",a),"spinner"===a&&t.spinner("destroy").spinner(),"kindeditor"===a&&e.initui()}(t.is(":text")||t.is("textarea"))&&(t.off("keydown.readonly"),n&&t.prop("readonly",!0))}),t.find(".bjui-lookup, .bjui-spinner, .bjui-upload").show(),t.find('[data-toggle="doedit"]').attr("data-toggle","dosave").text("完成")}function r(t){t.addClass("readonly").find("> td *").each(function(){var t=c(this),e=t.closest("td"),i=t.attr("data-toggle");if(e.data("notread"))return!0;if(t.isTag("select")){t.addClass("readonly disabled").selectpicker("hide");var a=t.children("option").filter(":selected").text(),n=e.find(".tabledit-select-text").first();n.length?n.text(a).show():e.append('<span style="padding: 0 2px" class="tabledit-select-text">'+a+"</span>")}if(t.is(":checkbox")&&(t.closest(".icheckbox_minimal-purple").addClass("disabled"),t.closest(".icheckbox_minimal-purple").find("ins").addClass("readonly")),t.is(":radio")&&(t.closest(".iradio_minimal-purple").addClass("disabled"),t.closest(".iradio_minimal-purple").find("ins").addClass("readonly")),i){if("doedit"===i||"dosave"===i)return!0;t.removeAttr("data-toggle").attr("data-toggle-old",i),"kindeditor"===i&&KindEditor.remove(t)}(t.is(":text")||t.is("textarea"))&&t.on("keydown.readonly",function(t){t.preventDefault()})}),t.find(".bjui-lookup, .bjui-spinner, .bjui-upload").hide(),t.find('[data-toggle="dosave"]').attr("data-toggle","doedit").text("编辑")}i.find("> tr").each(function(){var e=c(this),s=e.find("> td"),t=l.data("bjui.tabledit.tr").clone().find("> th");e.data("bjui.tabledit.oldTds",e.html()),t.each(function(t){var e=s.eq(t),i=e.data("val"),a=c(this),n=a.children(),o=a.find(".pic-box");void 0===i&&(i=e.html()),e.data("noedit")||n.length&&(n.is("input:checkbox")||n.is("input:radio")?n.filter('[value="'+i+'"]').attr("checked","checked"):n.isTag("select")?n.find('option[value="'+e.data("val")+'"]').attr("selected","selected"):o.length?(e.data("val")&&a.find(".pic-name").val(e.data("val")),o.html(e.html())):n.hasClass("wrap_bjui_btn_box")?n.find("input[data-toggle]").attr("value",i+""):n.is("textarea")?(n.html(i),"kindeditor"===n.attr("data-toggle")&&n.attr("data-toggle-old","kindeditor").removeAttr("data-toggle")):n.attr("value",i+""),e.html(a.html()))}),e.on("dblclick",c.proxy(function(t){a(e)},d)).initui(),d.tools.initSuffix(i),r(e)}),i.on("click.bjui.tabledit.readonly",'[data-toggle="doedit"]',function(t){a(c(this).closest("tr"))}).on("click.bjui.tabledit.readonly",'[data-toggle="dosave"]',function(t){var e=c(this).closest("tr"),i=e.index(),a=d.options.callback;if(d.options.action){if(e.wrap('<form action="" method="POST"></form>'),e.attr("data-id")){var n=l.find("> thead > tr:eq(0)").data("idname")||"id";e.before('<input type="hidden" name="'+n.replaceSuffix(i)+'" value="'+e.attr("data-id")+'">')}var o=e.parent().serializeArray();d.options.singleNoindex&&c.each(o,function(t,e){c.extend(e,{name:e.name.replaceSuffix(0)})}),e.prev("input").remove(),e.unwrap().isValid(function(t){t&&(a=a?a.toFunc():function(t){t[BJUI.keys.statusCode]===BJUI.statusCode.ok?r(e):e.bjuiajax("ajaxDone",t)},e.bjuiajax("doAjax",{url:d.options.action,data:o,type:d.options.type||"POST",callback:a}))})}else r(e)}),d.tools.initEnter(i)},doAdd:function(){var i=d.$element;d.$numAdd&&d.$btnAdd&&i.on("keydown.bjui.tabledit.add","thead .num-add",function(t){t.which===BJUI.keyCode.ENTER&&(d.$btnAdd.trigger("click.bjui.tabledit.add"),t.preventDefault())}).on("click.bjui.tabledit.add","thead .row-add",function(t){var e=1;isNaN(d.$numAdd.val())||(e=parseInt(d.$numAdd.val())),d.add(i,e),t.preventDefault()})},doDel:function(t){var i=this,e="click.bjui.tabledit.del";t.off(e).on(e,".row-del",function(t){var e=c(this);e.data("confirmMsg")?e.alertmsg("confirm",e.data("confirmMsg"),{okCall:function(){i.delData(e)}}):i.delData(e),t.preventDefault()})},delData:function(e){var i=this,a=e.closest("tbody"),n=e.data(),t=function(t){e.closest("tr").remove(),i.initSuffix(a),i.afterDelete(a),n.callback&&n.callback.toFunc().apply(d,[t])};e.is("[href^=javascript:]")||e.is('[href^="#"]')?t():e.bjuiajax("doAjax",{url:e.attr("href"),data:n.data,callback:t})},afterDelete:function(t){var e=c.Event(s.EVENTS.afterDelete,{relatedTarget:t[0]});d.$element.trigger(e)}}},s.prototype.init=function(){var n=this,t=this.tools,e=this.$element.addClass("bjui-tabledit"),i=e.find("> thead > tr:first"),a=this.$tbody,o=e.find("> thead > tr:first").html();i.find("> th").each(function(){var t=c(this),e=t.attr("title"),i=t.data("addtool");if(e&&t.html(e),i){var a=c('<span style="position:relative;"></span>');t.empty(),n.$numAdd=c('<input type="text" value="1" class="form-control num-add" size="2" title="待添加的行数">'),n.$btnAdd=c('<a href="javascript:;" class="row-add" title="添加行"><i class="fa fa-plus-square"></i></a>'),a.append(n.$numAdd).append(n.$btnAdd).appendTo(t)}}),e.data("bjui.tabledit.tr",c("<tr>"+o+"</tr>")),t.initTbody(),t.doAdd(),t.doDel(a)},s.prototype.add=function(t,e){for(var i,a=this.tools,n=t.find("> tbody"),o=t.data("bjui.tabledit.tr"),s=0;s<e;s++){o.find("> th").each(function(){c(this).replaceWith("<td>"+c(this).html()+"</td>")});var l=o.clone();0===s&&(i=l),l.hide().appendTo(n),a.initSuffix(n),a.initEnter(n),l.show().css("display","").initui()}i&&i.length&&i.find(":text").each(function(){var t=c(this);if(!t.prop("readonly"))return t.focus(),!1})};var t=c.fn.tabledit;c.fn.tabledit=n,c.fn.tabledit.Constructor=s,c.fn.tabledit.noConflict=function(){return c.fn.tabledit=t,this},c(document).on(BJUI.eventType.initUI,function(t){var e=c(t.target).find('table[data-toggle="tabledit"]');e.length&&n.call(e)}),c(document).on(BJUI.eventType.afterInitUI,function(t){c(t.target).find('table[data-toggle="tabledit"]').each(function(){if(c(this).is("[data-initnum]")){var t=c(this).data("initnum");0<t&&n.call(c(this),"add",c(this),t)}})}),c(document).on("click.bjui.tabledit.data-api",'[data-toggle="tableditadd"]',function(t){var e=c(this),i=e.data("num")||1,a=e.data("target");a&&c(a).length&&c(a).isTag("table")&&(n.call(e,"add",c(a),i),t.preventDefault())})}(jQuery),function(s){"use strict";var r=function(t,e){this.$element=s(t),this.options=e,this.tools=this.TOOLS(),this.$spinner=null,this.height=this.$element.addClass("form-control").innerHeight(),this.ivalue=Number(this.$element.val())||0};function i(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},r.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.spinner");i||t.data("bjui.spinner",i=new r(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}r.DEFAULTS={min:0,max:100,step:1,decimalPlace:0},r.EVENTS={afterChange:"afterchange.bjui.spinner"},r.prototype.TOOLS=function(){var l=this;return{changeVal:function(t){var e=l.$element,i=Number(e.val())||Number(l.ivalue),a=t.data("add")||-1,n=l.options.min,o=l.options.max,s=l.options.step;1===a?i<=o-s&&(i+=s):-1===a?n+s<=i&&(i-=s):o<i?i=o:i<n&&(i=n),l.options.decimalPlace&&(i=i.toFixed(l.options.decimalPlace)),l.ivalue=i,e.val(i).trigger(r.EVENTS.afterChange,{value:i})}}},r.prototype.init=function(){isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?BJUI.debug("Spinner Plugin: Parameter is non-numeric type!"):this.addBtn()},r.prototype.addBtn=function(){var e=this,t=e.$element;if(!this.$lookBtn&&!t.parent().hasClass("wrap_bjui_btn_box")){this.$spinner=s(FRAG.spinnerBtn),t.css({paddingRight:"13px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var i=t.parent();i.css("position","relative"),this.$spinner.css({height:this.height}).appendTo(i),this.$spinner.on("selectstart",function(){return!1});var a=null;e.$spinner.find("li").on("click",function(t){e.tools.changeVal(s(this))}).on("mousedown",function(){var t=s(this);a=setInterval(function(){e.tools.changeVal(t)},150)}).on("mouseup",function(){clearTimeout(a)})}},r.prototype.destroy=function(){this.$element.parent().hasClass("wrap_bjui_btn_box")&&(this.$element.parent().find(".bjui-spinner").remove(),this.$element.unwrap())};var t=s.fn.spinner;s.fn.spinner=i,s.fn.spinner.Constructor=r,s.fn.spinner.noConflict=function(){return s.fn.spinner=t,this},s(document).on(BJUI.eventType.initUI,function(t){var e=s(t.target).find('input[data-toggle="spinner"]');e.length&&i.call(e)})}(jQuery),function(l){"use strict";var e,i,r,d=function(t,e){this.$element=l(t),this.options=e,this.$lookBtn=null};function o(a){var n=arguments,o=a;return this.each(function(){var t=l(this),e=l.extend({},d.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.lookup");i?t.data("newurl")&&(i.options.url=t.data("newurl"),t.data("bjui.dialog",null)):(t.data("newurl")&&(e.url=t.data("newurl")),t.data("bjui.lookup",i=new d(this,e))),"string"==typeof o&&l.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}d.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:"Lookup",maxable:!0,resizable:!0},d.EVENTS={afterChange:"afterchange.bjui.lookup"},d.prototype.init=function(){var t=this.options;return t.url?(t.url=decodeURI(t.url).replacePlh(this.$element.closest(".unitBox")),t.url.isFinishedTm()?(t.url=encodeURI(t.url),e=this.options.group||null,i=this.options.suffix||null,r=this.$element,i&&(i=i.trim()),void this.open(this.$element)):(this.$element.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),BJUI.debug("Lookup Plugin: The lookup's url is incorrect, url:"+t.url),!1)):(BJUI.debug("Lookup Plugin: Error trying open a lookup dialog, url is undefined!"),!1)},d.prototype.addBtn=function(){var i=this,t=i.$element;if(!this.$lookBtn&&!t.parent().hasClass("wrap_bjui_btn_box")){this.$lookBtn=l(FRAG.lookupBtn),this.$element.css({paddingRight:"15px"}).wrap('<span class="wrap_bjui_btn_box"></span>');var e=this.$element.parent(),a=this.$element.addClass("form-control").innerHeight();e.css({position:"relative",display:"inline-block"}),l.each(i.options,function(t,e){"toggle"!==t&&i.$lookBtn.data(t,e)}),this.$lookBtn.css({height:a,lineHeight:a+"px"}).appendTo(e),this.$lookBtn.on("selectstart",function(){return!1})}},d.prototype.open=function(t){var e=this.options;t.dialog({id:e.id||"lookup_dialog",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask,maxable:e.maxable,resizable:e.resizable})},d.prototype.getField=function(t){return(e?e+".":"")+t+(i||"")},d.prototype.setSingle=function(t,e){"string"==typeof t&&(t=new Function("return "+t)()),this.setVal(t,e)},d.prototype.setMult=function(t,e){var a={};this.$element.closest(".unitBox").find('[name="'+t+'"]').filter(":checked").each(function(){var t=new Function("return "+l(this).val())();for(var e in t)if(t.hasOwnProperty(e)){var i=a[e]?a[e]+",":"";a[e]=i+t[e]}}),l.isEmptyObject(a)?this.$element.alertmsg("error",this.$element.data("warn")||FRAG.alertSelectMsg):this.setVal(a,e)},d.prototype.setVal=function(a,n){var o,s=this,t=r.closest(".unitBox");r.data("customEvent")?r.trigger("customEvent.bjui.lookup",[a]):t.find(":input").each(function(){var t=l(this),e=t.attr("name");for(var i in a){if(a.hasOwnProperty(i))if(s.getField(i)===e){o=1===parseInt(n)&&t.val()?t.val()+","+a[i]:a[i],t.val(o).trigger(d.EVENTS.afterChange,{value:a[i]});break}}}),this.$element.dialog("closeCurrent")};var t=l.fn.lookup;l.fn.lookup=o,l.fn.lookup.Constructor=d,l.fn.lookup.noConflict=function(){return l.fn.lookup=t,this},l(document).on(BJUI.eventType.initUI,function(t){var e=l(t.target).find('[data-toggle="lookup"]');e.length&&o.call(e,"addBtn")}),l(document).on("click.bjui.lookup.data-api",'[data-toggle="lookupbtn"]',function(t){var e=l(this);e.attr("href")&&!e.data("url")&&e.attr("data-url",e.attr("href")),e.data("title")||e.attr("data-title",e.text()),o.call(e),t.preventDefault()}),l(document).on("click.bjui.lookupback.data-api",'[data-toggle="lookupback"]',function(t){var e=l(this),i=e.data("args"),a=e.data("lookupid"),n=l('input[name="lookupType"]:checked').val();i?o.call(e,"setSingle",i,n):a&&o.call(e,"setMult",a,n),t.preventDefault()})}(jQuery),function(p){"use strict";var s=function(t,e){this.$element=p(t).addClass("tag-input"),this.options=e,this.tools=this.TOOLS(),this.$box=p(this.$element.wrap('<div class="bjui-tags"></div>')).parent(),this.timeout=null,this.$tagsArr={},this.tags=[]};function i(a){var n=arguments,o=a;return this.each(function(){var t=p(this),e=p.extend({},s.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.tags");i||t.data("bjui.tags",i=new s(this,e)),"string"==typeof o&&p.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}s.DEFAULTS={width:300,url:"",global:!1,type:"GET",tagname:"tag",max:0,clear:!1,lightCls:"tags-highlight"},s.EVENTS={afterCreated:"aftercreated.bjui.tags"},s.prototype.TOOLS=function(){var u=this,h=this.options;return{keyDown:function(t){if(13===t.which)return!1},keyUp:function(t){var e;switch(t.which){case BJUI.keyCode.BACKSPACE:if(0===p.trim(u.$element.val()).length)return u.tools.removeMenu(),!1;break;case BJUI.keyCode.ESC:u.tools.removeMenu();break;case BJUI.keyCode.DOWN:if(!u.$menu||!u.$menu.length)return;e=u.$menu.find("> ."+h.lightCls);var i=u.$menu.find("> li:first-child");if(e.length){var a=e.removeClass(h.lightCls).next();a.length?a.addClass(h.lightCls):i.addClass(h.lightCls)}else i.addClass(h.lightCls);return!1;case BJUI.keyCode.UP:if(!u.$menu||!u.$menu.length)return;e=u.$menu.find("> ."+h.lightCls);var n=u.$menu.find("> li:last-child");if(e.length){var o=e.removeClass(h.lightCls).prev();o.length?o.addClass(h.lightCls):n.addClass(h.lightCls)}else n.addClass(h.lightCls);return!1;case BJUI.keyCode.ENTER:if(0<h.max&&u.$tagsArr.length>=h.max)return!1;var s=!1,l=!1,r=null,d=u.$menu&&u.$menu.find("> ."+h.lightCls);if(d&&d.length)s=d.text(),(r=d.data("item"))&&(l=r.value);else{if(!(s=p.trim(u.$element.val())).length)return!1;if(h.clear&&-1===p.inArray(s,u.tags))return u.$element.val(""),!1;l=s}if(!s)return;var c=!1;return u.$tagsArr.length&&u.$tagsArr.each(function(){p(this).val()!==l||(c=!0)}),c?(u.$element.val(""),!1):(u.tools.createTag(s,l),u.tools.removeMenu(),u.$element.val(""),p.proxy(u.tools.onAfterCreated(r,l),u),!1)}},query:function(){u.timeout&&clearTimeout(u.timeout),u.timeout=setTimeout(u.tools.doQuery,300)},doQuery:function(){if(!(0<h.max&&u.$tagsArr.length>=h.max)){var t=u.$element.val(),n=u.$box.find("> .tags-menu"),i=[],e=u.$element.closest(".navtab-panel").length?p.CurrentNavtab:p.CurrentDialog;u.$element.closest(".bjui-layout").length&&(e=u.$element.closest(".bjui-layout")),0!==t.length&&(u.$element.one("ajaxStart",function(){e.trigger("bjui.ajaxStart")}).one("ajaxStop",function(){e.trigger("bjui.ajaxStop")}),p.ajax({url:h.url,global:h.global,type:h.type,data:{term:t},dataType:"json",success:function(t){if(0!==t.length){n.length||(n=p('<ul class="tags-menu"></ul>')),n.empty().hide().appendTo(u.$box);for(var e=0;e<t.length;e++)p('<li class="tags-item">'+t[e].label+"</li>").data("item",t[e]).appendTo(n),i.push(t[e].label);u.tags=i,n.css({top:u.$element.position().top+u.$element.outerHeight(),left:u.$element.position().left}).fadeIn().find("> li").hover(function(){p(this).addClass(h.lightCls).siblings().removeClass(h.lightCls)},function(){p(this).removeClass(h.lightCls)}).click(function(){var t=p(this).text(),e=p(this).data("item"),i=e.value,a=!1;if(u.$box.find("input:hidden").each(function(){p(this).val()!==i||(a=!0)}),a)return u.$element.val(""),void n.remove();p.proxy(u.tools.createTag(t,i),u),n.remove(),u.$element.val(""),p.proxy(u.tools.onAfterCreated(e,i),u)}),u.$menu=n}}}))}},createTag:function(t,e){var i=p('<span class="label label-tag" data-value="'+e+'" style="margin-left: 1px; margin-top: 1px;"><i class="fa fa-tag"></i> '+t+'&nbsp;&nbsp;<a href="#" class="close">&times;</a></span>');i.insertBefore(u.$element).find("a.close").click(function(){var t=i.data("value");u.$box.find("input:hidden").each(function(){p(this).val()===t&&p(this).remove()}),i.remove(),u.$tagsArr=u.$box.find('input[name="'+u.options.tagname+'"]')}),p('<input type="hidden" name="'+u.options.tagname+'">').val(e).appendTo(u.$box),u.$tagsArr=u.$box.find('input[name="'+u.options.tagname+'"]')},removeMenu:function(){u.$menu&&u.$menu.remove()},onAfterCreated:function(t,e){var i=[];u.$tagsArr.length&&u.$tagsArr.each(function(){i.push(p(this).val())}),u.$element.trigger(s.EVENTS.afterCreated,{item:t,value:e,tags:i.join(",")})}}},s.prototype.init=function(){var t=this.$element,e=this.options;if(e.url){if(e.url=decodeURI(e.url).replacePlh(t.closest(".unitBox")),!e.url.isFinishedTm())return t.alertmsg("error",e.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Tags Plugin: The query tags url is incorrect, url: "+e.url);e.url=encodeURI(e.url),isNaN(this.options.max)?BJUI.debug("Tags Plugin: Parameter 'max' is non-numeric type!"):(this.$box.width(e.width).on("click",function(){t.focus()}),t.on("keydown",p.proxy(this.tools.keyDown,this)).on("keyup",p.proxy(this.tools.keyUp,this)),p.support.leadingWhitespace?t.on("input",p.proxy(this.tools.query,this)):t.on("propertychange",p.proxy(this.tools.query,this)),p(document).on("click.bjui.tags",p.proxy(function(t){p(t.target).closest(this.$box).length||this.tools.removeMenu()},this)))}else BJUI.debug("Tags Plugin: Do query tags, url is undefined!")},s.prototype.destroy=function(){this.$tags&&(this.$element.upwrap(),this.$tags.remove())};var t=p.fn.tags;p.fn.tags=i,p.fn.tags.Constructor=s,p.fn.tags.noConflict=function(){return p.fn.tags=t,this},p(document).on(BJUI.eventType.initUI,function(t){var e=p(t.target).find('input[data-toggle="tags"]');e.length&&i.call(e)})}(jQuery),function(d){"use strict";var l=function(t,e){this.$element=d(t),this.options=e,this.tools=this.TOOLS()};function i(a){var n=arguments,o=a;if(window.FileReader)return this.each(function(){var t=d(this),e=d.extend({},l.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.upload");i||t.data("bjui.upload",i=new l(this,e)),"string"==typeof o&&d.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()});this.each(function(){if(d.fn.uploadify){var t={swf:BJUI.PLUGINPATH+"uploadify/scripts/uploadify.swf",fileTypeExts:"*.jpg;*.png",id:"fileInput",fileObjName:"file",fileSizeLimit:204800,buttonText:"选择上传文件",auto:!1,multi:!1,height:24},e=d(this),i=e.data();if(e.addClass("bjui-upload"),i.id||(i.id=e.attr("id")),d.extend(t,i),t.uploader){if(t.uploader=decodeURI(t.uploader).replacePlh(e.closest(".unitBox")),!t.uploader.isFinishedTm())return e.alertmsg("error",t.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+t.uploader);t.uploader=encodeURI(t.uploader),"fileInput"===t.id&&(t.id=t.id+(new Date).getTime());var a=d('<input type="file" name="'+t.name+'" id="'+t.id+'">');if(t.onInit&&"string"==typeof t.onInit&&(t.onInit=t.onInit.toFunc()),t.onCancel&&"string"==typeof t.onCancel&&(t.onCancel=t.onCancel.toFunc()),t.onSelect&&"string"==typeof t.onSelect&&(t.onSelect=t.onSelect.toFunc()),t.onUploadSuccess&&"string"==typeof t.onUploadSuccess&&(t.onUploadSuccess=t.onUploadSuccess.toFunc()),t.onUploadComplete&&"string"==typeof t.onUploadComplete&&(t.onUploadComplete=t.onUploadComplete.toFunc()),t.onUploadError&&"string"==typeof t.onUploadError&&(t.onUploadError=t.onUploadError.toFunc()),a.appendTo(e),!t.auto){var n=d('<button class="btn btn-orange" data-icon="cloud-upload">开始上传</button>');n.hide().insertAfter(e).click(function(){a.uploadify("upload","*"),d(this).hide()}),t.onSelect=function(){n.show()}}a.uploadify(t)}else BJUI.debug("Upload Plugin: The options uploader is undefined!")}})}l.DEFAULTS={fileTypeExts:"*.jpg;*.png",uploader:"",auto:!1,method:"POST",multi:!1,formData:{},fileObjName:"file",fileSizeLimit:204800,previewImg:!0,previewLoadimg:null,dragDrop:!1,showUploadedPercent:!0,showUploadedSize:!0,buttonText:"选择上传文件",removeTimeout:1e3,itemTemplate:FRAG.uploadTemp,breakPoints:!1,fileSplitSize:1048576,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null},l.MIMETYPES={zip:["application/x-zip-compressed"],jpg:["image/jpeg"],png:["image/png"],gif:["image/gif"],swf:["application/x-shockwave-flash"],doc:["application/msword"],xls:["application/vnd.ms-excel"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],mp3:["audio/mpeg"],mp4:["video/mp4"],pdf:["application/pdf"],txt:["text/plain"],xml:["text/xml"]},l.prototype.TOOLS=function(){var o=this,s=this.options,i={formatFileSize:function(t,e){return t=1048576<t&&!e?(Math.round(100*t/1048576)/100).toString()+"MB":(Math.round(100*t/1024)/100).toString()+"KB"},getFile:function(t,e){console.log(t);for(var i=0;i<e.length;i++)if(e[i].index===t)return e[i];return!1},getFileTypes:function(t){for(var e=[],i=t.split(";"),a=0;a<i.length;a++)e.push(i[a].split(".").pop());return e},getMimetype:function(t){return l.MIMETYPES[t]},getAcceptString:function(t){for(var e=this.getFileTypes(t),i=[],a=0;a<e.length;a++){var n=this.getMimetype(e[a]);n?i.push(n):i.push("."+e[a])}return i.join(",")},filter:function(t){var e=[],i=this.getFileTypes(s.fileTypeExts);if(0<i.length)for(var a=0;a<t.length;a++){var n=t[a];parseInt(this.formatFileSize(n.size,!0))>s.fileSizeLimit?o.$element.alertmsg("error",'文件"'+n.name+'"大小超出限制！'):0<=d.inArray(n.name.split(".").pop().toLowerCase(),i)?e.push(n):o.$element.alertmsg("error",'文件"'+n.name+'"类型不允许！')}return e},getFiles:function(t){var e=t.target.files||t.dataTransfer.files;e=this.filter(e);for(var i=0;i<e.length;i++)e[i].id=e[i].lastModifiedDate.getTime()+"_"+e[i].size+"_"+(e[i].type||"").replace(/\W/g,""),this.renderQueueItem(e[i]),o.queueData.files++;return e},renderQueueItem:function(t){var a=0,e=d(s.itemTemplate.replace("{fileId}",t.id).replace("{fileName}",t.name).replace("#upConfirm#",BJUI.regional.upload.upConfirm).replace("#upPause#",BJUI.regional.upload.upPause).replace("#upCancel#",BJUI.regional.upload.upCancel).replace("{percent}","0.00%").replace("{uploadedSize}","0KB").replace("{fileSize}",this.formatFileSize(t.size)));if(s.auto&&e.find("> .info > .up_confirm").remove(),e.data("upfile",t),o.$uploadFileList.append(e),s.breakPoints&&(a=this.getUploadedSize(t.id))>t.size&&(a=t.size),this.showProgress(t.id,a,t.size),s.previewImg&&-1!==t.type.indexOf("image")){var i=e.find("> .preview > .img");s.previewLoadimg&&i.html('<img src="'+s.previewLoadimg+'" height="114">'),this.previewImg(t,i)}else e.find("> .preview").remove();if(s.showUploadedSize){var n=e.find("> .filesize");n.find("> .uploadedsize").html(this.formatFileSize(a)),n.find("> .filesize").html(this.formatFileSize(t.size))}else e.find("> .filesize").remove();s.showUploadedPercent?e.find("> .percent").html((a/t.size*100).toFixed(2)+"%"):e.find("> .percent").remove(),s.onSelect&&s.onSelect(t),s.auto&&o.fileUpload(t,a),e.on("click.bjui.upload.confirm",".up_confirm",function(t){var e=d(this),i=e.closest(".item");e.hide().next().show(),o.fileUpload(i.data("upfile"),a)}),e.on("click.bjui.upload.cancel",".up_cancel",this.removeQueueItem)},successQueueItem:function(t,e){i.showProgress(t.id,t.size,t.size),s.onUploadSuccess&&s.onUploadSuccess.toFunc().call(o,t,e.responseText,o.$element),setTimeout(function(){o.$element.find("#"+t.id).fadeOut("normal",function(){d(this).remove(),0===o.$element.find("> .queue > .item:visible").length&&(o.$element.find("> .queue").hide(),o.$file.val(""))})},s.removeTimeout)},removeQueueItem:function(t,e){e&&e.abort(),d(this).closest(".item").fadeOut("normal",function(){d(this).remove(),0===o.$element.find("> .queue > .item:visible").length&&o.$element.find("> .queue").hide()}),t.preventDefault()},previewImg:function(t,e){if(t&&e.length){var i=new FileReader;i.onload=function(t){e.html('<img src="'+t.target.result+'">')},i.readAsDataURL(t)}},showProgress:function(t,e,i){var a=e/i*100+"%";o.$element.find("#"+t+" > .progress > .bar").css("width",a)},getUploadedSize:function(t){return 1*localStorage.getItem(t)},saveUploadedSize:function(t,e){localStorage.setItem(t,e)},sendBlob:function(t,e,i,a){var n=new FormData;if(e.open(s.method,t,!0),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.append(s.fileObjName,i),a)for(var o in a)a.hasOwnProperty(o)&&n.append(o,a[o]);e.send(n)}};return i},l.prototype.init=function(){var e=this,t=this.$element,i=this.options;if(i.uploader){if(i.uploader=decodeURI(i.uploader).replacePlh(t.closest(".unitBox")),!i.uploader.isFinishedTm())return t.alertmsg("error",i.warn||FRAG.alertPlhMsg.replace("#plhmsg#",BJUI.regional.plhmsg)),void BJUI.debug("Upload Plugin: The options uploader is incorrect: "+i.uploader);if(i.uploader=encodeURI(i.uploader),!t.hasClass("bjui-upload")){var a=d(FRAG.uploadFrag.replaceAll("#multi#",i.multi?"multiple":"").replaceAll("#accept#",e.tools.getAcceptString(i.fileTypeExts)).replaceAll("#btnTxt#",(i.icon?'<i class="fa fa-'+i.icon+'">&nbsp;&nbsp;':"")+i.buttonText));t.addClass("bjui-upload").append(a),this.$file=t.find("> .bjui-upload-select-file"),this.$uploadFileList=t.find("> .queue"),this.queueData={files:0,success:0,error:0},t.on("change.bjui.upload",".bjui-upload-select-file",function(t){e.fileSelect(t)}).on("click.bjui.upload",".bjui-upload-select",function(t){e.$file.trigger("click")}),i.onInit&&i.onInit(),i.dragDrop&&(t[0].ondragover=function(t){return t.preventDefault(),!0},t[0].ondrop=function(t){e.fileSelect(t),t.stopPropagation(),t.preventDefault()})}}else BJUI.debug("Upload Plugin: The options uploader is undefined!")},l.prototype.fileSelect=function(t){this.$uploadFileList.show(),this.tools.getFiles(t)},l.prototype.fileUpload=function(i,a){var n=this,t=n.$element,o=n.options,s=n.tools,l=!1,r=i;l=new XMLHttpRequest,o.breakPoints&&(i=r.slice(a,a+o.fileSplitSize)),l.upload&&(l.upload.onprogress=function(t){n.onProgress(i,t.loaded,r.size)},l.onreadystatechange=function(t){if(4===l.readyState){if(200===l.status){var e=!1;o.breakPoints?(a+=o.fileSplitSize,s.saveUploadedSize(r.id,a),a<r.size?(i=r.slice(a,a+o.fileSplitSize),s.sendBlob(o.uploader,l,i,o.formData)):e=!0):e=!0,e&&(n.queueData.success++,s.successQueueItem(r,l),o.onUploadComplete&&o.onUploadComplete(r,l.responseText))}else n.queueData.error++,o.onUploadError&&o.onUploadError(r,l.responseText);o.onQueueComplete&&n.queueData.files===n.queueData.success+n.queueData.error&&o.onQueueComplete(n.queueData)}},o.onUploadStart&&o.onUploadStart(),o.formData.fileName=r.name,o.formData.lastModifiedDate=r.lastModifiedDate.getTime(),s.sendBlob(o.uploader,l,i,o.formData)),t.find("#"+r.id+" > .info > .up_pause").on("click.bjui.upload.pause",function(t){l.abort(),d(this).hide().prev().show()}),t.find("#"+r.id+" > .info > .up_cancel").off("click.bjui.upload.cancel").on("click.bjui.upload.cancel",d.proxy(function(t){this.tools.removeQueueItem(t,l)},this))},l.prototype.onProgress=function(t,e,i){var a=this,n=a.options,o=a.$element.find("#"+t.id+" .progress"),s=e,l=o.attr("lastLoaded")||0;(e-=parseInt(l))>t.size&&(e=t.size),a.$progressBar=o.children(".bar");var r=(e/i*100+(n.breakPoints?parseFloat(a.$progressBar.get(0).style.width||0):0)).toFixed(2),d=100<r?"100%":r+"%";n.showUploadedSize&&o.nextAll(".filesize").find("> .uploadedsize").text(a.tools.formatFileSize(e));n.showUploadedPercent&&o.nextAll(".up_percent").text(d),a.$progressBar.css("width",d),s<n.fileSplitSize?o.attr("lastLoaded",s):o.removeAttr("lastLoaded")},l.prototype.destroy=function(){};var t=d.fn.upload;d.fn.upload=i,d.fn.upload.Constructor=l,d.fn.upload.noConflict=function(){return d.fn.upload=t,this},d(document).on(BJUI.eventType.initUI,function(t){var e=d(t.target).find('[data-toggle="upload"]');e.length&&i.call(e)})}(jQuery),function(s){"use strict";var a,n;s(function(){a=s("#bjui-link-theme"),n=s("#bjui-themes")});var l=function(t,e){this.$element=s(t),this.options=e};function e(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},l.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.theme");i||t.data("bjui.theme",i=new l(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}l.DEFAULTS={theme:"purple"},l.prototype.init=function(){if(a.length){var t=a.attr("href");t=(t=t.substring(0,t.lastIndexOf("/"))).substring(0,t.lastIndexOf("/")),t+="/"+this.options.theme+"/core.css",a.attr("href",t);var e=this.$element.closest("ul").prev(),i=e.attr("class");i=i.replace(/(theme[\s][a-z]*)/g,""),e.removeClass().addClass(i).addClass("theme").addClass(this.options.theme),n.find("li").removeClass("active"),this.$element.parent().addClass("active"),this.cookie()}},l.prototype.setTheme=function(t){n.find("a.theme_"+t).trigger("click")},l.prototype.cookie=function(){var t=this.options.theme;s.cookie&&s.cookie("bjui_theme",t,{path:"",expires:30})};var t=s.fn.theme;s.fn.theme=e,s.fn.theme.Constructor=l,s.fn.theme.noConflict=function(){return s.fn.theme=t,this},s(document).on("click.bjui.theme.data-api",'[data-toggle="theme"]',function(t){e.call(s(this)),t.preventDefault()})}(jQuery),function(s){"use strict";var l=function(t,e){this.$element=s(t),this.options=e};function i(a){var n=arguments,o=a;return this.each(function(){var t=s(this),e=s.extend({},l.DEFAULTS,t.data(),"object"==typeof a&&a),i=t.data("bjui.initui");i||t.data("bjui.initui",i=new l(this,e)),"string"==typeof o&&s.isFunction(i[o])?([].shift.apply(n),n?i[o].apply(i,n):i[o]()):i.init()})}l.DEFAULTS={},l.prototype.init=function(){var t=this.$element;s.when(this.initUI()).done(function(){t.trigger(BJUI.eventType.afterInitUI)})},l.prototype.initUI=function(){var t=this.$element;s.when(t.trigger(BJUI.eventType.beforeInitUI)).done(function(){t.trigger(BJUI.eventType.initUI)})};var t=s.fn.initui;s.fn.initui=i,s.fn.initui.Constructor=l,s.fn.initui.noConflict=function(){return s.fn.initui=t,this},s(document).on("click.bjui.initui.data-api",'[data-toggle="initui"]',function(t){var e=s(this);i.call(e,e.data()),t.preventDefault()}),s(document).on(BJUI.eventType.beforeInitUI,function(t){var e=s(t.target),a=[],i=e.find("[data-noinit]");e.find("> .bjui-maskProgress").find(".progress").stop().animate({width:"85%"},"fast"),i.each(function(t){var e=s(this),i={};i.$target=e,i.$next=e.next(),i.$prev=e.prev(),i.$parent=e.parent(),i.visible=!!e.is(":visible"),a.push(i),e.remove()}),e.data("bjui.noinit",a)}),s(document).on(BJUI.eventType.initUI,function(t){s(t.target).find("> .bjui-maskProgress").find(".progress").stop().animate({width:"95%"},"fast")}),s(document).on(BJUI.eventType.afterInitUI,function(t){var i=s(t.target),e=i.data("bjui.noinit"),a=i.find("> .bjui-pageContent").find("form");e&&s.each(e,function(t,e){e.$next.length?e.$next.before(e.$target):e.$prev.length?e.$prev.after(e.$target):e.$parent.length&&e.$parent.append(e.$target),e.visible&&e.$target.show(),i.removeData("bjui.noinit")}),i.resizePageH(),a.length&&i.find("> .bjui-pageFooter").find(":submit").on("click.bjui.submit",function(t){t.preventDefault(),a.submit()}),i.find(".bjui-maskProgress").find(".progress").stop().animate({width:"100%"},"fast",function(){i.find(".bjui-ajax-mask").fadeOut("normal",function(){s(this).remove()})})}),s(document).one(BJUI.eventType.afterInitUI,function(t){var e=s("#bjui-hnav-navbar").find("> li.active");e.length&&e.find("> .items").length&&e.find("> a").trigger("click")});var n=function(t){var e=t,i=e;"static"===e.css("position")&&(i=e.offsetParent());var a=parseInt(i.css("zIndex"))||0,n=e.find("> .bjui-maskBackground"),o=e.find("> .bjui-maskProgress");return n.length||(n=s(FRAG.maskBackground),o=s(FRAG.maskProgress.replace("#msg#",BJUI.regional.progressmsg)),e.prepend(n).prepend(o)),n.css("zIndex",a+1),o.css("zIndex",a+2),{$bg:n,$pr:o}};s(document).on("bjui.ajaxStart",function(t,e,i){var a=n(s(t.target));a.$bg.fadeIn(),a.$pr.fadeIn(),a.$pr.find(".progress").animate({width:"80%"},e||500),i&&setTimeout(function(){i.toFunc().call(this)},25)}).on("bjui.ajaxStop",function(t){var e=n(s(t.target));e.$pr.find(".progress").animate({width:"100%"},"fast",function(){e.$bg.remove(),e.$pr.remove()})}).on("bjui.ajaxError",function(t){var e=n(s(t.target));e.$bg.remove(),e.$pr.remove()}),s(document).on(BJUI.eventType.ajaxStatus,function(t){var e=s(t.target),i=n(e);e.one("ajaxStart",function(){i.$bg.fadeIn(),i.$pr.fadeIn(),i.$pr.find(".progress").animate({width:"10%"},"fast")}).one("ajaxStop",function(){}).one("ajaxError",function(){i.$bg.remove(),i.$pr.remove()})});var e=function(t){t.find('select[data-toggle="selectpicker"]').selectpicker("destroyMenu"),t.find('[data-toggle="selectztree"]').trigger("destroy.bjui.selectztree")};s(document).on(BJUI.eventType.beforeLoadDialog,function(t){}).on(BJUI.eventType.beforeAjaxLoad,function(t){e(s(t.target))}).on(BJUI.eventType.beforeCloseNavtab,function(t){e(s(t.target))}).on(BJUI.eventType.beforeCloseDialog,function(t){e(s(t.target))}),s(function(){s(document).on("keydown keyup",function(t){t.which===BJUI.keyCode.CTRL&&(BJUI.KeyPressed.ctrl="keydown"===t.type),t.which===BJUI.keyCode.SHIFT&&(BJUI.KeyPressed.shift="keydown"===t.type)})})}(jQuery),function(u){"use strict";u(document).on(BJUI.eventType.initUI,function(t){var a=u(t.target),e=a.find('[data-toggle="icheck"]');e.each(function(t){var e=u(this),a=e.attr("id"),n=e.attr("name"),i=e.data("label");i&&e.after('<label for="'+a+'" class="ilabel">'+i+"</label>"),e.on("ifCreated",function(t){var e=u(this).closest("div"),i=e.next('[for="'+a+'"]');e.attr("data-icheck",n),i.attr("data-icheck",n)}).iCheck({checkboxClass:"icheckbox_minimal-purple",radioClass:"iradio_minimal-purple",increaseArea:"20%"}).on("ifChanged",function(){u(this).trigger("validate")}),e.prop("disabled")&&e.iCheck("disable")}),e.filter(".checkboxCtrl").on("ifChanged",function(t){var e=!0===t.target.checked?"check":"uncheck",i=u(this).data("group");a.find(':checkbox[name="'+i+'"]').iCheck(e)}),a.find(":text, :password, textarea, :button, a.btn").each(function(){var t=u(this);if(void 0===t.attr("b-native")){var e,i,a=t.closest("table.bjui-tabledit");if((t.is(":text")||t.is(":password")||t.isTag("textarea"))&&!t.hasClass("form-control")&&t.addClass("form-control"),t.is(":button")){e=t.data("icon");var n=t.attr("class");t.hasClass("btn")||t.removeClass().addClass("btn").addClass(n),e&&(i="fa-"+e.replace("fa-",""),t.data("bjui.icon")||t.html('<i class="fa '+i+'"></i> '+t.html()).data("bjui.icon",!0))}if(t.isTag("a")&&(e=t.data("icon"))&&(i="fa-"+e.replace("fa-",""),t.data("bjui.icon")||t.html('<i class="fa '+i+'"></i> '+t.html()).data("bjui.icon",!0)),t.isTag("textarea")){var o=t.data("toggle");o&&"autoheight"===o&&u.fn.autosize&&t.addClass("autosize").autosize()}if(!a.length){var s=t.attr("size")||t.attr("cols"),l=10*s;if(!s)return;l&&t.css("width",l)}}}),a.find('form[data-toggle="validate"]').each(function(){var t=u(this),a=void 0===t.data("alertmsg")||t.data("alertmsg");u(this).validator({valid:function(t){u(t).bjuiajax("ajaxForm",u(t).data())},validClass:"ok",theme:"red_right_effect"}).on("invalid.form",function(t,e,i){a&&u(e).alertmsg("error",FRAG.validateErrorMsg.replace("#validatemsg#",BJUI.regional.validatemsg).replaceMsg(i.length))})}),a.find('[data-toggle="moresearch"]').each(function(){var e=u(this),i=e.closest(".bjui-pageHeader"),a=i&&i.find(".bjui-moreSearch"),n=e.data("name");e.attr("title")||e.attr("title","更多查询条件"),e.click(function(t){a.length?(a.css("top",i.outerHeight()-1),a.is(":visible")?(e.html('<i class="fa fa-angle-double-down"></i>'),n&&u("body").data("moresearch."+n,!1)):(e.html('<i class="fa fa-angle-double-up"></i>'),n&&u("body").data("moresearch."+n,!0)),a.fadeToggle("slow","linear"),t.preventDefault()):BJUI.debug("Not created 'moresearch' box[class=\"bjui-moreSearch\"]!")}),n&&u("body").data("moresearch."+n)&&(a.css("top",i.outerHeight()-1).fadeIn(),e.html('<i class="fa fa-angle-double-up"></i>'))});var i=a.find('select[data-toggle="selectpicker"]'),n=function(t,e){var i=t.data("refurl"),s=function(t){var e=u(t.data("nextselect"));if(e&&e.length){var i=e.data("emptytxt")||"&nbsp;";e.html("<option>"+i+"</option>").selectpicker("refresh"),s(e)}};if(e&&e.length&&i){var a=t.data("val"),l=e.data("val");void 0===a&&(a=t.val()),u.ajax({type:"POST",dataType:"json",url:i.replace("{value}",encodeURIComponent(a)),cache:!1,data:{},success:function(a){if(a){var n="",o="";u.each(a,function(t){var e,i;i=a[t]&&a[t].length?(e=a[t][0],a[t][1]):(e=a[t].value,a[t].label),void 0!==l&&(o=e===l?" selected":""),n+='<option value="'+e+'"'+o+">"+i+"</option>"}),t.removeAttr("data-val").removeData("val"),e.removeAttr("data-val").removeData("val"),n||(n="<option>"+(n=e.data("emptytxt")||"&nbsp;")+"</option>"),e.html(n).selectpicker("refresh"),s(e)}},error:BJUI.ajaxError})}};i.each(function(){var t=u(this),e=t.data(),i=u(e.nextselect);t.addClass("show-tick"),e.style||t.data("style","btn-default"),e.width||t.data("width","auto"),e.container?!0===e.container&&t.attr("data-container","false").data("container",!1):t.data("container","body"),t.selectpicker(),i&&i.length&&void 0!==i.data("val")&&n(t,i)}),i.change(function(){var t=u(this),e=u(t.data("nextselect"));n(t,e),t.attr("aria-required")&&t.trigger("validate")}),a.find('[data-toggle="ztree"]').each(function(){var t,e=u(this),l=e.data(),i=l.options;i&&"string"==typeof i&&(i=i.toObj()),i&&u.extend(l,"object"==typeof i&&i),t=l.setting,l.nodes?("string"==typeof l.nodes&&(l.nodes.trim().startsWith("[")||l.nodes.trim().startsWith("{")?l.nodes=l.nodes.toObj():l.nodes=l.nodes.toFunc()),"function"==typeof l.nodes&&(l.nodes=l.nodes.call(this)),e.removeAttr("data-nodes")):(l.nodes=[],e.find("> li").each(function(){var t=u(this),e=t.data();e.pid&&(e.pId=e.pid),e.name=t.html(),l.nodes.push(e)}),e.empty()),l.showRemoveBtn||(l.showRemoveBtn=!1),l.showRenameBtn||(l.showRenameBtn=!1),l.addHoverDom&&"function"!=typeof l.addHoverDom&&(l.addHoverDom="edit"===l.addHoverDom?function(n,o){var t=o.level,e=u("#"+o.tId+r),i=u("#diyBtn_add_"+o.id),s=u("#diyBtn_del_"+o.id);i.length||t<l.maxAddLevel&&((i=u('<span class="tree_add" id="diyBtn_add_'+o.id+'" title="添加"></span>')).appendTo(e),i.on("click",function(){d.addNodes(o,{name:"新增Item"})}));s.length||(s=u('<span class="tree_del" id="diyBtn_del_'+o.id+'" title="删除"></span>')).appendTo(e).on("click",function(e){var t=function(){s.alertmsg("confirm","确认要删除 "+o.name+" 吗？",{okCall:function(){if(d.removeNode(o),l.onRemove){var t=l.onRemove.toFunc();t&&t.call(this,e,n,o)}},cancelCall:function(){}})};if(l.beforeRemove){var i=l.beforeRemove.toFunc();if(i){var a=i.call(i,n,o);a&&!0===a&&t()}}else t()})}:l.addHoverDom.toFunc()),l.removeHoverDom&&"function"!=typeof l.removeHoverDom&&(l.removeHoverDom="edit"===l.removeHoverDom?function(t,e){var i=u("#diyBtn_add_"+e.id),a=u("#diyBtn_del_"+e.id);i&&i.length&&i.off("click").remove();a&&a.length&&a.off("click").remove()}:l.removeHoverDom.toFunc()),l.maxAddLevel||(l.maxAddLevel=2);var a={view:{addHoverDom:l.addHoverDom||null,removeHoverDom:l.removeHoverDom||null,addDiyDom:l.addDiyDom?l.addDiyDom.toFunc():null},edit:{enable:l.editEnable,showRemoveBtn:l.showRemoveBtn,showRenameBtn:l.showRenameBtn},check:{enable:l.checkEnable,chkStyle:l.chkStyle,radioType:l.radioType},callback:{onClick:l.onClick?l.onClick.toFunc():null,beforeDrag:l.beforeDrag?l.beforeDrag.toFunc():function(t,e){for(var i=0;i<e.length;i++)if(!1===e[i].drag)return!1;return!0},beforeDrop:l.beforeDrop?l.beforeDrop.toFunc():function(t,e,i,a){return!i||!1!==i.drop},onDrop:l.onDrop?l.onDrop.toFunc():null,onCheck:l.onCheck?l.onCheck.toFunc():null,beforeRemove:l.beforeRemove?l.beforeRemove.toFunc():null,onRemove:l.onRemove?l.onRemove.toFunc():null,onNodeCreated:function(t,e,i){if(i.faicon){var a=u("#"+i.tId+"_a");a.data("faicon")||a.data("faicon",!0).addClass("faicon").find("> span.button").append('<i class="fa fa-'+i.faicon+'"></i>')}l.onNodeCreated&&l.onNodeCreated.toFunc().call(this,t,e,i)},onCollapse:function(t,e,i){i.faiconClose&&u("#"+i.tId+"_ico").find("> i").attr("class","fa fa-"+i.faiconClose);l.onCollapse&&l.onCollapse.toFunc().call(this,t,e,i)},onExpand:function(t,e,i){i.faicon&&i.faiconClose&&u("#"+i.tId+"_ico").find("> i").attr("class","fa fa-"+i.faicon);l.onExpand&&l.onExpand.toFunc().call(this,t,e,i)}},data:{simpleData:{enable:l.simpleData||!0},key:{title:l.title||""}}};t&&"string"==typeof t&&(t=t.toObj()),t&&u.extend(!0,a,"object"==typeof t&&t),u.fn.zTree.init(e,a,l.nodes);var r="_a",d=u.fn.zTree.getZTreeObj(e.attr("id"));l.expandAll&&d.expandAll(!0)}),a.find('[data-toggle="selectztree"]').each(function(){var l=u(this),r=l.data(),d=u(r.tree),c=l.outerHeight();if(r.width=r.width||l.outerWidth(),r.height=r.height||"auto",d&&d.length){var i=d.attr("id"),a=u("#"+i+"_select_box"),n=function(t){var e=l.offset().top,i=l.offset().left,a=d.clone().appendTo(u("body")),n=a.outerHeight();a.remove();var o=u(window).height()-n-e-c,s=u(window).height()-e-c;"auto"===r.height&&o<0&&(s+=o),t.css({top:e+c,left:i,"max-height":s})};l.click(function(){if(a&&a.length)return n(a),void a.show();var t=2,e=u.CurrentDialog;e&&e.length&&(t=e.css("zIndex")+1),a=u('<div id="'+i+'_select_box" class="tree-box"></div>').css({position:"absolute",zIndex:t,"min-width":r.width,height:r.height,overflow:"auto",background:"#FAFAFA",border:"1px #EEE solid"}).hide().appendTo(u("body")),d.appendTo(a).css("width","100%").data("fromObj",l).removeClass("hide").show(),n(a),a.show()}),u("body").on("mousedown",function(t){var e=u(t.target);l[0]===t.target||a&&0<a.length&&0<e.closest(".tree-box").length||a.hide()});var t=l.closest(".bjui-pageContent");t&&t.length&&t.scroll(function(){a&&a.length&&n(a)}),l.on("destroy.bjui.selectztree",function(){a.remove()})}}),a.find('[data-toggle="accordion"]').each(function(){var o=u(this),t=o.data("heightbox"),e=o.data("height"),i=function(t,e){var i=o.data("offsety")||0;e=e||u(t).outerHeight()-1*i;var a=o.find(".panel-heading"),n=a.outerHeight();n=(n+1)*a.length,o.css("height",e),e-=n,o.find(".panel-collapse").find(".panel-body").css("height",e)};o.find("> .panel").length&&(t||e)&&(i(t,e),u(window).resize(function(){i(t,e)}),o.on("hidden.bs.collapse",function(t){var e=u(this).find("> .panel:last");e.find("> .panel-heading > h4 > a").hasClass("collapsed")&&e.css("border-bottom","1px #ddd solid")}))}),a.find('[data-toggle="kindeditor"]').each(function(){var t=u(this),e=t.data();e.items&&"string"==typeof e.items&&(e.items=e.items.replaceAll("'","").replaceAll(" ","").split(",")),e.afterUpload&&(e.afterUpload=e.afterUpload.toFunc()),e.afterSelectFile&&(e.afterSelectFile=e.afterSelectFile.toFunc()),e.confirmSelect&&(e.confirmSelect=e.confirmSelect.toFunc());KindEditor.create(t,{pasteType:e.pasteType,minHeight:e.minHeight||260,autoHeightMode:e.autoHeight||!1,items:e.items||KindEditor.options.items,uploadJson:e.uploadJson,fileManagerJson:e.fileManagerJson,allowFileManager:e.allowFileManager||!0,fillDescAfterUploadImage:e.fillDescAfterUploadImage||!0,afterUpload:e.afterUpload,afterSelectFile:e.afterSelectFile,X_afterSelect:e.confirmSelect,htmlTags:{font:[],span:[".color",".background-color",".font-size",".font-family"],div:[".margin",".padding",".text-align"],table:["align","width"],"td,th":["align","valign","width","height","colspan","rowspan"],a:["href","target","name"],embed:["src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["class","align",".text-align",".color",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["class"],hr:["class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":[]},cssPath:[BJUI.PLUGINPATH+"kindeditor/editor-content.css",BJUI.PLUGINPATH+"kindeditor/plugins/code/prettify.css"],afterBlur:function(){this.sync()}})}),a.find('[data-toggle="colorpicker"]').each(function(){var e=u(this),t=e.data("bgcolor");e.colorpicker(),t&&e.on("changeColor",function(t){e.css("background-color",t.color.toHex())})}),a.find('[data-toggle="clearcolor"]').each(function(){var t=u(this),e=t.data("target")?u(t.data("target")):null;e&&e.length&&t.click(function(){e.val(""),e.data("bgcolor")&&e.css("background-color","")})}),a.find('[data-toggle="tooltip"]').each(function(){u(this).tooltip()}),a.find('[data-toggle="dropdown"]').parent().on("show.bs.dropdown",function(t){var e=u(this),i=e.outerWidth(),a=e.find("> .dropdown-menu");a.outerWidth()<i&&a.css("min-width",i)}),a.find('form[data-toggle="ajaxform"]').each(function(){u(this).validator({ignore:":input"}),u(this).validator("destroy")}),a.find("textarea[data-toggle=jsoneditor]").each(function(){var e=u(this);e.hide(),setTimeout(function(){CodeMirror.fromTextArea(e[0],{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}).on("change",function(t){e.val(t.getValue())})},100)}),a.find("[data-toggle=clipboard]").each(function(){var t=u(this).data(),e={};t.target?e.target=function(){return a.find(t.target)[0]}:t.text&&(e.text=function(){return t.text}),new ClipboardJS(this,e).on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger),a.alertmsg("error","复制失败！")})})})}(jQuery);